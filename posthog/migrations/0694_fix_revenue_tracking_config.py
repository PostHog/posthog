# Generated by Django 4.2.18 on 2025-03-17 20:19

from django.db import migrations


def fix_revenue_tracking_config(apps, schema_editor):
    Team = apps.get_model("posthog", "Team")
    for team in Team.objects.all():
        if team.revenue_tracking_config:
            team.revenue_tracking_config[
                "dataWarehouseTables"
            ] = []  # Reset all tables, they're not valid anymore, hidden behind FF anyway
            team.save()


class Migration(migrations.Migration):
    atomic = False  # Allows these changes to be made without holding a transaction the whole time

    dependencies = [
        ("posthog", "0693_grouptypemapping_default_columns"),
    ]

    operations = [
        migrations.RunPython(fix_revenue_tracking_config, migrations.RunPython.noop),
    ]
