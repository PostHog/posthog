# Generated by Django 3.0.5 on 2020-05-08 09:31

from django.db import migrations


def migrate_calculate_cohorts(apps, schema_editor):
    from posthog.models import Cohort
    for cohort in Cohort.objects.all():
        cohort.calculate_people()
        if cohort.team.users.count() == 1:
            cohort.created_by = cohort.team.users.get()
            cohort.save()


def backwards(apps, schema_editor):
    pass


class Migration(migrations.Migration):

    dependencies = [
        ('posthog', '0051_precalculate_cohorts'),
    ]

    operations = [
        migrations.RunPython(migrate_calculate_cohorts, backwards)
    ]
