# Generated by Django 3.2.16 on 2023-01-27 08:41

from django.contrib.postgres.operations import AddIndexConcurrently  # type: ignore
from django.db import migrations, models
from django.db.models.expressions import F, OrderBy
from django.db.models.functions.comparison import Coalesce


class Migration(migrations.Migration):
    atomic = False

    dependencies = [
        ("posthog", "0296_team_allow_blank_fields"),
    ]

    operations = [
        AddIndexConcurrently(
            model_name="propertydefinition",
            index=models.Index(  # type: ignore
                F("team_id"),  # type: ignore
                F("type"),  # type: ignore
                Coalesce(F("group_type_index"), -1),  # type: ignore
                OrderBy(F("query_usage_30_day"), descending=True, nulls_last=True),  # type: ignore
                OrderBy(F("name")),  # type: ignore
                name="index_property_def_query",
            ),
        ),
    ]
