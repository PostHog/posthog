# Generated by Django 4.2.15 on 2025-01-17 01:29

from django.db import migrations
from django.db.migrations.operations.special import SeparateDatabaseAndState


class Migration(migrations.Migration):
    dependencies = [
        ("posthog", "0707_file_system_shortcut"),
    ]

    operations = [
        SeparateDatabaseAndState(
            database_operations=[
                migrations.RunSQL(
                    """
                    ALTER TABLE posthog_person DROP CONSTRAINT IF EXISTS posthog_person_team_id_fkey;
                    ALTER TABLE posthog_person DROP CONSTRAINT IF EXISTS posthog_person_is_user_id_fkey;
                    ALTER TABLE posthog_persondistinctid DROP CONSTRAINT IF EXISTS posthog_persondistinctid_team_id_fkey;
                    ALTER TABLE posthog_personlessdistinctid DROP CONSTRAINT IF EXISTS posthog_personlessdistinctid_team_id_fkey;
                    ALTER TABLE posthog_featureflaghashkeyoverride DROP CONSTRAINT IF EXISTS posthog_featureflaghashkeyoverride_team_id_fkey;
                    ALTER TABLE posthog_cohortpeople DROP CONSTRAINT IF EXISTS posthog_cohortpeople_cohort_id_fkey;
                    """,
                    """
                    -- No reverse SQL needed since we're dropping constraints that will be recreated in a different form
                    """,
                )
            ],
            state_operations=[],
        ),
    ]
