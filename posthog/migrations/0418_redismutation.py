# Generated by Django 4.2.11 on 2024-05-03 14:56

import django.contrib.postgres.fields
from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [("posthog", "0417_remove_organizationmembership_only_one_owner_per_organization_and_more")]

    operations = [
        migrations.CreateModel(
            name="RedisMutation",
            fields=[
                ("id", models.BigAutoField(editable=False, primary_key=True, serialize=False)),
                ("redis_key", models.CharField(max_length=200)),
                (
                    "redis_type",
                    models.CharField(
                        choices=[
                            ("string", "String"),
                            ("hash", "Hash"),
                            ("zset", "Zset"),
                            ("list", "List"),
                            ("set", "Set"),
                        ],
                        max_length=200,
                    ),
                ),
                ("value", models.CharField(blank=True, null=True)),
                (
                    "command",
                    models.CharField(
                        choices=[
                            ("set", "Set"),
                            ("append", "Append"),
                            ("expire", "Expire"),
                            ("del", "Del"),
                            ("zadd", "Zadd"),
                            ("sadd", "Sadd"),
                        ],
                        max_length=200,
                    ),
                ),
                ("parameters", models.JSONField(blank=True, default=dict)),
                ("approval_threshold", models.IntegerField(default=2)),
                (
                    "status",
                    models.CharField(
                        choices=[
                            ("created", "Created"),
                            ("approved", "Approved"),
                            ("applied", "Completed"),
                            ("failed", "Failed"),
                            ("discarded", "Discarded"),
                        ],
                        default="created",
                        max_length=200,
                    ),
                ),
                (
                    "approved_by",
                    django.contrib.postgres.fields.ArrayField(
                        base_field=models.CharField(), default=list, editable=False, size=None
                    ),
                ),
                ("created_at", models.DateTimeField(auto_now_add=True)),
                ("last_approved_at", models.DateTimeField(editable=False, null=True)),
                ("last_updated_at", models.DateTimeField(auto_now=True)),
                ("applied_by", models.CharField(editable=False, max_length=200, null=True)),
                ("applied_at", models.DateTimeField(editable=False, null=True)),
                ("discarded_by", models.CharField(editable=False, max_length=200, null=True)),
                ("discarded_at", models.DateTimeField(editable=False, null=True)),
            ],
        ),
    ]
