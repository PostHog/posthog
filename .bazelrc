common --enable_bzlmod

# Allow network access for uv pip compile (git dependencies)
build --sandbox_default_allow_network=true

# Disk cache for faster incremental builds
build --disk_cache=~/.cache/bazel-disk-cache

# Repository cache for external dependencies (pip packages, etc.)
# Saves ~3 min on cold start by caching downloaded external repos
common --repository_cache=~/.cache/bazel-repos

# CI configuration
# Usage: bazel test --config=ci //...
# Note: test_env set via common to avoid analysis cache invalidation
# (otherwise bazel run/query without it, then bazel test with it = cache miss)
common:ci --test_env=DEBUG=1
test:ci --test_output=errors
test:ci --keep_going
test:ci --verbose_failures

# Local development (default)
test --test_output=summary
