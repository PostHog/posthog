#!/bin/bash

set -e

# Wait for up to 120 seconds for Temporal to be ready
SECONDS=0
TIMEOUT=120

# Check Temporal
while true; do
    curl -s -o /dev/null -I 'http://localhost:7233/' && break || echo 'Checking Temporal status...' && sleep 1
    if [ $SECONDS -gt $TIMEOUT ]; then
        echo "Timeout waiting for Temporal to be ready"
        exit 1
    fi
done
