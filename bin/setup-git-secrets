#!/usr/bin/env bash
set -e

echo "Setting up git-secrets..."

if ! command -v git-secrets &> /dev/null; then
    echo "git-secrets is not installed."
    echo ""
    echo "Please install it first:"
    echo "  macOS:   brew install git-secrets"
    echo "  Linux:   Follow instructions at https://github.com/awslabs/git-secrets#installing-git-secrets"
    echo ""
    exit 1
fi

git secrets --install --force
git secrets --register-aws

echo "âœ… git-secrets hooks installed successfully!"
echo ""
echo "The following hooks have been configured:"
echo "  - pre-commit: Scans staged files for secrets"
echo "  - commit-msg: Scans commit messages for secrets"
echo "  - prepare-commit-msg: Prepares commit message scanning"
echo ""
echo "AWS secret patterns have been registered."
