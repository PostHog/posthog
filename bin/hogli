#!/bin/bash
# Wrapper that ensures venv is active before running hogli.
# Needed for git hooks / lint-staged which may run outside an activated shell.

set -euo pipefail

REPO_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

if [ -z "${VIRTUAL_ENV:-}" ]; then
    for venv in "$REPO_ROOT/.flox/cache/venv" "$REPO_ROOT/.venv" "$REPO_ROOT/env"; do
        if [ -d "$venv" ]; then
            source "$venv/bin/activate"
            break
        fi
    done
fi

exec hogli "$@"
