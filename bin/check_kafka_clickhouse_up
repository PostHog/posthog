#!/bin/bash

set -e

# Check Kafka
while true; do
nc -z localhost 9092 && break || echo 'Checking Kafka status...' && sleep 1
done

# Check ClickHouse within Docker Compose network using the service name 'clickhouse'
while true; do
    curl -s -o /dev/null -I 'http://localhost:8123/' && break || echo 'Checking ClickHouse status...' && sleep 1
done
