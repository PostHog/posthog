import{a as nl,b as il,c as al}from"/static/chunk-T4JH5FGK.js";import{a as ol,b as cl,c as ll}from"/static/chunk-COOXGJAW.js";import{c as rl}from"/static/chunk-ERJU6QDI.js";import{a as tl}from"/static/chunk-QWUPOSXD.js";import{a as Lr,b as Zi,c as Ha,d as Vi,e as _r,h as sl}from"/static/chunk-FL4TLK7Q.js";import{a as Yc}from"/static/chunk-SEJ4C6TB.js";import{a as zc}from"/static/chunk-AZNOCCXL.js";import{a as qc}from"/static/chunk-QNYERZG7.js";import{g as Lt,r as Qa}from"/static/chunk-MOVKLCV5.js";import{$b as Bs,$e as Ec,Ac as rc,Ad as gc,Ae as Fc,Bc as Za,Bd as vc,Bi as Lc,Ca as Cs,Cb as ks,Cc as nc,Cd as Ci,Ce as Oi,Db as Us,Do as X,Ek as Ga,Em as Hc,Eo as lt,Fb as Zs,Fc as Ri,Fe as mr,Fk as Mc,Hb as hi,Ib as gn,Id as yc,Ig as Pc,Ik as ki,Io as ut,Ip as $c,Jb as Vs,Jd as bc,Jp as Kc,Kb as js,Ko as yn,Lb as ka,Mb as gi,Nb as Ls,Ne as Wi,Np as el,Oe as Va,Oi as _c,Pb as He,Pe as Ti,Qa as Fs,Qb as _s,Qd as Je,Rb as vi,Rc as ic,Rd as Sc,Sa as Rt,Sc as ac,Sd as Z,Ta as st,Vb as Gs,Vk as Da,Vn as Jc,Wb as vn,Wc as oc,Wd as Zr,Wi as _a,Wk as mm,Wn as Xc,Xb as Ds,Xd as Fi,Xk as Ba,Yb as yi,Yi as jr,Za as hn,Zc as Vt,_c as sc,_e as Nc,_l as $t,a as ie,ac as bi,ad as cc,ae as jt,af as Vr,b as Ut,bb as Ns,bc as Qs,bd as lc,be as Ni,cc as Ms,ce as xc,cf as ja,ch as Oc,ci as Zc,dc as Ua,de as Rc,df as hr,di as Vc,ec as Hs,ee as Ei,ei as gr,f as Wa,fc as Js,fd as uc,fe as wt,g as xs,gh as Wc,h as Zt,hc as Xs,hj as ct,ic as Ys,id as dc,ie as wc,ja as Is,jc as zs,jd as fc,jk as Gc,kc as Si,ke as Ai,ld as wi,lg as Ac,li as jc,m as xt,mb as Es,md as Ur,mg as La,na as di,nm as Ui,o as Rs,oc as qs,p as Se,pb as As,pe as Pi,ph as Tc,q as Tr,qk as Dc,r as j,rb as fi,rd as Ii,re as Ic,rk as Bc,rp as Ma,sb as pi,sc as $s,sd as pc,se as Xe,sk as Qc,tb as mi,ub as Ps,ud as mc,vb as Os,vc as xi,vh as kc,wc as Ks,xb as Ws,xc as ec,xd as hc,y as kr,z as ws,zb as Ts,zc as tc,ze as Cc,zh as Uc}from"/static/chunk-TW5IU73S.js";import{Ba as mn,F as et,Ha as ci,Jb as ui,Mb as Ta,a as q,m as Ss,na as Wr,pb as li}from"/static/chunk-3UDJFOQH.js";import{b as re,d as S,e as f,f as b,g as p,j as m}from"/static/chunk-SJXEOBQC.js";var fu=re((eo,to)=>{"use strict";f();m();p();(function(e,t){typeof eo=="object"&&typeof to<"u"?to.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self).algoliasearch=t()})(eo,function(){"use strict";function e(C,F,N){return F in C?Object.defineProperty(C,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):C[F]=N,C}function t(C,F){var N=Object.keys(C);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(C);F&&(E=E.filter(function(T){return Object.getOwnPropertyDescriptor(C,T).enumerable})),N.push.apply(N,E)}return N}function r(C){for(var F=1;F<arguments.length;F++){var N=arguments[F]!=null?arguments[F]:{};F%2?t(Object(N),!0).forEach(function(E){e(C,E,N[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(N)):t(Object(N)).forEach(function(E){Object.defineProperty(C,E,Object.getOwnPropertyDescriptor(N,E))})}return C}function n(C,F){if(C==null)return{};var N,E,T=function(M,V){if(M==null)return{};var ae,ge,ne={},Oe=Object.keys(M);for(ge=0;ge<Oe.length;ge++)ae=Oe[ge],V.indexOf(ae)>=0||(ne[ae]=M[ae]);return ne}(C,F);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(C);for(E=0;E<L.length;E++)N=L[E],F.indexOf(N)>=0||Object.prototype.propertyIsEnumerable.call(C,N)&&(T[N]=C[N])}return T}function i(C,F){return function(N){if(Array.isArray(N))return N}(C)||function(N,E){if(Symbol.iterator in Object(N)||Object.prototype.toString.call(N)==="[object Arguments]"){var T=[],L=!0,M=!1,V=void 0;try{for(var ae,ge=N[Symbol.iterator]();!(L=(ae=ge.next()).done)&&(T.push(ae.value),!E||T.length!==E);L=!0);}catch(ne){M=!0,V=ne}finally{try{L||ge.return==null||ge.return()}finally{if(M)throw V}}return T}}(C,F)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(C){return function(F){if(Array.isArray(F)){for(var N=0,E=new Array(F.length);N<F.length;N++)E[N]=F[N];return E}}(C)||function(F){if(Symbol.iterator in Object(F)||Object.prototype.toString.call(F)==="[object Arguments]")return Array.from(F)}(C)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(C){var F,N="algoliasearch-client-js-".concat(C.key),E=function(){return F===void 0&&(F=C.localStorage||window.localStorage),F},T=function(){return JSON.parse(E().getItem(N)||"{}")},L=function(V){E().setItem(N,JSON.stringify(V))},M=function(){var V=C.timeToLive?1e3*C.timeToLive:null,ae=T(),ge=Object.fromEntries(Object.entries(ae).filter(function(Oe){return i(Oe,2)[1].timestamp!==void 0}));if(L(ge),V){var ne=Object.fromEntries(Object.entries(ge).filter(function(Oe){var Ee=i(Oe,2)[1],Me=new Date().getTime();return!(Ee.timestamp+V<Me)}));L(ne)}};return{get:function(V,ae){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){M();var ne=JSON.stringify(V);return T()[ne]}).then(function(ne){return Promise.all([ne?ne.value:ae(),ne!==void 0])}).then(function(ne){var Oe=i(ne,2),Ee=Oe[0],Me=Oe[1];return Promise.all([Ee,Me||ge.miss(Ee)])}).then(function(ne){return i(ne,1)[0]})},set:function(V,ae){return Promise.resolve().then(function(){var ge=T();return ge[JSON.stringify(V)]={timestamp:new Date().getTime(),value:ae},E().setItem(N,JSON.stringify(ge)),ae})},delete:function(V){return Promise.resolve().then(function(){var ae=T();delete ae[JSON.stringify(V)],E().setItem(N,JSON.stringify(ae))})},clear:function(){return Promise.resolve().then(function(){E().removeItem(N)})}}}function s(C){var F=a(C.caches),N=F.shift();return N===void 0?{get:function(E,T){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},M=T();return M.then(function(V){return Promise.all([V,L.miss(V)])}).then(function(V){return i(V,1)[0]})},set:function(E,T){return Promise.resolve(T)},delete:function(E){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(E,T){var L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return N.get(E,T,L).catch(function(){return s({caches:F}).get(E,T,L)})},set:function(E,T){return N.set(E,T).catch(function(){return s({caches:F}).set(E,T)})},delete:function(E){return N.delete(E).catch(function(){return s({caches:F}).delete(E)})},clear:function(){return N.clear().catch(function(){return s({caches:F}).clear()})}}}function l(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},F={};return{get:function(N,E){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},L=JSON.stringify(N);if(L in F)return Promise.resolve(C.serializable?JSON.parse(F[L]):F[L]);var M=E(),V=T&&T.miss||function(){return Promise.resolve()};return M.then(function(ae){return V(ae)}).then(function(){return M})},set:function(N,E){return F[JSON.stringify(N)]=C.serializable?JSON.stringify(E):E,Promise.resolve(E)},delete:function(N){return delete F[JSON.stringify(N)],Promise.resolve()},clear:function(){return F={},Promise.resolve()}}}function c(C){for(var F=C.length-1;F>0;F--){var N=Math.floor(Math.random()*(F+1)),E=C[F];C[F]=C[N],C[N]=E}return C}function u(C,F){return F&&Object.keys(F).forEach(function(N){C[N]=F[N](C)}),C}function d(C){for(var F=arguments.length,N=new Array(F>1?F-1:0),E=1;E<F;E++)N[E-1]=arguments[E];var T=0;return C.replace(/%s/g,function(){return encodeURIComponent(N[T++])})}var h={WithinQueryParameters:0,WithinHeaders:1};function g(C,F){var N=C||{},E=N.data||{};return Object.keys(N).forEach(function(T){["timeout","headers","queryParameters","data","cacheable"].indexOf(T)===-1&&(E[T]=N[T])}),{data:Object.entries(E).length>0?E:void 0,timeout:N.timeout||F,headers:N.headers||{},queryParameters:N.queryParameters||{},cacheable:N.cacheable}}var v={Read:1,Write:2,Any:3},y=1,I=2,w=3;function W(C){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:y;return r(r({},C),{},{status:F,lastUpdate:Date.now()})}function O(C){return typeof C=="string"?{protocol:"https",url:C,accept:v.Any}:{protocol:C.protocol||"https",url:C.url,accept:C.accept||v.Any}}var B="GET",J="POST";function $(C,F){return Promise.all(F.map(function(N){return C.get(N,function(){return Promise.resolve(W(N))})})).then(function(N){var E=N.filter(function(M){return function(V){return V.status===y||Date.now()-V.lastUpdate>12e4}(M)}),T=N.filter(function(M){return function(V){return V.status===w&&Date.now()-V.lastUpdate<=12e4}(M)}),L=[].concat(a(E),a(T));return{getTimeout:function(M,V){return(T.length===0&&M===0?1:T.length+3+M)*V},statelessHosts:L.length>0?L.map(function(M){return O(M)}):F}})}function Q(C,F,N,E){var T=[],L=function(Ee,Me){if(!(Ee.method===B||Ee.data===void 0&&Me.data===void 0)){var be=Array.isArray(Ee.data)?Ee.data:r(r({},Ee.data),Me.data);return JSON.stringify(be)}}(N,E),M=function(Ee,Me){var be=r(r({},Ee.headers),Me.headers),Le={};return Object.keys(be).forEach(function(kt){var mt=be[kt];Le[kt.toLowerCase()]=mt}),Le}(C,E),V=N.method,ae=N.method!==B?{}:r(r({},N.data),E.data),ge=r(r(r({"x-algolia-agent":C.userAgent.value},C.queryParameters),ae),E.queryParameters),ne=0,Oe=function Ee(Me,be){var Le=Me.pop();if(Le===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:z(T)};var kt={data:L,headers:M,method:V,url:K(Le,N.path,ge),connectTimeout:be(ne,C.timeouts.connect),responseTimeout:be(ne,E.timeout)},mt=function(ke){var pe={request:kt,response:ke,host:Le,triesLeft:Me.length};return T.push(pe),pe},oi={onSuccess:function(ke){return function(pe){try{return JSON.parse(pe.content)}catch(St){throw function(qt,Or){return{name:"DeserializationError",message:qt,response:Or}}(St.message,pe)}}(ke)},onRetry:function(ke){var pe=mt(ke);return ke.isTimedOut&&ne++,Promise.all([C.logger.info("Retryable failure",Ae(pe)),C.hostsCache.set(Le,W(Le,ke.isTimedOut?w:I))]).then(function(){return Ee(Me,be)})},onFail:function(ke){throw mt(ke),function(pe,St){var qt=pe.content,Or=pe.status,pn=qt;try{pn=JSON.parse(qt).message}catch{}return function(si,Oa,pm){return{name:"ApiError",message:si,status:Oa,transporterStackTrace:pm}}(pn,Or,St)}(ke,z(T))}};return C.requester.send(kt).then(function(ke){return function(pe,St){return function(qt){var Or=qt.status;return qt.isTimedOut||function(pn){var si=pn.isTimedOut,Oa=pn.status;return!si&&~~Oa==0}(qt)||~~(Or/100)!=2&&~~(Or/100)!=4}(pe)?St.onRetry(pe):~~(pe.status/100)==2?St.onSuccess(pe):St.onFail(pe)}(ke,oi)})};return $(C.hostsCache,F).then(function(Ee){return Oe(a(Ee.statelessHosts).reverse(),Ee.getTimeout)})}function Y(C){var F={value:"Algolia for JavaScript (".concat(C,")"),add:function(N){var E="; ".concat(N.segment).concat(N.version!==void 0?" (".concat(N.version,")"):"");return F.value.indexOf(E)===-1&&(F.value="".concat(F.value).concat(E)),F}};return F}function K(C,F,N){var E=_(N),T="".concat(C.protocol,"://").concat(C.url,"/").concat(F.charAt(0)==="/"?F.substr(1):F);return E.length&&(T+="?".concat(E)),T}function _(C){return Object.keys(C).map(function(F){return d("%s=%s",F,(N=C[F],Object.prototype.toString.call(N)==="[object Object]"||Object.prototype.toString.call(N)==="[object Array]"?JSON.stringify(C[F]):C[F]));var N}).join("&")}function z(C){return C.map(function(F){return Ae(F)})}function Ae(C){var F=C.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return r(r({},C),{},{request:r(r({},C.request),{},{headers:r(r({},C.request.headers),F)})})}var Ke=function(C){var F=C.appId,N=function(T,L,M){var V={"x-algolia-api-key":M,"x-algolia-application-id":L};return{headers:function(){return T===h.WithinHeaders?V:{}},queryParameters:function(){return T===h.WithinQueryParameters?V:{}}}}(C.authMode!==void 0?C.authMode:h.WithinHeaders,F,C.apiKey),E=function(T){var L=T.hostsCache,M=T.logger,V=T.requester,ae=T.requestsCache,ge=T.responsesCache,ne=T.timeouts,Oe=T.userAgent,Ee=T.hosts,Me=T.queryParameters,be={hostsCache:L,logger:M,requester:V,requestsCache:ae,responsesCache:ge,timeouts:ne,userAgent:Oe,headers:T.headers,queryParameters:Me,hosts:Ee.map(function(Le){return O(Le)}),read:function(Le,kt){var mt=g(kt,be.timeouts.read),oi=function(){return Q(be,be.hosts.filter(function(pe){return(pe.accept&v.Read)!=0}),Le,mt)};if((mt.cacheable!==void 0?mt.cacheable:Le.cacheable)!==!0)return oi();var ke={request:Le,mappedRequestOptions:mt,transporter:{queryParameters:be.queryParameters,headers:be.headers}};return be.responsesCache.get(ke,function(){return be.requestsCache.get(ke,function(){return be.requestsCache.set(ke,oi()).then(function(pe){return Promise.all([be.requestsCache.delete(ke),pe])},function(pe){return Promise.all([be.requestsCache.delete(ke),Promise.reject(pe)])}).then(function(pe){var St=i(pe,2);return St[0],St[1]})})},{miss:function(pe){return be.responsesCache.set(ke,pe)}})},write:function(Le,kt){return Q(be,be.hosts.filter(function(mt){return(mt.accept&v.Write)!=0}),Le,g(kt,be.timeouts.write))}};return be}(r(r({hosts:[{url:"".concat(F,"-dsn.algolia.net"),accept:v.Read},{url:"".concat(F,".algolia.net"),accept:v.Write}].concat(c([{url:"".concat(F,"-1.algolianet.com")},{url:"".concat(F,"-2.algolianet.com")},{url:"".concat(F,"-3.algolianet.com")}]))},C),{},{headers:r(r(r({},N.headers()),{"content-type":"application/x-www-form-urlencoded"}),C.headers),queryParameters:r(r({},N.queryParameters()),C.queryParameters)}));return u({transporter:E,appId:F,addAlgoliaAgent:function(T,L){E.userAgent.add({segment:T,version:L})},clearCache:function(){return Promise.all([E.requestsCache.clear(),E.responsesCache.clear()]).then(function(){})}},C.methods)},it=function(C){return function(F,N){return F.method===B?C.transporter.read(F,N):C.transporter.write(F,N)}},at=function(C){return function(F){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},E={transporter:C.transporter,appId:C.appId,indexName:F};return u(E,N.methods)}},bt=function(C){return function(F,N){var E=F.map(function(T){return r(r({},T),{},{params:_(T.params||{})})});return C.transporter.read({method:J,path:"1/indexes/*/queries",data:{requests:E},cacheable:!0},N)}},ee=function(C){return function(F,N){return Promise.all(F.map(function(E){var T=E.params,L=T.facetName,M=T.facetQuery,V=n(T,["facetName","facetQuery"]);return at(C)(E.indexName,{methods:{searchForFacetValues:ce}}).searchForFacetValues(L,M,r(r({},N),V))}))}},G=function(C){return function(F,N,E){return C.transporter.read({method:J,path:d("1/answers/%s/prediction",C.indexName),data:{query:F,queryLanguages:N},cacheable:!0},E)}},fe=function(C){return function(F,N){return C.transporter.read({method:J,path:d("1/indexes/%s/query",C.indexName),data:{query:F},cacheable:!0},N)}},ce=function(C){return function(F,N,E){return C.transporter.read({method:J,path:d("1/indexes/%s/facets/%s/query",C.indexName,F),data:{facetQuery:N},cacheable:!0},E)}},Pe=1,ot=2,zt=3;function pt(C,F,N){var E,T={appId:C,apiKey:F,timeouts:{connect:1,read:2,write:30},requester:{send:function(L){return new Promise(function(M){var V=new XMLHttpRequest;V.open(L.method,L.url,!0),Object.keys(L.headers).forEach(function(Oe){return V.setRequestHeader(Oe,L.headers[Oe])});var ae,ge=function(Oe,Ee){return setTimeout(function(){V.abort(),M({status:0,content:Ee,isTimedOut:!0})},1e3*Oe)},ne=ge(L.connectTimeout,"Connection timeout");V.onreadystatechange=function(){V.readyState>V.OPENED&&ae===void 0&&(clearTimeout(ne),ae=ge(L.responseTimeout,"Socket timeout"))},V.onerror=function(){V.status===0&&(clearTimeout(ne),clearTimeout(ae),M({content:V.responseText||"Network request failed",status:V.status,isTimedOut:!1}))},V.onload=function(){clearTimeout(ne),clearTimeout(ae),M({content:V.responseText,status:V.status,isTimedOut:!1})},V.send(L.data)})}},logger:(E=zt,{debug:function(L,M){return Pe>=E&&console.debug(L,M),Promise.resolve()},info:function(L,M){return ot>=E&&console.info(L,M),Promise.resolve()},error:function(L,M){return console.error(L,M),Promise.resolve()}}),responsesCache:l(),requestsCache:l({serializable:!1}),hostsCache:s({caches:[o({key:"".concat("4.22.1","-").concat(C)}),l()]}),userAgent:Y("4.22.1").add({segment:"Browser",version:"lite"}),authMode:h.WithinQueryParameters};return Ke(r(r(r({},T),N),{},{methods:{search:bt,searchForFacetValues:ee,multipleQueries:bt,multipleSearchForFacetValues:ee,customRequest:it,initIndex:function(L){return function(M){return at(L)(M,{methods:{search:fe,searchForFacetValues:ce,findAnswers:G}})}}}}))}return pt.version="4.22.1",pt})});var Hi=re((zI,mu)=>{"use strict";f();m();p();function De(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}mu.exports=De;De.prototype._events=void 0;De.prototype._maxListeners=void 0;De.defaultMaxListeners=10;De.prototype.setMaxListeners=function(e){if(!Nm(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this};De.prototype.emit=function(e){var t,r,n,i,a,o;if(this._events||(this._events={}),e==="error"&&(!this._events.error||En(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(r=this._events[e],pu(r))return!1;if(Bt(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(En(r))for(i=Array.prototype.slice.call(arguments,1),o=r.slice(),n=o.length,a=0;a<n;a++)o[a].apply(this,i);return!0};De.prototype.addListener=function(e,t){var r;if(!Bt(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Bt(t.listener)?t.listener:t),this._events[e]?En(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,En(this._events[e])&&!this._events[e].warned&&(pu(this._maxListeners)?r=De.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),typeof console.trace=="function"&&console.trace())),this};De.prototype.on=De.prototype.addListener;De.prototype.once=function(e,t){if(!Bt(t))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}return n.listener=t,this.on(e,n),this};De.prototype.removeListener=function(e,t){var r,n,i,a;if(!Bt(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,n=-1,r===t||Bt(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(En(r)){for(a=i;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){n=a;break}if(n<0)return this;r.length===1?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this};De.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[e]&&delete this._events[e],this;if(arguments.length===0){for(t in this._events)t!=="removeListener"&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],Bt(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this};De.prototype.listeners=function(e){var t;return!this._events||!this._events[e]?t=[]:Bt(this._events[e])?t=[this._events[e]]:t=this._events[e].slice(),t};De.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(Bt(t))return 1;if(t)return t.length}return 0};De.listenerCount=function(e,t){return e.listenerCount(t)};function Bt(e){return typeof e=="function"}function Nm(e){return typeof e=="number"}function En(e){return typeof e=="object"&&e!==null}function pu(e){return e===void 0}});var ro=re((eC,hu)=>{"use strict";f();m();p();function Em(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}hu.exports=Em});var vu=re((iC,gu)=>{"use strict";f();m();p();var Am=Hi(),Pm=ro();function Ji(e,t){this.main=e,this.fn=t,this.lastResults=null}Pm(Ji,Am);Ji.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)};Ji.prototype.getModifiedState=function(e){return this.fn(e)};gu.exports=Ji});var Xi=re((cC,yu)=>{"use strict";f();m();p();function Om(e){return typeof e!="string"?e:String(e).replace(/^-/,"\\-")}function Wm(e){return typeof e!="string"?e:e.replace(/^\\-/,"-")}yu.exports={escapeFacetValue:Om,unescapeFacetValue:Wm}});var An=re((fC,bu)=>{"use strict";f();m();p();function Tm(e){return typeof e=="object"&&e!==null?no(Array.isArray(e)?[]:{},e):e}function Yi(e){return typeof e=="function"||Array.isArray(e)||Object.prototype.toString.call(e)==="[object Object]"}function no(e,t){if(e===t)return e;for(var r in t)if(!(!Object.prototype.hasOwnProperty.call(t,r)||r==="__proto__"||r==="constructor")){var n=t[r],i=e[r];typeof i<"u"&&typeof n>"u"||(Yi(i)&&Yi(n)?e[r]=no(i,n):e[r]=Tm(n))}return e}function km(e){Yi(e)||(e={});for(var t=1,r=arguments.length;t<r;t++){var n=arguments[t];Yi(n)&&no(e,n)}return e}bu.exports=km});var zi=re((gC,Su)=>{"use strict";f();m();p();function Um(e){return e&&Object.keys(e).length>0}Su.exports=Um});var qi=re((SC,xu)=>{"use strict";f();m();p();function Zm(e,t){if(e===null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}xu.exports=Zm});var wu=re((IC,Ru)=>{"use strict";f();m();p();var io=An();function ao(e){return Object.keys(e).sort().reduce(function(t,r){return t[r]=e[r],t},{})}var rt={_getQueries:function(t,r){var n=[];return n.push({indexName:t,params:rt._getHitsSearchParams(r)}),r.getRefinedDisjunctiveFacets().forEach(function(i){n.push({indexName:t,params:rt._getDisjunctiveFacetSearchParams(r,i)})}),r.getRefinedHierarchicalFacets().forEach(function(i){var a=r.getHierarchicalFacetByName(i),o=r.getHierarchicalRefinement(i),s=r._getHierarchicalFacetSeparator(a);if(o.length>0&&o[0].split(s).length>1){var l=o[0].split(s).slice(0,-1).reduce(function(u,d,h){return u.concat({attribute:a.attributes[h],value:h===0?d:[u[u.length-1].value,d].join(s)})},[]);l.forEach(function(c,u){var d=rt._getDisjunctiveFacetSearchParams(r,c.attribute,u===0);function h(y){return a.attributes.some(function(I){return I===y.split(":")[0]})}var g=(d.facetFilters||[]).reduce(function(y,I){if(Array.isArray(I)){var w=I.filter(function(W){return!h(W)});w.length>0&&y.push(w)}return typeof I=="string"&&!h(I)&&y.push(I),y},[]),v=l[u-1];u>0?d.facetFilters=g.concat(v.attribute+":"+v.value):d.facetFilters=g.length>0?g:void 0,n.push({indexName:t,params:d})})}}),n},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(rt._getHitsHierarchicalFacetsAttributes(e)).sort(),r=rt._getFacetFilters(e),n=rt._getNumericFilters(e),i=rt._getTagFilters(e),a={facets:t.indexOf("*")>-1?["*"]:t,tagFilters:i};return r.length>0&&(a.facetFilters=r),n.length>0&&(a.numericFilters=n),ao(io({},e.getQueryParams(),a))},_getDisjunctiveFacetSearchParams:function(e,t,r){var n=rt._getFacetFilters(e,t,r),i=rt._getNumericFilters(e,t),a=rt._getTagFilters(e),o={hitsPerPage:0,page:0,analytics:!1,clickAnalytics:!1};a.length>0&&(o.tagFilters=a);var s=e.getHierarchicalFacetByName(t);return s?o.facets=rt._getDisjunctiveHierarchicalFacetAttribute(e,s,r):o.facets=t,i.length>0&&(o.numericFilters=i),n.length>0&&(o.facetFilters=n),ao(io({},e.getQueryParams(),o))},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var r=[];return Object.keys(e.numericRefinements).forEach(function(n){var i=e.numericRefinements[n]||{};Object.keys(i).forEach(function(a){var o=i[a]||[];t!==n&&o.forEach(function(s){if(Array.isArray(s)){var l=s.map(function(c){return n+a+c});r.push(l)}else r.push(n+a+s)})})}),r},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,r){var n=[],i=e.facetsRefinements||{};Object.keys(i).sort().forEach(function(l){var c=i[l]||[];c.slice().sort().forEach(function(u){n.push(l+":"+u)})});var a=e.facetsExcludes||{};Object.keys(a).sort().forEach(function(l){var c=a[l]||[];c.sort().forEach(function(u){n.push(l+":-"+u)})});var o=e.disjunctiveFacetsRefinements||{};Object.keys(o).sort().forEach(function(l){var c=o[l]||[];if(!(l===t||!c||c.length===0)){var u=[];c.slice().sort().forEach(function(d){u.push(l+":"+d)}),n.push(u)}});var s=e.hierarchicalFacetsRefinements||{};return Object.keys(s).sort().forEach(function(l){var c=s[l]||[],u=c[0];if(u!==void 0){var d=e.getHierarchicalFacetByName(l),h=e._getHierarchicalFacetSeparator(d),g=e._getHierarchicalRootPath(d),v,y;if(t===l){if(u.indexOf(h)===-1||!g&&r===!0||g&&g.split(h).length===u.split(h).length)return;g?(y=g.split(h).length-1,u=g):(y=u.split(h).length-2,u=u.slice(0,u.lastIndexOf(h))),v=d.attributes[y]}else y=u.split(h).length-1,v=d.attributes[y];v&&n.push([v+":"+u])}}),n},_getHitsHierarchicalFacetsAttributes:function(e){var t=[];return e.hierarchicalFacets.reduce(function(n,i){var a=e.getHierarchicalRefinement(i.name)[0];if(!a)return n.push(i.attributes[0]),n;var o=e._getHierarchicalFacetSeparator(i),s=a.split(o).length,l=i.attributes.slice(0,s+1);return n.concat(l)},t)},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,r){var n=e._getHierarchicalFacetSeparator(t);if(r===!0){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(n).length),[t.attributes[a]]}var o=e.getHierarchicalRefinement(t.name)[0]||"",s=o.split(n).length-1;return t.attributes.slice(0,s+1)},getSearchForFacetQuery:function(e,t,r,n){var i=n.isDisjunctiveFacet(e)?n.clearRefinements(e):n,a={facetQuery:t,facetName:e};return typeof r=="number"&&(a.maxFacetHits=r),ao(io({},rt._getHitsSearchParams(i),a))}};Ru.exports=rt});var $i=re((EC,Iu)=>{"use strict";f();m();p();Iu.exports=function(){var t=Array.prototype.slice.call(arguments);return t.reduceRight(function(r,n){return Object.keys(Object(n)).forEach(function(i){n[i]!==void 0&&(r[i]!==void 0&&delete r[i],r[i]=n[i])}),r},{})}});var Pn=re((WC,Cu)=>{"use strict";f();m();p();Cu.exports=function(t,r){if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(r(t[n]))return t[n]}}});var Nu=re((ZC,Fu)=>{"use strict";f();m();p();function Vm(e,t){return e.filter(function(r,n){return t.indexOf(r)>-1&&e.indexOf(r)===n})}Fu.exports=Vm});var Pu=re((_C,Au)=>{"use strict";f();m();p();function Eu(e){if(typeof e=="number")return e;if(typeof e=="string")return parseFloat(e);if(Array.isArray(e))return e.map(Eu);throw new Error("The value should be a number, a parsable string or an array of those.")}Au.exports=Eu});var Wu=re((QC,Ou)=>{"use strict";f();m();p();Ou.exports=function(t){return t===null?!1:/^[a-zA-Z0-9_-]{1,64}$/.test(t)}});var ku=re((XC,Tu)=>{"use strict";f();m();p();var jm=$i(),Lm=zi(),_m=qi(),xr={addRefinement:function(t,r,n){if(xr.isRefined(t,r,n))return t;var i=""+n,a=t[r]?t[r].concat(i):[i],o={};return o[r]=a,jm({},o,t)},removeRefinement:function(t,r,n){if(n===void 0)return xr.clearRefinement(t,function(a,o){return r===o});var i=""+n;return xr.clearRefinement(t,function(a,o){return r===o&&i===a})},toggleRefinement:function(t,r,n){if(n===void 0)throw new Error("toggleRefinement should be used with a value");return xr.isRefined(t,r,n)?xr.removeRefinement(t,r,n):xr.addRefinement(t,r,n)},clearRefinement:function(t,r,n){if(r===void 0)return Lm(t)?{}:t;if(typeof r=="string")return _m(t,[r]);if(typeof r=="function"){var i=!1,a=Object.keys(t).reduce(function(o,s){var l=t[s]||[],c=l.filter(function(u){return!r(u,s,n)});return c.length!==l.length&&(i=!0),o[s]=c,o},{});return i?a:t}},isRefined:function(t,r,n){var i=!!t[r]&&t[r].length>0;if(n===void 0||!i)return i;var a=""+n;return t[r].indexOf(a)!==-1}};Tu.exports=xr});var fo=re(($C,ju)=>{"use strict";f();m();p();var oo=$i(),Vu=Pn(),Uu=Nu(),co=An(),lo=zi(),Zu=qi(),so=Pu(),Gm=Wu(),Fe=ku();function uo(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(r,n){return uo(t[n],r)}):e===t}function Dm(e,t){return Vu(e,function(r){return uo(r,t)})}function ze(e){var t=e?ze._parseNumbers(e):{};t.userToken!==void 0&&!Gm(t.userToken)&&console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=t.facets||[],this.disjunctiveFacets=t.disjunctiveFacets||[],this.hierarchicalFacets=t.hierarchicalFacets||[],this.facetsRefinements=t.facetsRefinements||{},this.facetsExcludes=t.facetsExcludes||{},this.disjunctiveFacetsRefinements=t.disjunctiveFacetsRefinements||{},this.numericRefinements=t.numericRefinements||{},this.tagRefinements=t.tagRefinements||[],this.hierarchicalFacetsRefinements=t.hierarchicalFacetsRefinements||{};var r=this;Object.keys(t).forEach(function(n){var i=ze.PARAMETERS.indexOf(n)!==-1,a=t[n]!==void 0;!i&&a&&(r[n]=t[n])})}ze.PARAMETERS=Object.keys(new ze);ze._parseNumbers=function(e){if(e instanceof ze)return e;var t={},r=["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"];if(r.forEach(function(i){var a=e[i];if(typeof a=="string"){var o=parseFloat(a);t[i]=isNaN(o)?a:o}}),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map(function(i){return Array.isArray(i)?i.map(function(a){return parseFloat(a)}):i})),e.numericRefinements){var n={};Object.keys(e.numericRefinements).forEach(function(i){var a=e.numericRefinements[i]||{};n[i]={},Object.keys(a).forEach(function(o){var s=a[o],l=s.map(function(c){return Array.isArray(c)?c.map(function(u){return typeof u=="string"?parseFloat(u):u}):typeof c=="string"?parseFloat(c):c});n[i][o]=l})}),t.numericRefinements=n}return co(e,t)};ze.make=function(t){var r=new ze(t),n=t.hierarchicalFacets||[];return n.forEach(function(i){if(i.rootPath){var a=r.getHierarchicalRefinement(i.name);a.length>0&&a[0].indexOf(i.rootPath)!==0&&(r=r.clearRefinements(i.name)),a=r.getHierarchicalRefinement(i.name),a.length===0&&(r=r.toggleHierarchicalFacetRefinement(i.name,i.rootPath))}}),r};ze.validate=function(e,t){var r=t||{};return e.tagFilters&&r.tagRefinements&&r.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&r.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&r.numericRefinements&&lo(r.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):lo(e.numericRefinements)&&r.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null};ze.prototype={constructor:ze,clearRefinements:function(t){var r={numericRefinements:this._clearNumericRefinements(t),facetsRefinements:Fe.clearRefinement(this.facetsRefinements,t,"conjunctiveFacet"),facetsExcludes:Fe.clearRefinement(this.facetsExcludes,t,"exclude"),disjunctiveFacetsRefinements:Fe.clearRefinement(this.disjunctiveFacetsRefinements,t,"disjunctiveFacet"),hierarchicalFacetsRefinements:Fe.clearRefinement(this.hierarchicalFacetsRefinements,t,"hierarchicalFacet")};return r.numericRefinements===this.numericRefinements&&r.facetsRefinements===this.facetsRefinements&&r.facetsExcludes===this.facetsExcludes&&r.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&r.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(r)},clearTags:function(){return this.tagFilters===void 0&&this.tagRefinements.length===0?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(t){return t===this.index?this:this.setQueryParameters({index:t})},setQuery:function(t){return t===this.query?this:this.setQueryParameters({query:t})},setPage:function(t){return t===this.page?this:this.setQueryParameters({page:t})},setFacets:function(t){return this.setQueryParameters({facets:t})},setDisjunctiveFacets:function(t){return this.setQueryParameters({disjunctiveFacets:t})},setHitsPerPage:function(t){return this.hitsPerPage===t?this:this.setQueryParameters({hitsPerPage:t})},setTypoTolerance:function(t){return this.typoTolerance===t?this:this.setQueryParameters({typoTolerance:t})},addNumericRefinement:function(e,t,r){var n=so(r);if(this.isNumericRefined(e,t,n))return this;var i=co({},this.numericRefinements);return i[e]=co({},i[e]),i[e][t]?(i[e][t]=i[e][t].slice(),i[e][t].push(n)):i[e][t]=[n],this.setQueryParameters({numericRefinements:i})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsRefinements[e]||[]:[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)?this.disjunctiveFacetsRefinements[e]||[]:[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)?this.facetsExcludes[e]||[]:[]},removeNumericRefinement:function(e,t,r){var n=r;return n!==void 0?this.isNumericRefined(e,t,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,a){return a===e&&i.op===t&&uo(i.val,so(n))})}):this:t!==void 0?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,a){return a===e&&i.op===t})}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(i,a){return a===e})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(t){if(t===void 0)return lo(this.numericRefinements)?{}:this.numericRefinements;if(typeof t=="string")return Zu(this.numericRefinements,[t]);if(typeof t=="function"){var r=!1,n=this.numericRefinements,i=Object.keys(n).reduce(function(a,o){var s=n[o],l={};return s=s||{},Object.keys(s).forEach(function(c){var u=s[c]||[],d=[];u.forEach(function(h){var g=t({val:h,op:c},o,"numeric");g||d.push(h)}),d.length!==u.length&&(r=!0),l[c]=d}),a[o]=l,a},{});return r?i:this.numericRefinements}},addFacet:function(t){return this.isConjunctiveFacet(t)?this:this.setQueryParameters({facets:this.facets.concat([t])})},addDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([t])})},addHierarchicalFacet:function(t){if(this.isHierarchicalFacet(t.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+t.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([t])})},addFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return Fe.isRefined(this.facetsRefinements,t,r)?this:this.setQueryParameters({facetsRefinements:Fe.addRefinement(this.facetsRefinements,t,r)})},addExcludeRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return Fe.isRefined(this.facetsExcludes,t,r)?this:this.setQueryParameters({facetsExcludes:Fe.addRefinement(this.facetsExcludes,t,r)})},addDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return Fe.isRefined(this.disjunctiveFacetsRefinements,t,r)?this:this.setQueryParameters({disjunctiveFacetsRefinements:Fe.addRefinement(this.disjunctiveFacetsRefinements,t,r)})},addTagRefinement:function(t){if(this.isTagRefined(t))return this;var r={tagRefinements:this.tagRefinements.concat(t)};return this.setQueryParameters(r)},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(r){return r!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(r){return r!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(r){return r.name!==t})}):this},removeFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return Fe.isRefined(this.facetsRefinements,t,r)?this.setQueryParameters({facetsRefinements:Fe.removeRefinement(this.facetsRefinements,t,r)}):this},removeExcludeRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return Fe.isRefined(this.facetsExcludes,t,r)?this.setQueryParameters({facetsExcludes:Fe.removeRefinement(this.facetsExcludes,t,r)}):this},removeDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return Fe.isRefined(this.disjunctiveFacetsRefinements,t,r)?this.setQueryParameters({disjunctiveFacetsRefinements:Fe.removeRefinement(this.disjunctiveFacetsRefinements,t,r)}):this},removeTagRefinement:function(t){if(!this.isTagRefined(t))return this;var r={tagRefinements:this.tagRefinements.filter(function(n){return n!==t})};return this.setQueryParameters(r)},toggleRefinement:function(t,r){return this.toggleFacetRefinement(t,r)},toggleFacetRefinement:function(t,r){if(this.isHierarchicalFacet(t))return this.toggleHierarchicalFacetRefinement(t,r);if(this.isConjunctiveFacet(t))return this.toggleConjunctiveFacetRefinement(t,r);if(this.isDisjunctiveFacet(t))return this.toggleDisjunctiveFacetRefinement(t,r);throw new Error("Cannot refine the undeclared facet "+t+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:Fe.toggleRefinement(this.facetsRefinements,t,r)})},toggleExcludeFacetRefinement:function(t,r){if(!this.isConjunctiveFacet(t))throw new Error(t+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:Fe.toggleRefinement(this.facetsExcludes,t,r)})},toggleDisjunctiveFacetRefinement:function(t,r){if(!this.isDisjunctiveFacet(t))throw new Error(t+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:Fe.toggleRefinement(this.disjunctiveFacetsRefinements,t,r)})},toggleHierarchicalFacetRefinement:function(t,r){if(!this.isHierarchicalFacet(t))throw new Error(t+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(t)),i={},a=this.hierarchicalFacetsRefinements[t]!==void 0&&this.hierarchicalFacetsRefinements[t].length>0&&(this.hierarchicalFacetsRefinements[t][0]===r||this.hierarchicalFacetsRefinements[t][0].indexOf(r+n)===0);return a?r.indexOf(n)===-1?i[t]=[]:i[t]=[r.slice(0,r.lastIndexOf(n))]:i[t]=[r],this.setQueryParameters({hierarchicalFacetsRefinements:oo({},i,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var r={};return r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:oo({},r,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:oo({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(t){return this.isTagRefined(t)?this.removeTagRefinement(t):this.addTagRefinement(t)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return this.getHierarchicalFacetByName(e)!==void 0},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(t,r){return this.isConjunctiveFacet(t)?Fe.isRefined(this.facetsRefinements,t,r):!1},isExcludeRefined:function(t,r){return this.isConjunctiveFacet(t)?Fe.isRefined(this.facetsExcludes,t,r):!1},isDisjunctiveFacetRefined:function(t,r){return this.isDisjunctiveFacet(t)?Fe.isRefined(this.disjunctiveFacetsRefinements,t,r):!1},isHierarchicalFacetRefined:function(t,r){if(!this.isHierarchicalFacet(t))return!1;var n=this.getHierarchicalRefinement(t);return r?n.indexOf(r)!==-1:n.length>0},isNumericRefined:function(t,r,n){if(n===void 0&&r===void 0)return!!this.numericRefinements[t];var i=this.numericRefinements[t]&&this.numericRefinements[t][r]!==void 0;if(n===void 0||!i)return i;var a=so(n),o=Dm(this.numericRefinements[t][r],a)!==void 0;return i&&o},isTagRefined:function(t){return this.tagRefinements.indexOf(t)!==-1},getRefinedDisjunctiveFacets:function(){var t=this,r=Uu(Object.keys(this.numericRefinements).filter(function(n){return Object.keys(t.numericRefinements[n]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(n){return t.disjunctiveFacetsRefinements[n].length>0}).concat(r).concat(this.getRefinedHierarchicalFacets()).sort()},getRefinedHierarchicalFacets:function(){var t=this;return Uu(this.hierarchicalFacets.map(function(r){return r.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(r){return t.hierarchicalFacetsRefinements[r].length>0})).sort()},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(t){return e.indexOf(t)===-1})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","hierarchicalFacets","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements"],getQueryParams:function(){var t=this.managedParameters,r={},n=this;return Object.keys(this).forEach(function(i){var a=n[i];t.indexOf(i)===-1&&a!==void 0&&(r[i]=a)}),r},setQueryParameter:function(t,r){if(this[t]===r)return this;var n={};return n[t]=r,this.setQueryParameters(n)},setQueryParameters:function(t){if(!t)return this;var r=ze.validate(this,t);if(r)throw r;var n=this,i=ze._parseNumbers(t),a=Object.keys(this).reduce(function(s,l){return s[l]=n[l],s},{}),o=Object.keys(i).reduce(function(s,l){var c=s[l]!==void 0,u=i[l]!==void 0;return c&&!u?Zu(s,[l]):(u&&(s[l]=i[l]),s)},a);return new this.constructor(o)},resetPage:function(){return this.page===void 0?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return typeof e.showParentLevel=="boolean"?e.showParentLevel:!0},getHierarchicalFacetByName:function(e){return Vu(this.hierarchicalFacets,function(t){return t.name===e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var r=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),n=t.split(r);return n.map(function(i){return i.trim()})},toString:function(){return JSON.stringify(this,null,2)}};ju.exports=ze});var _u=re((rF,Lu)=>{"use strict";f();m();p();Lu.exports=function(t){return Array.isArray(t)?t.filter(Boolean):[]}});var Du=re((oF,Gu)=>{"use strict";f();m();p();Gu.exports=function(t,r){if(!Array.isArray(t))return-1;for(var n=0;n<t.length;n++)if(r(t[n]))return n;return-1}});var po=re((uF,Bu)=>{"use strict";f();m();p();var Bm=Pn();Bu.exports=function(t,r){var n=(r||[]).map(function(i){return i.split(":")});return t.reduce(function(a,o){var s=o.split(":"),l=Bm(n,function(c){return c[0]===s[0]});return s.length>1||!l?(a[0].push(s[0]),a[1].push(s[1]),a):(a[0].push(l[0]),a[1].push(l[1]),a)},[[],[]])}});var mo=re((mF,Qu)=>{"use strict";f();m();p();function Qm(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=t!==void 0,a=t===null;if(!a&&e>t||n&&i||!r)return 1;if(!n&&e<t||a&&r||!i)return-1}return 0}function Mm(e,t,r){if(!Array.isArray(e))return[];Array.isArray(r)||(r=[]);var n=e.map(function(i,a){return{criteria:t.map(function(o){return i[o]}),index:a,value:i}});return n.sort(function(a,o){for(var s=-1;++s<a.criteria.length;){var l=Qm(a.criteria[s],o.criteria[s]);if(l)return s>=r.length?l:r[s]==="desc"?-l:l}return a.index-o.index}),n.map(function(i){return i.value})}Qu.exports=Mm});var Ju=re((yF,Hu)=>{"use strict";f();m();p();Hu.exports=qm;var Mu=Xi(),Hm=Pn(),Jm=po(),Xm=mo(),Ym=Mu.escapeFacetValue,zm=Mu.unescapeFacetValue;function qm(e){return function(r,n){var i=e.hierarchicalFacets[n],a=e.hierarchicalFacetsRefinements[i.name]&&e.hierarchicalFacetsRefinements[i.name][0]||"",o=e._getHierarchicalFacetSeparator(i),s=e._getHierarchicalRootPath(i),l=e._getHierarchicalShowParentLevel(i),c=Jm(e._getHierarchicalFacetSortBy(i)),u=r.every(function(g){return g.exhaustive}),d=$m(c,o,s,l,a),h=r;return s&&(h=r.slice(s.split(o).length)),h.reduce(d,{name:e.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,escapedValue:null,exhaustive:u,data:null})}}function $m(e,t,r,n,i){return function(o,s,l){var c=o;if(l>0){var u=0;for(c=o;u<l;){var d=c&&Array.isArray(c.data)?c.data:[];c=Hm(d,function(g){return g.isRefined}),u++}}if(c){var h=Object.keys(s.data).map(function(g){return[g,s.data[g]]}).filter(function(g){var v=g[0];return Km(v,c.path||r,i,t,r,n)});c.data=Xm(h.map(function(g){var v=g[0],y=g[1];return eh(y,v,t,zm(i),s.exhaustive)}),e[0],e[1])}return o}}function Km(e,t,r,n,i,a){return i&&(e.indexOf(i)!==0||i===e)?!1:!i&&e.indexOf(n)===-1||i&&e.split(n).length-i.split(n).length===1||e.indexOf(n)===-1&&r.indexOf(n)===-1||r.indexOf(e)===0||e.indexOf(t+n)===0&&(a||e.indexOf(r)===0)}function eh(e,t,r,n,i){var a=t.split(r);return{name:a[a.length-1].trim(),path:t,escapedValue:Ym(t),count:e,isRefined:n===t||n.indexOf(t+r)===0,exhaustive:i,data:null}}});var yo=re((RF,nd)=>{"use strict";f();m();p();var ho=_u(),Ki=$i(),$u=Xi(),ht=Pn(),On=Du(),th=po(),Xu=An(),Ku=mo(),Yu=$u.escapeFacetValue,ed=$u.unescapeFacetValue,rh=Ju();function zu(e){var t={};return e.forEach(function(r,n){t[r]=n}),t}function go(e,t,r){t&&t[r]&&(e.stats=t[r])}function nh(e,t){return ht(e,function(n){var i=n.attributes||[];return i.indexOf(t)>-1})}function rr(e,t,r){var n=t[0];this._rawResults=t;var i=this;Object.keys(n).forEach(function(d){i[d]=n[d]});var a=Xu({persistHierarchicalRootCount:!1},r);Object.keys(a).forEach(function(d){i[d]=a[d]}),this.processingTimeMS=t.reduce(function(d,h){return h.processingTimeMS===void 0?d:d+h.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map(function(){return[]}),this.facets=[];var o=e.getRefinedDisjunctiveFacets(),s=zu(e.facets),l=zu(e.disjunctiveFacets),c=1,u=n.facets||{};Object.keys(u).forEach(function(d){var h=u[d],g=nh(e.hierarchicalFacets,d);if(g){var v=g.attributes.indexOf(d),y=On(e.hierarchicalFacets,function(O){return O.name===g.name});i.hierarchicalFacets[y][v]={attribute:d,data:h,exhaustive:n.exhaustiveFacetsCount}}else{var I=e.disjunctiveFacets.indexOf(d)!==-1,w=e.facets.indexOf(d)!==-1,W;I&&(W=l[d],i.disjunctiveFacets[W]={name:d,data:h,exhaustive:n.exhaustiveFacetsCount},go(i.disjunctiveFacets[W],n.facets_stats,d)),w&&(W=s[d],i.facets[W]={name:d,data:h,exhaustive:n.exhaustiveFacetsCount},go(i.facets[W],n.facets_stats,d))}}),this.hierarchicalFacets=ho(this.hierarchicalFacets),o.forEach(function(d){var h=t[c],g=h&&h.facets?h.facets:{},v=e.getHierarchicalFacetByName(d);Object.keys(g).forEach(function(y){var I=g[y],w;if(v){w=On(e.hierarchicalFacets,function(B){return B.name===v.name});var W=On(i.hierarchicalFacets[w],function(B){return B.attribute===y});if(W===-1)return;i.hierarchicalFacets[w][W].data=Xu({},i.hierarchicalFacets[w][W].data,I)}else{w=l[y];var O=n.facets&&n.facets[y]||{};i.disjunctiveFacets[w]={name:y,data:Ki({},I,O),exhaustive:h.exhaustiveFacetsCount},go(i.disjunctiveFacets[w],h.facets_stats,y),e.disjunctiveFacetsRefinements[y]&&e.disjunctiveFacetsRefinements[y].forEach(function(B){!i.disjunctiveFacets[w].data[B]&&e.disjunctiveFacetsRefinements[y].indexOf(ed(B))>-1&&(i.disjunctiveFacets[w].data[B]=0)})}}),c++}),e.getRefinedHierarchicalFacets().forEach(function(d){var h=e.getHierarchicalFacetByName(d),g=e._getHierarchicalFacetSeparator(h),v=e.getHierarchicalRefinement(d);v.length===0||v[0].split(g).length<2||t.slice(c).forEach(function(y){var I=y&&y.facets?y.facets:{};Object.keys(I).forEach(function(w){var W=I[w],O=On(e.hierarchicalFacets,function(Q){return Q.name===h.name}),B=On(i.hierarchicalFacets[O],function(Q){return Q.attribute===w});if(B!==-1){var J={};if(v.length>0&&!i.persistHierarchicalRootCount){var $=v[0].split(g)[0];J[$]=i.hierarchicalFacets[O][B].data[$]}i.hierarchicalFacets[O][B].data=Ki(J,W,i.hierarchicalFacets[O][B].data)}}),c++})}),Object.keys(e.facetsExcludes).forEach(function(d){var h=e.facetsExcludes[d],g=s[d];i.facets[g]={name:d,data:u[d],exhaustive:n.exhaustiveFacetsCount},h.forEach(function(v){i.facets[g]=i.facets[g]||{name:d},i.facets[g].data=i.facets[g].data||{},i.facets[g].data[v]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(rh(e)),this.facets=ho(this.facets),this.disjunctiveFacets=ho(this.disjunctiveFacets),this._state=e}rr.prototype.getFacetByName=function(e){function t(r){return r.name===e}return ht(this.facets,t)||ht(this.disjunctiveFacets,t)||ht(this.hierarchicalFacets,t)};function ih(e,t){function r(u){return u.name===t}if(e._state.isConjunctiveFacet(t)){var n=ht(e.facets,r);return n?Object.keys(n.data).map(function(u){var d=Yu(u);return{name:u,escapedValue:d,count:n.data[u],isRefined:e._state.isFacetRefined(t,d),isExcluded:e._state.isExcludeRefined(t,u)}}):[]}else if(e._state.isDisjunctiveFacet(t)){var i=ht(e.disjunctiveFacets,r);return i?Object.keys(i.data).map(function(u){var d=Yu(u);return{name:u,escapedValue:d,count:i.data[u],isRefined:e._state.isDisjunctiveFacetRefined(t,d)}}):[]}else if(e._state.isHierarchicalFacet(t)){var a=ht(e.hierarchicalFacets,r);if(!a)return a;var o=e._state.getHierarchicalFacetByName(t),s=e._state._getHierarchicalFacetSeparator(o),l=ed(e._state.getHierarchicalRefinement(t)[0]||"");l.indexOf(o.rootPath)===0&&(l=l.replace(o.rootPath+s,""));var c=l.split(s);return c.unshift(t),td(a,c,0),a}}function td(e,t,r){e.isRefined=e.name===t[r],e.data&&e.data.forEach(function(n){td(n,t,r+1)})}function rd(e,t,r,n){if(n=n||0,Array.isArray(t))return e(t,r[n]);if(!t.data||t.data.length===0)return t;var i=t.data.map(function(s){return rd(e,s,r,n+1)}),a=e(i,r[n]),o=Ki({data:a},t);return o}rr.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"];function ah(e,t){return t.sort(e)}function oh(e,t){var r=[],n=[],i=t.order||[],a=i.reduce(function(l,c,u){return l[c]=u,l},{});e.forEach(function(l){var c=l.path||l.name;a[c]!==void 0?r[a[c]]=l:n.push(l)}),r=r.filter(function(l){return l});var o=t.sortRemainingBy,s;return o==="hidden"?r:(o==="alpha"?s=[["path","name"],["asc","asc"]]:s=[["count"],["desc"]],r.concat(Ku(n,s[0],s[1])))}function sh(e,t){return e.renderingContent&&e.renderingContent.facetOrdering&&e.renderingContent.facetOrdering.values&&e.renderingContent.facetOrdering.values[t]}rr.prototype.getFacetValues=function(e,t){var r=ih(this,e);if(r){var n=Ki({},t,{sortBy:rr.DEFAULT_SORT,facetOrdering:!(t&&t.sortBy)}),i=this,a;if(Array.isArray(r))a=[e];else{var o=i._state.getHierarchicalFacetByName(r.name);a=o.attributes}return rd(function(s,l){if(n.facetOrdering){var c=sh(i,l);if(c)return oh(s,c)}if(Array.isArray(n.sortBy)){var u=th(n.sortBy,rr.DEFAULT_SORT);return Ku(s,u[0],u[1])}else if(typeof n.sortBy=="function")return ah(n.sortBy,s);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")},r,a)}};rr.prototype.getFacetStats=function(e){if(this._state.isConjunctiveFacet(e))return qu(this.facets,e);if(this._state.isDisjunctiveFacet(e))return qu(this.disjunctiveFacets,e)};function qu(e,t){var r=ht(e,function(n){return n.name===t});return r&&r.stats}rr.prototype.getRefinements=function(){var e=this._state,t=this,r=[];return Object.keys(e.facetsRefinements).forEach(function(n){e.facetsRefinements[n].forEach(function(i){r.push(vo(e,"facet",n,i,t.facets))})}),Object.keys(e.facetsExcludes).forEach(function(n){e.facetsExcludes[n].forEach(function(i){r.push(vo(e,"exclude",n,i,t.facets))})}),Object.keys(e.disjunctiveFacetsRefinements).forEach(function(n){e.disjunctiveFacetsRefinements[n].forEach(function(i){r.push(vo(e,"disjunctive",n,i,t.disjunctiveFacets))})}),Object.keys(e.hierarchicalFacetsRefinements).forEach(function(n){e.hierarchicalFacetsRefinements[n].forEach(function(i){r.push(ch(e,n,i,t.hierarchicalFacets))})}),Object.keys(e.numericRefinements).forEach(function(n){var i=e.numericRefinements[n];Object.keys(i).forEach(function(a){i[a].forEach(function(o){r.push({type:"numeric",attributeName:n,name:o,numericValue:o,operator:a})})})}),e.tagRefinements.forEach(function(n){r.push({type:"tag",attributeName:"_tags",name:n})}),r};function vo(e,t,r,n,i){var a=ht(i,function(l){return l.name===r}),o=a&&a.data&&a.data[n]?a.data[n]:0,s=a&&a.exhaustive||!1;return{type:t,attributeName:r,name:n,count:o,exhaustive:s}}function ch(e,t,r,n){var i=e.getHierarchicalFacetByName(t),a=e._getHierarchicalFacetSeparator(i),o=r.split(a),s=ht(n,function(h){return h.name===t}),l=o.reduce(function(h,g){var v=h&&ht(h.data,function(y){return y.name===g});return v!==void 0?v:h},s),c=l&&l.count||0,u=l&&l.exhaustive||!1,d=l&&l.path||"";return{type:"hierarchical",attributeName:t,name:d,count:c,exhaustive:u}}nd.exports=rr});var bo=re((FF,id)=>{"use strict";f();m();p();id.exports="3.16.2"});var ld=re((PF,cd)=>{"use strict";f();m();p();var lh=Hi(),uh=vu(),dh=Xi().escapeFacetValue,fh=ro(),ph=An(),mh=zi(),hh=qi(),Hr=wu(),xo=fo(),So=yo(),ad=bo();function k(e,t,r,n){typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+ad+")"),this.setClient(e);var i=r||{};i.index=t,this.state=xo.make(i),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0,this._searchResultsOptions=n}fh(k,lh);k.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this};k.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this};k.prototype.getQuery=function(){var e=this.state;return Hr._getHitsSearchParams(e)};k.prototype.searchOnce=function(e,t){var r=e?this.state.setQueryParameters(e):this.state,n=Hr._getQueries(r.index,r),i=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:r}),t){this.client.search(n).then(function(a){i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),t(null,new So(r,a.results),r)}).catch(function(a){i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),t(a,null,r)});return}return this.client.search(n).then(function(a){return i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),{content:new So(r,a.results),state:r,_originalResponse:a}},function(a){throw i._currentNbQueries--,i._currentNbQueries===0&&i.emit("searchQueueEmpty"),a})};k.prototype.findAnswers=function(e){console.warn("[algoliasearch-helper] answers is no longer supported");var t=this.state,r=this.derivedHelpers[0];if(!r)return Promise.resolve([]);var n=r.getModifiedState(t),i=ph({attributesForPrediction:e.attributesForPrediction,nbHits:e.nbHits},{params:hh(Hr._getHitsSearchParams(n),["attributesToSnippet","hitsPerPage","restrictSearchableAttributes","snippetEllipsisText"])}),a="search for answers was called, but this client does not have a function client.initIndex(index).findAnswers";if(typeof this.client.initIndex!="function")throw new Error(a);var o=this.client.initIndex(n.index);if(typeof o.findAnswers!="function")throw new Error(a);return o.findAnswers(n.query,e.queryLanguages,i)};k.prototype.searchForFacetValues=function(e,t,r,n){var i=typeof this.client.searchForFacetValues=="function",a=typeof this.client.initIndex=="function";if(!i&&!a&&typeof this.client.search!="function")throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var o=this.state.setQueryParameters(n||{}),s=o.isDisjunctiveFacet(e),l=Hr.getSearchForFacetQuery(e,t,r,o);this._currentNbQueries++;var c=this,u;return i?u=this.client.searchForFacetValues([{indexName:o.index,params:l}]):a?u=this.client.initIndex(o.index).searchForFacetValues(l):(delete l.facetName,u=this.client.search([{type:"facet",facet:e,indexName:o.index,params:l}]).then(function(h){return h.results[0]})),this.emit("searchForFacetValues",{state:o,facet:e,query:t}),u.then(function(h){return c._currentNbQueries--,c._currentNbQueries===0&&c.emit("searchQueueEmpty"),h=Array.isArray(h)?h[0]:h,h.facetHits.forEach(function(g){g.escapedValue=dh(g.value),g.isRefined=s?o.isDisjunctiveFacetRefined(e,g.escapedValue):o.isFacetRefined(e,g.escapedValue)}),h},function(d){throw c._currentNbQueries--,c._currentNbQueries===0&&c.emit("searchQueueEmpty"),d})};k.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this};k.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this};k.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this};k.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};k.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)};k.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this};k.prototype.addNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,r),isPageReset:!0}),this};k.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this};k.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)};k.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this};k.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)};k.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this};k.prototype.removeNumericRefinement=function(e,t,r){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,r),isPageReset:!0}),this};k.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this};k.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)};k.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this};k.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this};k.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)};k.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this};k.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)};k.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this};k.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this};k.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)};k.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)};k.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this};k.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)};k.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this};k.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)};k.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)};function od(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}k.prototype.setCurrentPage=od;k.prototype.setPage=od;k.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this};k.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this};k.prototype.setState=function(e){return this._change({state:xo.make(e),isPageReset:!1}),this};k.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new xo(e),this};k.prototype.hasRefinements=function(e){return mh(this.state.getNumericRefinements(e))?!0:this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):this.state.isHierarchicalFacet(e)?this.state.isHierarchicalFacetRefined(e):!1};k.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)};k.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)};k.prototype.hasTag=function(e){return this.state.isTagRefined(e)};k.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)};k.prototype.getIndex=function(){return this.state.index};function sd(){return this.state.page}k.prototype.getCurrentPage=sd;k.prototype.getPage=sd;k.prototype.getTags=function(){return this.state.tagRefinements};k.prototype.getRefinements=function(e){var t=[];if(this.state.isConjunctiveFacet(e)){var r=this.state.getConjunctiveRefinements(e);r.forEach(function(o){t.push({value:o,type:"conjunctive"})});var n=this.state.getExcludeRefinements(e);n.forEach(function(o){t.push({value:o,type:"exclude"})})}else if(this.state.isDisjunctiveFacet(e)){var i=this.state.getDisjunctiveRefinements(e);i.forEach(function(o){t.push({value:o,type:"disjunctive"})})}var a=this.state.getNumericRefinements(e);return Object.keys(a).forEach(function(o){var s=a[o];t.push({value:s,operator:o,type:"numeric"})}),t};k.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)};k.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)};k.prototype._search=function(e){var t=this.state,r=[],n=[];e.onlyWithDerivedHelpers||(n=Hr._getQueries(t.index,t),r.push({state:t,queriesCount:n.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var i=this.derivedHelpers.map(function(s){var l=s.getModifiedState(t),c=l.index?Hr._getQueries(l.index,l):[];return r.push({state:l,queriesCount:c.length,helper:s}),s.emit("search",{state:l,results:s.lastResults}),c}),a=Array.prototype.concat.apply(n,i),o=this._queryId++;if(this._currentNbQueries++,!a.length)return Promise.resolve({results:[]}).then(this._dispatchAlgoliaResponse.bind(this,r,o));try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,r,o)).catch(this._dispatchAlgoliaError.bind(this,o))}catch(s){this.emit("error",{error:s})}};k.prototype._dispatchAlgoliaResponse=function(e,t,r){var n=this;if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,this._currentNbQueries===0&&this.emit("searchQueueEmpty");var i=r.results.slice();e.forEach(function(a){var o=a.state,s=a.queriesCount,l=a.helper,c=i.splice(0,s);if(!o.index){l.emit("result",{results:null,state:o});return}l.lastResults=new So(o,c,n._searchResultsOptions),l.emit("result",{results:l.lastResults,state:o})})}};k.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),this._currentNbQueries===0&&this.emit("searchQueueEmpty"))};k.prototype.containsRefinement=function(e,t,r,n){return e||t.length!==0||r.length!==0||n.length!==0};k.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0};k.prototype._change=function(e){var t=e.state,r=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:r}))};k.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this};k.prototype.setClient=function(e){return this.client===e?this:(typeof e.addAlgoliaAgent=="function"&&e.addAlgoliaAgent("JS Helper ("+ad+")"),this.client=e,this)};k.prototype.getClient=function(){return this.client};k.prototype.derive=function(e){var t=new uh(this,e);return this.derivedHelpers.push(t),t};k.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(t===-1)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)};k.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};cd.exports=k});var ea=re((kF,dd)=>{"use strict";f();m();p();var ud=ld(),gh=fo(),vh=yo();function Wn(e,t,r,n){return new ud(e,t,r,n)}Wn.version=bo();Wn.AlgoliaSearchHelper=ud;Wn.SearchParameters=gh;Wn.SearchResults=vh;dd.exports=Wn});var Sa=re((EW,Qf)=>{"use strict";f();m();p();var Av=String.prototype.replace,Pv=/%20/g,Lo={RFC1738:"RFC1738",RFC3986:"RFC3986"};Qf.exports={default:Lo.RFC3986,formatters:{RFC1738:function(e){return Av.call(e,Pv,"+")},RFC3986:function(e){return String(e)}},RFC1738:Lo.RFC1738,RFC3986:Lo.RFC3986}});var Go=re((WW,Hf)=>{"use strict";f();m();p();var Ov=Sa(),_o=Object.prototype.hasOwnProperty,Cr=Array.isArray,Ot=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Wv=function(t){for(;t.length>1;){var r=t.pop(),n=r.obj[r.prop];if(Cr(n)){for(var i=[],a=0;a<n.length;++a)typeof n[a]<"u"&&i.push(n[a]);r.obj[r.prop]=i}}},Mf=function(t,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},Tv=function e(t,r,n){if(!r)return t;if(typeof r!="object"){if(Cr(t))t.push(r);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!_o.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return Cr(t)&&!Cr(r)&&(i=Mf(t,n)),Cr(t)&&Cr(r)?(r.forEach(function(a,o){if(_o.call(t,o)){var s=t[o];s&&typeof s=="object"&&a&&typeof a=="object"?t[o]=e(s,a,n):t.push(a)}else t[o]=a}),t):Object.keys(r).reduce(function(a,o){var s=r[o];return _o.call(a,o)?a[o]=e(a[o],s,n):a[o]=s,a},i)},kv=function(t,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},t)},Uv=function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Zv=function(t,r,n,i,a){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var s="",l=0;l<o.length;++l){var c=o.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||a===Ov.RFC1738&&(c===40||c===41)){s+=o.charAt(l);continue}if(c<128){s=s+Ot[c];continue}if(c<2048){s=s+(Ot[192|c>>6]+Ot[128|c&63]);continue}if(c<55296||c>=57344){s=s+(Ot[224|c>>12]+Ot[128|c>>6&63]+Ot[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|o.charCodeAt(l)&1023),s+=Ot[240|c>>18]+Ot[128|c>>12&63]+Ot[128|c>>6&63]+Ot[128|c&63]}return s},Vv=function(t){for(var r=[{obj:{o:t},prop:"o"}],n=[],i=0;i<r.length;++i)for(var a=r[i],o=a.obj[a.prop],s=Object.keys(o),l=0;l<s.length;++l){var c=s[l],u=o[c];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(r.push({obj:o,prop:c}),n.push(u))}return Wv(r),t},jv=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},Lv=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},_v=function(t,r){return[].concat(t,r)},Gv=function(t,r){if(Cr(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(r(t[i]));return n}return r(t)};Hf.exports={arrayToObject:Mf,assign:kv,combine:_v,compact:Vv,decode:Uv,encode:Zv,isBuffer:Lv,isRegExp:jv,maybeMap:Gv,merge:Tv}});var qf=re((ZW,zf)=>{"use strict";f();m();p();var Do=Go(),Xn=Sa(),Dv=Object.prototype.hasOwnProperty,Jf={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},Fr=Array.isArray,Bv=String.prototype.split,Qv=Array.prototype.push,Yf=function(e,t){Qv.apply(e,Fr(t)?t:[t])},Mv=Date.prototype.toISOString,Xf=Xn.default,Ve={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Do.encode,encodeValuesOnly:!1,format:Xf,formatter:Xn.formatters[Xf],indices:!1,serializeDate:function(t){return Mv.call(t)},skipNulls:!1,strictNullHandling:!1},Hv=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Jv=function e(t,r,n,i,a,o,s,l,c,u,d,h,g,v){var y=t;if(typeof s=="function"?y=s(r,y):y instanceof Date?y=u(y):n==="comma"&&Fr(y)&&(y=Do.maybeMap(y,function(z){return z instanceof Date?u(z):z})),y===null){if(i)return o&&!g?o(r,Ve.encoder,v,"key",d):r;y=""}if(Hv(y)||Do.isBuffer(y)){if(o){var I=g?r:o(r,Ve.encoder,v,"key",d);if(n==="comma"&&g){for(var w=Bv.call(String(y),","),W="",O=0;O<w.length;++O)W+=(O===0?"":",")+h(o(w[O],Ve.encoder,v,"value",d));return[h(I)+"="+W]}return[h(I)+"="+h(o(y,Ve.encoder,v,"value",d))]}return[h(r)+"="+h(String(y))]}var B=[];if(typeof y>"u")return B;var J;if(n==="comma"&&Fr(y))J=[{value:y.length>0?y.join(",")||null:void 0}];else if(Fr(s))J=s;else{var $=Object.keys(y);J=l?$.sort(l):$}for(var Q=0;Q<J.length;++Q){var Y=J[Q],K=typeof Y=="object"&&typeof Y.value<"u"?Y.value:y[Y];if(!(a&&K===null)){var _=Fr(y)?typeof n=="function"?n(r,Y):r:r+(c?"."+Y:"["+Y+"]");Yf(B,e(K,_,n,i,a,o,s,l,c,u,d,h,g,v))}}return B},Xv=function(t){if(!t)return Ve;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||Ve.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Xn.default;if(typeof t.format<"u"){if(!Dv.call(Xn.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=Xn.formatters[n],a=Ve.filter;return(typeof t.filter=="function"||Fr(t.filter))&&(a=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Ve.addQueryPrefix,allowDots:typeof t.allowDots>"u"?Ve.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Ve.charsetSentinel,delimiter:typeof t.delimiter>"u"?Ve.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Ve.encode,encoder:typeof t.encoder=="function"?t.encoder:Ve.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Ve.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Ve.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Ve.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Ve.strictNullHandling}};zf.exports=function(e,t){var r=e,n=Xv(t),i,a;typeof n.filter=="function"?(a=n.filter,r=a("",r)):Fr(n.filter)&&(a=n.filter,i=a);var o=[];if(typeof r!="object"||r===null)return"";var s;t&&t.arrayFormat in Jf?s=t.arrayFormat:t&&"indices"in t?s=t.indices?"indices":"repeat":s="indices";var l=Jf[s];i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var c=0;c<i.length;++c){var u=i[c];n.skipNulls&&r[u]===null||Yf(o,Jv(r[u],u,l,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}var d=o.join(n.delimiter),h=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),d.length>0?h+d:""}});var ep=re((_W,Kf)=>{"use strict";f();m();p();var tn=Go(),Bo=Object.prototype.hasOwnProperty,Yv=Array.isArray,je={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:tn.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},zv=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},$f=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},qv="utf8=%26%2310003%3B",$v="utf8=%E2%9C%93",Kv=function(t,r){var n={},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,a),s=-1,l,c=r.charset;if(r.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===$v?c="utf-8":o[l]===qv&&(c="iso-8859-1"),s=l,l=o.length);for(l=0;l<o.length;++l)if(l!==s){var u=o[l],d=u.indexOf("]="),h=d===-1?u.indexOf("="):d+1,g,v;h===-1?(g=r.decoder(u,je.decoder,c,"key"),v=r.strictNullHandling?null:""):(g=r.decoder(u.slice(0,h),je.decoder,c,"key"),v=tn.maybeMap($f(u.slice(h+1),r),function(y){return r.decoder(y,je.decoder,c,"value")})),v&&r.interpretNumericEntities&&c==="iso-8859-1"&&(v=zv(v)),u.indexOf("[]=")>-1&&(v=Yv(v)?[v]:v),Bo.call(n,g)?n[g]=tn.combine(n[g],v):n[g]=v}return n},ey=function(e,t,r,n){for(var i=n?t:$f(t,r),a=e.length-1;a>=0;--a){var o,s=e[a];if(s==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var l=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,c=parseInt(l,10);!r.parseArrays&&l===""?o={0:i}:!isNaN(c)&&s!==l&&String(c)===l&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(o=[],o[c]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},ty=function(t,r,n,i){if(t){var a=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(a),c=l?a.slice(0,l.index):a,u=[];if(c){if(!n.plainObjects&&Bo.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var d=0;n.depth>0&&(l=s.exec(a))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&Bo.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+a.slice(l.index)+"]"),ey(u,r,n,i)}},ry=function(t){if(!t)return je;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?je.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?je.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:je.allowPrototypes,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:je.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:je.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:je.comma,decoder:typeof t.decoder=="function"?t.decoder:je.decoder,delimiter:typeof t.delimiter=="string"||tn.isRegExp(t.delimiter)?t.delimiter:je.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:je.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:je.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:je.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:je.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:je.strictNullHandling}};Kf.exports=function(e,t){var r=ry(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?Kv(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o){var s=a[o],l=ty(s,n[s],r,typeof e=="string");i=tn.merge(i,l,r)}return tn.compact(i)}});var rp=re((QW,tp)=>{"use strict";f();m();p();var ny=qf(),iy=ep(),ay=Sa();tp.exports={formats:ay,parse:iy,stringify:ny}});var Sp=re(bp=>{"use strict";f();m();p();var nn=q();function Ay(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Py=typeof Object.is=="function"?Object.is:Ay,Oy=nn.useState,Wy=nn.useEffect,Ty=nn.useLayoutEffect,ky=nn.useDebugValue;function Uy(e,t){var r=t(),n=Oy({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return Ty(function(){i.value=r,i.getSnapshot=t,Ko(i)&&a({inst:i})},[e,r,t]),Wy(function(){return Ko(i)&&a({inst:i}),e(function(){Ko(i)&&a({inst:i})})},[e]),ky(r),r}function Ko(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Py(e,r)}catch{return!0}}function Zy(e,t){return t()}var Vy=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Zy:Uy;bp.useSyncExternalStore=nn.useSyncExternalStore!==void 0?nn.useSyncExternalStore:Vy});var Rp=re((Q1,xp)=>{"use strict";f();m();p();xp.exports=Sp()});f();m();p();var ul=S(mm()),_e=S(ie()),dl=S(hn());var Gr=S(q());var A=S(j());function fl(){Rc.open({title:"ClickHouse queries recently executed for this user",content:(0,A.jsx)(ym,{}),primaryButton:null,width:1600})}var hm=(0,_e.kea)([(0,_e.path)(["lib","components","CommandPalette","DebugCHQueries"]),(0,_e.actions)({setPathFilter:e=>({path:e})}),(0,_e.reducers)({pathFilter:[null,{setPathFilter:(e,{path:t})=>t}]}),(0,dl.loaders)(({props:e})=>({debugResponse:[{},{loadDebugResponse:async()=>{let t=new URLSearchParams;return e.insightId&&t.append("insight_id",e.insightId),await ut.get(`api/debug_ch_queries/?${t.toString()}`)}}]})),(0,_e.selectors)({paths:[e=>[e.debugResponse],e=>e.queries?Object.entries(e.queries.map(t=>t.path).reduce((t,r)=>(t[r]=t[r]===void 0?1:t[r]+=1,t),{})).sort((t,r)=>r[1]-t[1]):null],filteredQueries:[e=>[e.debugResponse,e.pathFilter],(e,t)=>t&&e?.queries?e.queries.filter(r=>r.path===t):e.queries]}),(0,_e.afterMount)(({actions:e})=>{e.loadDebugResponse()})]),gm=e=>{let t=[],r=(0,Wr.default)().startOf("hour");for(let n=0;n<e*24;n++)t.push(r.subtract(n,"hour").format("YYYY-MM-DDTHH:00:00"));return t.reverse()},vm=({data:e})=>{let t=(0,Gr.useRef)(null),r=gm(14);return(0,Gr.useEffect)(()=>{if(t.current){Ba.register(ul.default,Da);let n=new Map(e.map(h=>[h.hour,h])),i=r.map(h=>n.get(h)?.successful_queries||0),a=r.map(h=>n.get(h)?.exceptions||0),o=r.map(h=>n.get(h)?.avg_response_time_ms||0),s=[{label:"Successful Queries",data:i,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,stack:"Stack 0"},{label:"Exceptions",data:a,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,stack:"Stack 0"},{label:"Avg Response Time (ms)",data:o,type:"line",fill:!1,borderColor:"rgba(153, 102, 255, 0.5)",yAxisID:"y-axis-2"}],l=Math.max(...i,...a),c=Math.max(...o),u={responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!1},y:{type:"linear",display:!0,position:"left",max:l*1.1},"y-axis-2":{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},max:c*2}},plugins:{datalabels:{display:!1}}},d=new Ba(t.current?.getContext("2d"),{type:"bar",data:{labels:r,datasets:s},options:u,plugins:[Da]});return()=>d.destroy()}},[e]),(0,A.jsx)("canvas",{ref:t,className:"h-[300px] w-full"})};function ym({insightId:e}){let t=hm({insightId:e}),{debugResponseLoading:r,filteredQueries:n,pathFilter:i,paths:a,debugResponse:o}=(0,_e.useValues)(t),{setPathFilter:s,loadDebugResponse:l}=(0,_e.useActions)(t);return(0,A.jsxs)(A.Fragment,{children:[!r&&o.hourly_stats?(0,A.jsx)("div",{children:(0,A.jsx)(vm,{data:o.hourly_stats})}):null,(0,A.jsxs)("div",{className:"flex gap-4 items-start justify-between mb-4",children:[(0,A.jsxs)("div",{className:"flex flex-wrap gap-2",children:[o.stats?null:a?.map(([c,u])=>(0,A.jsxs)(Z,{type:i===c?"primary":"tertiary",size:"small",onClick:()=>s(i===c?null:c),children:[c," ",(0,A.jsxs)("span",{className:"ml-0.5 text-secondary ligatures-none",children:["(",u,")"]})]},c)),!r&&o.stats?(0,A.jsxs)("div",{className:"flex flex-row space-x-4 p-4 border rounded bg-surface-primary",children:[(0,A.jsx)("div",{className:"flex flex-col items-center",children:(0,A.jsx)("span",{className:"text-sm font-bold",children:"last 14 days"})}),(0,A.jsxs)("div",{className:"flex flex-col items-center",children:[(0,A.jsx)("span",{className:"text-xl font-bold",children:o.stats.total_queries}),(0,A.jsx)("span",{className:"text-sm text-gray-600",children:"Total queries"})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center",children:[(0,A.jsx)("span",{className:"text-xl font-bold",children:o.stats.total_exceptions}),(0,A.jsx)("span",{className:"text-sm text-gray-600",children:"Total exceptions"})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center",children:[(0,A.jsxs)("span",{className:"text-xl font-bold",children:[o.stats.average_query_duration_ms?.toFixed(2)," ms"]}),(0,A.jsx)("span",{className:"text-sm text-gray-600",children:"Avg query duration"})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center",children:[(0,A.jsxs)("span",{className:"text-xl font-bold",children:[o.stats.max_query_duration_ms," ms"]}),(0,A.jsx)("span",{className:"text-sm text-gray-600",children:"Max query duration"})]}),(0,A.jsxs)("div",{className:"flex flex-col items-center",children:[(0,A.jsxs)("span",{className:"text-xl font-bold",children:[o.stats.exception_percentage?.toFixed(2),"%"]}),(0,A.jsx)("span",{className:"text-sm text-gray-600",children:"Exception %"})]})]}):null]}),(0,A.jsx)(Z,{icon:(0,A.jsx)(di,{}),disabledReason:r?"Loading\u2026":null,onClick:()=>l(),size:"small",type:"secondary",children:"Refresh"})]}),(0,A.jsx)(Cc,{columns:[{title:"Timestamp",render:function(u,d){return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"font-mono whitespace-pre mb-2",children:Wr.default.tz(d.timestamp,"UTC").tz().format().replace("T",`
`)}),(0,A.jsx)("div",{children:d.status===1?"In progress\u2026":(0,A.jsxs)(A.Fragment,{children:["Took ",Math.round((d.execution_time+Number.EPSILON)*100)/100," ms"]})})]})},width:160},{title:"Query",render:function(u,d){return(0,A.jsxs)("div",{className:"max-w-200 py-1 space-y-2",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)(wt,{className:"inline-block",children:[(0,A.jsx)("span",{className:"font-bold tracking-wide",children:"ID:"})," ",(0,A.jsx)("span",{className:"font-mono",children:d.query_id})]})," ",typeof d.logComment.cache_key=="string"?(0,A.jsxs)(wt,{className:"inline-block",children:[(0,A.jsx)("span",{className:"font-bold tracking-wide",children:"Cache key:"})," ",(0,A.jsx)("span",{className:"font-mono",children:d.logComment.cache_key})," ",(0,A.jsx)(st,{to:`https://sentry.io/issues/?query=is%3Aunresolved+cache_key%3A${d.logComment.cache_key}&statsPeriod=7d`,className:"inline-block",target:"_blank",targetBlankIcon:!0})]}):null," ",typeof d.logComment.insight_id=="number"?(0,A.jsxs)(wt,{className:"inline-block",children:[(0,A.jsx)("span",{className:"font-bold tracking-wide",children:"Insight ID:"})," ",(0,A.jsx)("span",{className:"font-mono",children:d.logComment.insight_id})," ",(0,A.jsx)(st,{to:`https://sentry.io/issues/?query=is%3Aunresolved+insight_id%3A${d.logComment.insight_id}&statsPeriod=7d`,className:"inline-block",target:"_blank",targetBlankIcon:!0})]}):null," ",typeof d.logComment.dashboard_id=="number"?(0,A.jsxs)(wt,{className:"inline-block",children:[(0,A.jsx)("span",{className:"font-bold tracking-wide",children:"Dashboard ID:"})," ",(0,A.jsx)("span",{className:"font-mono",children:d.logComment.dashboard_id})," ",(0,A.jsx)(st,{to:`https://sentry.io/issues/?query=is%3Aunresolved+dashboard_id%3A${d.logComment.dashboard_id}&statsPeriod=7d`,className:"inline-block",target:"_blank",targetBlankIcon:!0})]}):null," ",typeof d.logComment.user_id=="number"?(0,A.jsxs)(wt,{className:"inline-block",children:[(0,A.jsx)("span",{className:"font-bold tracking-wide",children:"User ID:"})," ",(0,A.jsx)("span",{className:"font-mono",children:d.logComment.user_id})," ",(0,A.jsx)(st,{to:`https://sentry.io/issues/?query=is%3Aunresolved+user%3A%22id%3A${d.logComment.user_id}%22&statsPeriod=7d`,className:"inline-block",target:"_blank",targetBlankIcon:!0})]}):null]}),d.exception&&(0,A.jsxs)(Zr,{type:"error",className:"text-xs font-mono",children:[(0,A.jsx)("div",{children:d.exception}),typeof d.logComment.sentry_trace=="string"?(0,A.jsx)(Z,{type:"secondary",size:"xsmall",to:`https://sentry.io/issues/?query=is%3Aunresolved+trace%3A${d.logComment.sentry_trace.split("-")[0]}&statsPeriod=7d`,targetBlank:!0,className:"mt-4 mb-1",children:"View in Sentry"}):null]}),(0,A.jsx)(Va,{language:"sql",thing:"query",maxLinesWithoutExpansion:10,className:"text-sm max-w-[60vw]",children:d.query}),typeof d.logComment.query=="object"&&d.logComment.query!==null?(0,A.jsxs)(Z,{type:"primary",size:"small",fullWidth:!0,center:!0,icon:(0,A.jsx)(Ts,{}),to:X.debugQuery(d.logComment.query),targetBlank:!0,sideAction:{icon:(0,A.jsx)(Us,{}),onClick:()=>void mr(JSON.stringify(d.logComment.query),"query JSON"),tooltip:"Copy query JSON to clipboard"},className:"my-0",children:["Debug"," ","kind"in d.logComment.query?d.logComment.query.kind:"query"," in new tab"]}):null]})}},{title:"Profiling stats",render:function(u,d){let[h,g]=(0,Gr.useState)(!1),v=d.profile_events;if(v)return(0,A.jsxs)("div",{children:[h?(0,A.jsx)(Va,{language:"json",maxLinesWithoutExpansion:0,className:"text-sm mb-2",children:JSON.stringify(v,null,2)},d.query_id):(0,A.jsxs)("table",{className:"w-80",children:[(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Bytes selected (all nodes, uncompressed)"}),(0,A.jsx)("td",{children:v.SelectedBytes!=null?mn(v.SelectedBytes):(0,A.jsx)("i",{children:"unknown"})})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Bytes read from disk (excl. page cache)"}),(0,A.jsx)("td",{children:v.OSReadBytes!=null?mn(v.OSReadBytes):(0,A.jsx)("i",{children:"unknown"})})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Bytes read from disk (incl. page cache)"}),(0,A.jsx)("td",{children:v.OSReadChars!=null?mn(v.OSReadChars):(0,A.jsx)("i",{children:"unknown"})})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Page cache hit rate"}),(0,A.jsx)("td",{children:v.OSReadBytes!=null&&v.OSReadChars!=null?`${Math.round((v.OSReadChars-v.OSReadBytes)/v.OSReadChars*100)}%`:(0,A.jsx)("i",{children:"unknown"})})]}),(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:"Bytes received over network"}),(0,A.jsx)("td",{children:v.NetworkReceiveBytes!=null?mn(v.NetworkReceiveBytes):(0,A.jsx)("i",{children:"unknown"})})]})]}),(0,A.jsx)(Z,{type:"secondary",size:"xsmall",onClick:()=>g(!h),className:"my-1",fullWidth:!0,center:!0,children:h?"Show key stats only":"Show full raw stats"})]})}}],dataSource:n,loading:r,loadingSkeletonRows:5,pagination:void 0,rowClassName:"align-top"})]})}f();m();p();var $p=S(Zt()),fr=S(ie());var Ca=S(q());f();m();p();var bn=S(ie());var yl=S(q());f();m();p();var Ja=S(Zt()),ji=S(ie());var Dr=S(j());function Ie({children:e,title:t}){let{modalMode:r}=(0,ji.useValues)(Se),{closeSidePanel:n}=(0,ji.useActions)(Se);return(0,Dr.jsxs)("header",{className:(0,Ja.default)("border-b shrink-0 flex items-center justify-end gap-1",{"p-1 h-10":!r,"pb-2 mt-2 mx-3":r}),children:[t?(0,Dr.jsx)("h3",{className:(0,Ja.default)("flex-1 flex items-center gap-1 font-semibold mb-0 truncate",{"text-base px-2":!r}),children:t}):null,e,(0,Dr.jsx)(Z,{size:"small",sideIcon:(0,Dr.jsx)(Ci,{}),onClick:()=>n(),tooltip:r?"Close":"Close this side panel",tooltipPlacement:r?"top":"bottom-end"})]})}f();m();p();var pl=S(ie());var Xa=S(j());function ml({selectedNotebookId:e}){let{notebooks:t,notebookTemplates:r}=(0,pl.useValues)(Dc),n=e==="scratchpad"?"My scratchpad":r.find(i=>i.short_id===e)?.title||t.find(i=>i.short_id===e)?.title||"Untitled";return(0,Xa.jsx)(Qc,{placement:"bottom-start",children:(0,Xa.jsx)(Z,{size:"small",truncate:!0,children:n||"Notebooks"})})}f();m();p();var hl=S(Zt()),Li=S(ie()),gl=S(q());var _t=S(j());function vl(){let[e,t]=(0,gl.useState)(!1),{dropMode:r,droppedResource:n}=(0,Li.useValues)(Tr),{setDroppedResource:i}=(0,Li.useActions)(Tr),a=s=>{if(s.preventDefault(),t(!1),!s.dataTransfer)return null;let l=s.dataTransfer.getData("text/plain"),c=s.dataTransfer.getData("node"),u=s.dataTransfer.getData("properties");i(c?{type:c,attrs:u?JSON.parse(u):{}}:l)},o=s=>{i(null),n&&(typeof n!="string"?s.actions.insertAfterLastNode(n):s.actions.pasteAfterLastNode(n))};return!r&&!n?null:(0,_t.jsx)("div",{className:(0,hl.default)("NotebookPanelDropzone",{"NotebookPanelDropzone--active":e,"NotebookPanelDropzone--dropped":!!n}),onDragEnter:()=>t(!0),onDragLeave:()=>t(!1),onDragOver:s=>s.preventDefault(),onDrop:a,children:n?(0,_t.jsxs)("div",{className:"NotebookPanelDropzone__dropped",children:[(0,_t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,_t.jsx)("h2",{children:"Add dropped resource to..."}),(0,_t.jsx)(Z,{size:"small",onClick:()=>i(null),children:"Cancel"})]}),(0,_t.jsx)(Bc,{onNotebookOpened:o,resource:!0})]}):(0,_t.jsx)("div",{className:"NotebookPanelDropzone__message",children:"Drop here for a different Notebook"})})}var Ue=S(j());function bl(){let{selectedNotebook:e,initialAutofocus:t,droppedResource:r,dropProperties:n}=(0,bn.useValues)(Tr),{selectNotebook:i,closeSidePanel:a}=(0,bn.useActions)(Tr),{notebook:o}=(0,bn.useValues)(Gc({shortId:e,target:"popover"})),s=!o?.is_template,{ref:l,size:c}=yc({0:"small",832:"medium"}),u=(0,yl.useMemo)(()=>c==="medium",[c]);return(0,Ue.jsxs)("div",{ref:l,className:"NotebookPanel",...n,children:[r?null:(0,Ue.jsxs)(Ue.Fragment,{children:[(0,Ue.jsxs)(Ie,{children:[(0,Ue.jsx)(ml,{selectedNotebookId:e,onSelectNotebook:d=>{i(d.short_id)}}),e&&(0,Ue.jsx)(nl,{shortId:e}),(0,Ue.jsx)("div",{className:"flex-1"}),(0,Ue.jsx)(al,{shortId:e}),u&&(0,Ue.jsx)(il,{size:"small"}),(0,Ue.jsx)(Z,{size:"small",to:X.notebook(e),onClick:()=>a(),icon:(0,Ue.jsx)(He,{}),tooltip:"Open as main focus",tooltipPlacement:"bottom"})]}),(0,Ue.jsx)("div",{className:"flex flex-col flex-1 overflow-y-auto px-4 py-2",children:(0,Ue.jsx)(rl,{shortId:e,editable:s,initialAutofocus:t},e)})]}),(0,Ue.jsx)(vl,{})]})}f();m();p();var Sn=S(ie());f();m();p();var Kt=S(ie());var _i=(0,Kt.kea)([(0,Kt.path)(["scenes","navigation","sidepanel","sidePanelExportsLogic"]),(0,Kt.connect)({values:[La,["exports","freshUndownloadedExports"]],actions:[Se,["openSidePanel"],La,["loadExports","removeFresh"]]}),(0,Kt.afterMount)(({actions:e})=>{e.loadExports()})]);var ve=S(j()),Sl=()=>{let{freshUndownloadedExports:e}=(0,Sn.useValues)(_i);return(0,ve.jsx)(kr,{count:e.length,children:(0,ve.jsx)(ka,{})})},bm=()=>{let{exports:e,freshUndownloadedExports:t}=(0,Sn.useValues)(_i),{loadExports:r,removeFresh:n}=(0,Sn.useActions)(_i);return(0,ve.jsx)("div",{className:"flex flex-col flex-1 overflow-hidden",children:(0,ve.jsxs)("div",{className:"flex-1 overflow-y-auto p-2",children:[(0,ve.jsx)("div",{className:"flex justify-end",children:(0,ve.jsx)(Z,{onClick:r,type:"tertiary",size:"small",icon:(0,ve.jsx)(di,{}),children:"Refresh"})}),e.map(i=>{let a=t.some(o=>o.id===i.id);return(0,ve.jsx)(Z,{type:a?"primary":"secondary",fullWidth:!0,className:"mt-2",disabledReason:i.has_content?void 0:"Export not ready yet",onClick:()=>{n(i),Ac(i)},sideIcon:i.has_content?(0,ve.jsx)(ka,{className:"text-link"}):void 0,children:(0,ve.jsxs)("div",{className:"flex items-center justify-between flex-auto p-2",children:[(0,ve.jsxs)("div",{children:[(0,ve.jsx)("span",{className:"text-link font-medium block",children:i.filename}),i.created_at&&(0,ve.jsx)("span",{className:"text-xs mt-1",children:(0,Wr.default)(i.created_at).fromNow()}),i.expires_after&&(0,ve.jsxs)("span",{className:"text-xs text-secondary mt-1",children:[" ","\xB7 expires ",(0,Wr.default)(i.expires_after).fromNow()]}),a&&(0,ve.jsx)("span",{className:"text-xs text-secondary mt-1",children:" \xB7 not downloaded yet"})]}),(0,ve.jsx)("div",{children:!i.has_content&&(0,ve.jsx)(Je,{})})]})},i.id)})]})})},xl=()=>(0,ve.jsxs)("div",{className:"flex flex-col overflow-hidden flex-1",children:[(0,ve.jsx)(Ie,{title:(0,ve.jsx)("div",{className:"flex space-x-2",children:(0,ve.jsx)("span",{children:"Exports"})})}),(0,ve.jsx)("p",{className:"m-4",children:"Retrieve your exports here. Exports are generated asynchronously and may take a few seconds to complete."}),(0,ve.jsx)(bm,{})]});f();m();p();var Rl=S(ie());var vr=S(j()),wl=()=>{let{sceneSidePanelContext:e}=(0,Rl.useValues)(Lr);return(0,vr.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,vr.jsx)(Ie,{title:"Access control"}),(0,vr.jsx)("div",{className:"flex-1 p-4 overflow-y-auto",children:e.access_control_resource&&e.access_control_resource_id?(0,vr.jsx)(ol,{resource:e.access_control_resource,resource_id:e.access_control_resource_id}):(0,vr.jsx)("p",{children:"Not supported"})})]})};f();m();p();var xn=S(Zt()),Gt=S(ie());f();m();p();f();m();p();var Il=S(Zt()),yr=S(j()),Cl=({strokePercentage:e=.2,backgroundStrokeOpacity:t=.2,size:r=16,progress:n,children:i,className:a})=>{let o=r/2,s=o*e,l=r*Math.PI,c=l-n*l;return(0,yr.jsxs)("span",{className:(0,Il.default)("LemonProgressCircle",a),style:{height:r,width:r},children:[(0,yr.jsxs)("svg",{height:r,width:r,children:[(0,yr.jsx)("circle",{stroke:"currentColor",strokeOpacity:t,fill:"transparent",strokeWidth:s,r:o-s/2,cx:o,cy:o}),(0,yr.jsx)("circle",{stroke:"currentColor",fill:"transparent",strokeWidth:s,strokeDasharray:l+" "+l,style:{strokeDashoffset:c},r:o-s/2,cx:o,cy:o})]}),i?(0,yr.jsx)("span",{className:"LemonProgressCircle__content",children:i}):null]})};var H=S(j()),Nl=()=>{let{completionPercent:e,sections:t,isReady:r,showHiddenSections:n,hasHiddenSections:i}=(0,Gt.useValues)(hr),{toggleShowHiddenSections:a}=(0,Gt.useActions)(hr);return r?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Ie,{title:"Quick start"}),(0,H.jsxs)("div",{className:"py-4 space-y-2 overflow-y-auto no-scrollbar",children:[(0,H.jsxs)("div",{className:"flex flex-col px-4 space-y-2",children:[(0,H.jsxs)("div",{className:"flex",children:[(0,H.jsx)("p",{children:"Use our Quick Start guide to learn about everything PostHog can do for you and your product."}),(0,H.jsx)(Tc,{className:"max-h-full w-20 object-contain"})]}),(0,H.jsxs)("div",{className:"flex items-center justify-center gap-2 w-full",children:[(0,H.jsx)(tl,{percent:e,size:"medium",bgColor:"var(--bg-3000)",strokeColor:"var(--success)",className:"w-full stroke-opacity-80 h-2"}),(0,H.jsxs)("span",{className:"font-medium text-muted-alt",children:[e,"%"]})]})]}),(0,H.jsx)("div",{className:"divide-y",children:t.filter(o=>o.visible).map(o=>(0,H.jsx)("div",{className:"px-4",children:(0,H.jsx)(Fl,{sectionKey:o.key,section:o})},o.key))}),i&&(0,H.jsxs)("div",{className:"w-full",children:[(0,H.jsxs)("button",{className:"px-4 py-2 flex items-center justify-between w-full",onClick:()=>a(),role:"button","aria-expanded":n,children:[(0,H.jsx)("h4",{className:"font-semibold text-[16px]",children:"All products"}),n?(0,H.jsx)(ks,{className:"h-5 w-5"}):(0,H.jsx)(Ls,{className:"h-5 w-5"})]}),(0,H.jsx)("div",{className:"divide-y",children:n&&t.filter(o=>!o.visible).map(o=>(0,H.jsx)("div",{className:"px-4",children:(0,H.jsx)(Fl,{sectionKey:o.key,section:o})},o.key))})]})]})]}):null},El=({className:e})=>{let{activeTasks:t,completionPercent:r}=(0,Gt.useValues)(hr);return(0,H.jsx)(Cl,{progress:r/100,strokePercentage:.15,size:20,className:(0,xn.default)(t.length>0?"text-accent-primary":"text-muted-alt",e),children:(0,H.jsx)("span",{className:"text-xs font-semibold",children:t.length})})},Fl=({sectionKey:e,section:t})=>{let{tasks:r}=(0,Gt.useValues)(hr),{toggleSectionOpen:n,addIntentForSection:i}=(0,Gt.useActions)(hr),a=r.filter(u=>u.section===e);if(a.length===0)return null;let o=()=>{t.visible&&n(e)},s=()=>{t.visible||i(e),t.open||n(e)},l=a.filter(u=>u.completed).length,c=a.length;return(0,H.jsxs)("div",{className:"py-3",children:[(0,H.jsxs)("button",{className:(0,xn.default)("flex items-center justify-between select-none w-full",t.visible&&"cursor-pointer"),onClick:t.visible?o:void 0,role:"button","aria-expanded":t.open,children:[(0,H.jsxs)("div",{className:"flex items-center gap-2",children:[t.icon,(0,H.jsx)("h4",{className:"m-0 font-semibold text-[16px]",children:t.title})]}),(0,H.jsxs)("div",{className:"flex items-center gap-2",children:[t.visible&&(0,H.jsxs)("span",{className:"text-sm text-muted-alt font-medium",children:[l," of ",c," complete"]}),t.visible?(0,H.jsx)(Os,{className:(0,xn.default)("h-4 w-4",t.open&&"rotate-90")}):(0,H.jsx)(Z,{icon:(0,H.jsx)(ac,{className:"h-4 w-4"}),onClick:s,size:"xsmall",type:"secondary",children:"Add"})]})]}),t.visible&&t.open&&(0,H.jsx)("ul",{className:"space-y-2 mt-2",children:a.map(u=>(0,H.jsx)(Sm,{...u},u.id))})]})},Sm=({id:e,title:t,completed:r,skipped:n,canSkip:i,lockedReason:a,url:o})=>{let{runTask:s,markTaskAsSkipped:l}=(0,Gt.useActions)(hr),{reportActivationSideBarTaskClicked:c}=(0,Gt.useActions)($c),u=()=>{if(c(e),o)try{window.open(o,"_blank")===null&&(window.location.href=o)}catch{window.location.href=o}else s(e)},d=!r&&!n&&!a;return(0,H.jsxs)("li",{className:(0,xn.default)("p-2 border bg-primary-alt-highlight flex items-center justify-between gap-2 select-none",r||n?"line-through opacity-70":"",d&&"cursor-pointer",a&&"opacity-70"),onClick:d?u:void 0,children:[(0,H.jsxs)("div",{className:"flex items-center gap-2",children:[r?(0,H.jsx)(mi,{className:"h-6 w-6 text-success"}):a?(0,H.jsx)(Rt,{title:a,children:(0,H.jsx)(Si,{className:"h-6 w-6 text-muted-alt"})}):(0,H.jsx)("div",{className:"rounded-full border-2 w-5 h-5 border-muted-alt"}),(0,H.jsx)("p",{className:"m-0 font-semibold",children:t})]}),d&&i&&(0,H.jsx)(Z,{size:"xsmall",type:"secondary",className:"h-6 font-semibold text-muted-alt",onClick:h=>{h.stopPropagation(),l(e)},children:"Skip"})]})};f();m();p();var br=S(ie());var wn=S(q());f();m();p();var Wl=S(ie());f();m();p();var er=S(ie()),Al=S(hn()),Pl=S(xs());var Ol=(0,er.kea)([(0,er.path)(["lib","components","metalytics","metalyticsLogic"]),(0,er.connect)({values:[Lr,["sceneSidePanelContext"],Ec,["members"]]}),(0,Al.loaders)(({values:e})=>({viewCount:[null,{loadViewCount:async()=>{let t={kind:"HogQLQuery",query:Ma`SELECT SUM(count) AS count, COUNT(DISTINCT app_source_id) AS unique_users
                            FROM app_metrics
                            WHERE app_source = 'metalytics'
                            AND instance_id = ${e.instanceId}`},n=(await ut.query(t,void 0,void 0,!0)).results;return{views:n[0][0],users:n[0][1]}}}],recentUsers:[[],{loadUsersLast30days:async()=>{let t={kind:"HogQLQuery",query:Ma`SELECT DISTINCT app_source_id
                            FROM app_metrics
                            WHERE app_source = 'metalytics'
                            AND instance_id = ${e.instanceId}
                            AND timestamp >= NOW() - INTERVAL 30 DAY
                            ORDER BY timestamp DESC`};return(await ut.query(t,void 0,void 0,!0)).results.map(n=>n[0])}}]})),(0,er.selectors)({instanceId:[e=>[e.sceneSidePanelContext],e=>e?.activity_item_id?`${e.activity_scope}:${e.activity_item_id}`:null],scope:[e=>[e.sceneSidePanelContext],e=>e?.activity_scope],recentUserMembers:[e=>[e.recentUsers,e.members],(e,t)=>!t||!e?[]:t.filter(n=>e.includes(String(n.user.id)))]}),(0,Pl.subscriptions)(({actions:e})=>({instanceId:async t=>{t&&(e.loadViewCount(),e.loadUsersLast30days(),await ut.create("/api/projects/@current/metalytics/",{metric_name:"viewed",instance_id:t}))}}))]);var Re=S(j());function Tl(){let{scope:e,instanceId:t,viewCount:r,recentUserMembers:n,viewCountLoading:i,recentUsersLoading:a}=(0,Wl.useValues)(Ol);if(!t)return(0,Re.jsx)("p",{className:"border-dashed ",children:"You can see internal analytics of how your Organization members are using PostHog for things such as Dashboards, Insights, Playlists etc. Open an app to see the viewership data here."});let o=`this ${e?Lt(e,!0):"app"}`;return(0,Re.jsxs)("div",{className:"space-y-4 ",children:[(0,Re.jsxs)("p",{children:['You are viewing "meta" analytics of how your organization members are interacting with'," ",(0,Re.jsx)("b",{children:o}),"."]}),(0,Re.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,Re.jsx)(Rt,{title:`The total number of times ${o} has been viewed by members of your organization.`,placement:"top",children:(0,Re.jsxs)("div",{className:"flex-1 p-4 border rounded bg-surface-primary min-w-40",children:[(0,Re.jsx)("div",{className:"text-sm text-secondary",children:"Views"}),(0,Re.jsx)("div",{className:"text-2xl font-semibold",children:i?(0,Re.jsx)(Je,{}):r?.views??0})]})}),(0,Re.jsx)(Rt,{title:`The total number of unique organization members who have viewed ${o}.`,placement:"top",children:(0,Re.jsxs)("div",{className:"flex-1 p-4 border rounded bg-surface-primary min-w-40",children:[(0,Re.jsx)("div",{className:"text-sm text-secondary",children:"Viewers"}),(0,Re.jsx)("div",{className:"text-2xl font-semibold",children:i?(0,Re.jsx)(Je,{}):r?.users??0})]})}),(0,Re.jsx)(Rt,{title:`The most recent 30 users who have viewed ${o}.`,placement:"top",children:(0,Re.jsxs)("div",{className:"flex-1 p-4 border rounded bg-surface-primary min-w-40",children:[(0,Re.jsx)("div",{className:"text-sm text-secondary",children:"Recent viewers (30 days)"}),a?(0,Re.jsx)(Je,{}):n.length>0?(0,Re.jsx)(_c,{className:"mt-2",people:n.map(s=>({email:s.user.email,name:s.user.first_name,title:s.user.email})),limit:3}):(0,Re.jsx)("div",{className:"text-sm mt-2",children:"No recent viewers"})]})})]})]})}f();m();p();var Rn=S(j());function kl(){return(0,Rn.jsxs)("div",{className:"space-y-4 ",children:[(0,Rn.jsx)("p",{children:"Get notified of your team's activity"}),(0,Rn.jsx)(zc,{logicKey:"activity-log",type:"internal_destination",subTemplateId:"activity-log",filters:{events:[{id:"$activity_log_entry_created",type:"events"}]}})]})}var D=S(j()),Rm=100,Ul=e=>{let{unreadCount:t}=(0,br.useValues)(Zi);return(0,D.jsx)(kr,{count:t,...e,children:(0,D.jsx)(Ks,{})})},Zl=()=>{let{hasNotifications:e,notifications:t,activeTab:r,allActivity:n,allActivityResponseLoading:i,allActivityHasNext:a,importantChangesLoading:o,hasUnread:s,filters:l,filtersForCurrentPage:c,showDetails:u}=(0,br.useValues)(Zi),{togglePolling:d,setActiveTab:h,maybeLoadOlderActivity:g,markAllAsRead:v,loadImportantChanges:y,setFilters:I,toggleShowDetails:w}=(0,br.useActions)(Zi),{user:W}=(0,br.useValues)(lt),{featureFlags:O}=(0,br.useValues)(xt);Hc(_=>{d(_)}),(0,wn.useEffect)(()=>(y(!1),()=>{v(),d(!1)}),[]);let B=(0,wn.useRef)(0),J=(0,wn.useRef)(null),$=_=>{if(_.currentTarget.scrollTop>B.current){let z=_.currentTarget.scrollTop+_.currentTarget.clientHeight;_.currentTarget.scrollHeight-z<Rm&&g()}B.current=_.currentTarget.scrollTop},Q=[{value:null,label:"All activity"},...Object.values(Ss).map(_=>({value:_,label:Lt(_)}))],Y=l?.scope?l.scope+`${l.item_id??""}`:null;c?.scope&&c?.item_id&&Q.unshift({value:`${c.scope}${c.item_id??""}`,label:`This ${Lt(c.scope,!0)}`});let K=(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(Fi,{bordered:!0,label:"Show details",checked:u,onChange:w})});return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Ie,{title:"Team activity"}),(0,D.jsx)(Lc,{feature:"audit_logs",className:"flex flex-col flex-1 overflow-hidden",overrideShouldShowGate:W?.is_impersonated||!!O[et.AUDIT_LOGS_ACCESS],children:(0,D.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,D.jsx)("div",{className:"mx-2 shrink-0",children:(0,D.jsx)(Fc,{activeKey:r,onChange:_=>h(_),tabs:[{key:"unread",label:"My notifications"},{key:"all",label:"All activity"},...O[et.METALYTICS]?[{key:"metalytics",label:"Analytics"}]:[],...O[et.CDP_ACTIVITY_LOG_NOTIFICATIONS]?[{key:"subscriptions",label:"Subscriptions"}]:[]]})}),r==="unread"?(0,D.jsx)("div",{className:"px-2 pb-2 space-y-2 shrink-0",children:(0,D.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[K,s?(0,D.jsx)(Z,{type:"secondary",onClick:()=>v(),children:"Mark all as read"}):null]})}):r==="all"?(0,D.jsxs)("div",{className:"flex items-center justify-between gap-2 px-2 pb-2 space-y-2 shrink-0",children:[(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[K,i?(0,D.jsx)(Je,{textColored:!0}):null]}),(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsx)("span",{children:"Filter for activity on:"}),(0,D.jsx)(Pi,{size:"small",options:Q,placeholder:"All activity",value:Y??void 0,onChange:_=>I({...l,scope:_??void 0,item_id:void 0}),dropdownMatchSelectWidth:!1}),(0,D.jsx)("span",{children:"by"}),(0,D.jsx)(qc,{value:l?.user??null,onChange:_=>I({...l,user:_?.id??void 0})})]})]}):null,(0,D.jsx)("div",{className:"flex flex-col flex-1 overflow-hidden",ref:J,onScroll:$,children:(0,D.jsx)(bc,{direction:"vertical",innerClassName:"p-2 space-y-px",children:r==="unread"?(0,D.jsx)(D.Fragment,{children:o&&!e?(0,D.jsx)(Xe,{className:"h-12 my-2",repeat:10,fade:!0}):e?t.map((_,z)=>(0,D.jsx)(Qa,{logItem:_,showExtendedDescription:u},z)):(0,D.jsx)("div",{className:"p-6 text-center border border-dashed rounded text-secondary",children:"You're all caught up!"})}):r==="all"?(0,D.jsx)(D.Fragment,{children:i&&!n.length?(0,D.jsx)(Xe,{className:"h-12 my-2",repeat:10,fade:!0}):n.length?(0,D.jsxs)(D.Fragment,{children:[n.map((_,z)=>(0,D.jsx)(Qa,{logItem:_,showExtendedDescription:u},z)),(0,D.jsx)("div",{className:"flex items-center justify-center h-10 gap-2 m-4 text-secondary",children:i?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(Je,{textColored:!0})," Loading older activity"]}):a?(0,D.jsx)(Z,{type:"secondary",fullWidth:!0,center:!0,onClick:()=>g(),children:"Load more"}):"No more results"})]}):(0,D.jsxs)("div",{className:"flex flex-col items-center gap-2 p-6 text-center border border-dashed rounded",children:[(0,D.jsx)("span",{children:"No activity yet"}),l?(0,D.jsx)(Z,{type:"secondary",onClick:()=>I(null),children:"Clear filters"}):null]})}):r==="metalytics"?(0,D.jsx)(Tl,{}):r==="subscriptions"?(0,D.jsx)(kl,{}):null})})]})})]})};f();m();p();var Qr=S(ie());var Ql=S(q());f();m();p();var Gi=S(ie());var Vl=S(q());var It=S(j()),jl=e=>{let{key:t,composedComment:r,commentsLoading:n,replyingCommentId:i,itemContext:a}=(0,Gi.useValues)(ct(e)),{setComposedComment:o,sendComposedContent:s,setReplyingComment:l,setComposerRef:c,clearItemContext:u}=(0,Gi.useActions)(ct(e)),d=i?"Reply...":`Comment on ${e.item_id?"this ":""}${Lt(e.scope,!!e.item_id)}`;return(0,Vl.useEffect)(()=>()=>u(),[t]),(0,It.jsxs)("div",{className:"space-y-2",children:[(0,It.jsx)(Ui,{"data-attr":"comment-composer",placeholder:d,value:r,onChange:o,disabled:n,onPressCmdEnter:s,ref:c}),(0,It.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,It.jsx)("div",{className:"flex-1"}),i?(0,It.jsx)(Z,{type:"secondary",onClick:()=>l(null),children:"Cancel reply"}):null,a?(0,It.jsx)(Z,{type:"secondary",onClick:()=>u(),children:"Cancel"}):null,(0,It.jsxs)(Z,{type:"primary",onClick:s,disabledReason:r?null:"No message",sideIcon:(0,It.jsx)(Ni,{command:!0,enter:!0}),"data-attr":"discussions-comment",children:["Add ",i?"reply":"comment"]})]})]})};f();m();p();var Br=S(ie());var _l=S(q());f();m();p();var Ll=S(Zt()),Di=S(ie());var Bi=S(q());var oe=S(j()),wm=({comment:e})=>{let{editingComment:t,commentsLoading:r,replyingCommentId:n}=(0,Di.useValues)(ct),{deleteComment:i,setEditingComment:a,persistEditedComment:o,setReplyingComment:s}=(0,Di.useActions)(ct),l=(0,Bi.useRef)(null),c=n===e.id||t?.id===e.id;return(0,Bi.useEffect)(()=>{c&&l.current?.scrollIntoView()},[c]),(0,oe.jsxs)("div",{ref:l,className:(0,Ll.default)("Comment border rounded-lg bg-surface-primary",c&&"border-accent-primary"),"data-comment-id":e.id,children:[(0,oe.jsxs)("div",{className:"flex-1 flex justify-start p-2 gap-2",children:[(0,oe.jsx)(jr,{className:"mt-1",size:"xl",user:e.created_by}),(0,oe.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,oe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,oe.jsx)("span",{className:"flex-1 font-semibold ",children:e.created_by?.first_name??"Unknown user"}),e.created_at?(0,oe.jsx)("span",{className:"text-xs",children:(0,oe.jsx)(Oc,{time:e.created_at})}):null,(0,oe.jsx)(Ai,{items:[{icon:(0,oe.jsx)(lc,{}),label:"Reply",onClick:()=>s(e.source_comment??e.id)},{icon:(0,oe.jsx)(rc,{}),label:"Edit",onClick:()=>a(e)},{icon:(0,oe.jsx)(pi,{}),label:"Delete",onClick:()=>i(e)}],children:(0,oe.jsx)(Z,{icon:(0,oe.jsx)(gi,{}),size:"xsmall"})})]}),(0,oe.jsx)(Ti,{lowKeyHeadings:!0,children:e.content}),e.version?(0,oe.jsx)("span",{className:"text-xs text-secondary italic",children:"(edited)"}):null]})]}),t?.id===e.id?(0,oe.jsxs)("div",{className:"space-y-2 border-t p-2",children:[(0,oe.jsx)(Ui,{"data-attr":"comment-composer",placeholder:"Edit comment",value:t.content,onChange:u=>a({...t,content:u}),disabled:r,onPressCmdEnter:o}),(0,oe.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,oe.jsx)("div",{className:"flex-1"}),(0,oe.jsx)(Z,{type:"secondary",onClick:()=>a(null),disabled:r,children:"Cancel"}),(0,oe.jsx)(Z,{type:"primary",onClick:o,disabledReason:t.content?r?"Saving...":null:"No message",sideIcon:(0,oe.jsx)(Ni,{command:!0,enter:!0}),children:"Save changes"})]})]}):null]})},Ya=({commentWithReplies:e})=>{let{comment:t,replies:r}=e;return(0,oe.jsxs)("div",{className:"relative space-y-2",children:[t?(0,oe.jsx)(wm,{comment:t}):(0,oe.jsx)("div",{className:"border rounded border-dashed p-2 font-semibold italic bg-surface-primary text-secondary",children:"Deleted comment"}),(0,oe.jsx)("div",{className:"pl-8 space-y-2",children:r?.map(n=>(0,oe.jsx)(Ya,{commentWithReplies:{id:n.id,comment:n,replies:[]}},n.id))})]})};var tt=S(j()),Gl=e=>{let{key:t,commentsWithReplies:r,commentsLoading:n}=(0,Br.useValues)(ct(e)),{loadComments:i}=(0,Br.useActions)(ct(e));return(0,_l.useEffect)(()=>{i()},[t]),(0,tt.jsx)(Br.BindLogic,{logic:ct,props:e,children:(0,tt.jsxs)("div",{className:"flex flex-col",children:[!r?.length&&n?(0,tt.jsx)("div",{className:"space-y-2",children:(0,tt.jsx)(Xe,{className:"h-10 w-full"})}):r?.length?null:(0,tt.jsxs)("div",{className:"mx-auto p-8 max-w-160 mt-8 space-y-4",children:[(0,tt.jsx)("div",{className:"max-w-120 mx-auto",children:(0,tt.jsx)(Uc,{className:"w-full h-full"})}),(0,tt.jsx)("h2",{children:"Start the discussion!"}),(0,tt.jsx)("p",{children:"You can add comments about this page for your team members to see. Great for sharing context or ideas without getting in the way of the thing you are commenting on"})]}),(0,tt.jsx)("div",{className:"space-y-2",children:r?.map(a=>(0,tt.jsx)(Ya,{commentWithReplies:a},a.id))})]})})};f();m();p();var Ct=S(ie()),Dl=S(hn()),Bl=S(xs());var za=(0,Ct.kea)([(0,Ct.path)(["scenes","navigation","sidepanel","sidePanelDiscussionLogic"]),(0,Ct.actions)({loadCommentCount:!0,resetCommentCount:!0}),(0,Ct.connect)({values:[xt,["featureFlags"],Lr,["sceneSidePanelContext"]]}),(0,Dl.loaders)(({values:e})=>({commentCount:[0,{loadCommentCount:async(t,r)=>{if(!e.featureFlags[et.DISCUSSIONS]||!e.commentsLogicProps)return 0;await r(100);let n=await ut.comments.getCount({...e.commentsLogicProps});return r(),n},resetCommentCount:()=>0}]})),(0,Ct.selectors)({commentsLogicProps:[e=>[e.sceneSidePanelContext],e=>e.activity_scope?{scope:e.activity_scope,item_id:e.activity_item_id}:null]}),(0,Bl.subscriptions)(({actions:e})=>({commentsLogicProps:t=>{t?e.loadCommentCount():e.resetCommentCount()}}))]);var Ce=S(j()),Ml=e=>{let{commentCount:t}=(0,Qr.useValues)(za);return(0,Ce.jsx)(kr,{count:t,...e,children:(0,Ce.jsx)(fi,{})})},Im=({logicProps:e})=>{let{selectedTabOptions:t}=(0,Qr.useValues)(Se),{setReplyingComment:r}=(0,Qr.useActions)(ct(e));return(0,Ql.useEffect)(()=>{t&&r(t)},[t]),(0,Ce.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,Ce.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:(0,Ce.jsx)(Gl,{...e})}),(0,Ce.jsx)("div",{className:"border-t px-3 pb-3",children:(0,Ce.jsx)(jl,{...e})})]})},Hl=()=>{let{commentsLogicProps:e}=(0,Qr.useValues)(za),{scope:t,item_id:r}=e??{};return(0,Ce.jsxs)("div",{className:"flex flex-col overflow-hidden flex-1",children:[(0,Ce.jsx)(Ie,{title:(0,Ce.jsxs)("div",{className:"flex space-x-2",children:[(0,Ce.jsxs)("span",{children:["Discussion"," ",t?(0,Ce.jsxs)("span",{className:"font-normal text-secondary",children:["about ",r?"this":""," ",Lt(t,!!r)]}):null]}),(0,Ce.jsx)(Rt,{title:"This is a feature we are experimenting with! We'd love to get your feedback on it and whether this is something useful for working with PostHog.",children:(0,Ce.jsx)(wt,{type:"completion",children:"Experimental"})})]})}),e?(0,Ce.jsx)(Im,{logicProps:e}):(0,Ce.jsxs)("div",{className:"mx-auto p-8 max-w-160 mt-8 space-y-4",children:[(0,Ce.jsx)("div",{className:"max-w-80 mx-auto",children:(0,Ce.jsx)(kc,{className:"w-full h-full"})}),(0,Ce.jsx)("h2",{children:"Discussions aren't supported here yet..."}),(0,Ce.jsx)("p",{children:"This a beta feature that is currently only available when viewing things like an Insight, Dashboard or Notebook."})]})]})};f();m();p();var zl=S(Zt()),In=S(ie()),Cn=S(q());f();m();p();var We=S(ie()),Xl=S(Wa());var qa="https://posthog.com",Jl=e=>e[0]==="/"?e:`/${e}`,$a=e=>{try{let t=new URL(e);return t.pathname+t.search+t.hash}catch{return e}},Yl=(0,We.kea)([(0,We.path)(["scenes","navigation","sidepanel","sidePanelDocsLogic"]),(0,We.props)({}),(0,We.connect)({actions:[Se,["openSidePanel","closeSidePanel","setSidePanelOptions"]],values:[el,["sceneConfig"],Se,["selectedTabOptions"]]}),(0,We.actions)({updatePath:e=>({path:e}),setInitialPath:e=>({path:e}),unmountIframe:!0,handleExternalUrl:e=>({urlOrPath:e}),setMenuOptions:e=>({menuOptions:e}),setIframeReady:e=>({ready:e}),setActiveMenuName:e=>({activeMenuName:e}),navigateToPage:e=>({path:e})}),(0,We.reducers)(()=>({iframeReady:[!1,{setIframeReady:(e,{ready:t})=>t}],menuOptions:[null,{setMenuOptions:(e,{menuOptions:t})=>t}],activeMenuName:[null,{setActiveMenuName:(e,{activeMenuName:t})=>t}],currentPath:[null,{updatePath:(e,{path:t})=>Jl(t)}],initialPath:["/docs",{persist:!0},{setInitialPath:(e,{path:t})=>Jl(t)}]})),(0,We.selectors)({iframeSrc:[e=>[e.initialPath],e=>`${qa}${e??""}`],currentUrl:[e=>[e.currentPath],e=>`${qa}${e??""}`]}),(0,We.listeners)(({actions:e,values:t,props:r})=>({openSidePanel:({options:n})=>{if(n){let i=$a(n);e.setInitialPath(i),e.navigateToPage(i)}},unmountIframe:()=>{e.setInitialPath(t.currentPath??"/docs")},handleExternalUrl:({urlOrPath:n})=>{Xl.router.actions.push($a(n))},navigateToPage:({path:n})=>{n&&r.iframeRef.current?.contentWindow?.postMessage({type:"navigate",url:n},"*")},updatePath:({path:n})=>{e.setSidePanelOptions(n)}})),(0,We.afterMount)(({actions:e,values:t,cache:r})=>{if(t.selectedTabOptions){let n=$a(t.selectedTabOptions);e.setInitialPath(n)}else t.sceneConfig?.defaultDocsPath&&e.setInitialPath(t.sceneConfig?.defaultDocsPath);r.onWindowMessage=n=>{if(n.origin===qa){if(n.data.type==="internal-navigation"){e.updatePath(n.data.url);return}if(n.data.type==="docs-ready"){e.setIframeReady(!0);return}if(n.data.type==="external-navigation"){e.handleExternalUrl(n.data.url);return}if(n.data.type==="docs-menu"){e.setMenuOptions(n.data.menu);return}if(n.data.type==="docs-active-menu"){e.setActiveMenuName(n.data.activeMenuName);return}console.warn("Unhandled iframe message from Docs:",n.data)}},window.addEventListener("message",r.onWindowMessage)}),(0,We.beforeUnmount)(({actions:e,values:t,cache:r})=>{e.setInitialPath(t.currentPath??"/docs"),window.removeEventListener("message",r.onWindowMessage)})]);var xe=S(j());function Ka(){return(0,xe.jsxs)("div",{className:"absolute inset-0 p-4 space-y-2",children:[(0,xe.jsx)(Xe,{className:"w-full h-10 mb-12"}),(0,xe.jsx)(Xe,{className:"w-1/3 h-8"}),(0,xe.jsx)(Xe,{className:"w-1/2 h-4 mb-10"}),(0,xe.jsx)(Xe,{className:"w-full h-4"}),(0,xe.jsx)(Xe,{className:"w-full h-4 opacity-80"}),(0,xe.jsx)(Xe,{className:"w-full h-4 opacity-60"}),(0,xe.jsx)(Xe,{className:"w-full h-4 opacity-40"}),(0,xe.jsx)(Xe,{className:"w-1/2 h-4 opacity-20"})]})}var ql=()=>{let e=(0,Cn.useRef)(null),t=Yl({iframeRef:e}),{iframeSrc:r,iframeReady:n,currentUrl:i,activeMenuName:a,menuOptions:o}=(0,In.useValues)(t),{navigateToPage:s,unmountIframe:l,closeSidePanel:c}=(0,In.useActions)(t),{isDarkModeOn:u}=(0,In.useValues)(Wi);return(0,Cn.useEffect)(()=>{e.current?.contentWindow?.postMessage({type:"theme-toggle",isDarkModeOn:u},"*")},[u,e.current]),(0,Cn.useEffect)(()=>(window.addEventListener("beforeunload",l),()=>{window.removeEventListener("beforeunload",l),l()}),[]),(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsxs)(Ie,{children:[(0,xe.jsx)(Z,{size:"small",sideIcon:(0,xe.jsx)(bi,{}),type:"secondary",onClick:()=>{e.current?.contentWindow?.postMessage({type:"navigate",url:"/docs"},"*")}}),o&&(0,xe.jsx)(Pi,{placeholder:"Navigate",dropdownMatchSelectWidth:!1,onChange:s,size:"small",value:a??"",options:o.map(({name:d,url:h})=>({label:d,value:h}))}),(0,xe.jsx)("div",{className:"flex-1"}),(0,xe.jsx)(Z,{size:"small",sideIcon:(0,xe.jsx)(He,{}),targetBlank:!0,onClick:()=>{window.open(i,"_blank")?.focus(),c()},children:"Open in new tab"})]}),(0,xe.jsxs)("div",{className:"relative flex-1 overflow-hidden",children:[(0,xe.jsx)("iframe",{src:r,title:"Docs",className:(0,zl.default)("w-full h-full",!n&&"hidden"),ref:e}),!n&&(0,xe.jsx)(Ka,{})]})]})};f();m();p();var ru=S(ie());f();m();p();var eu=S(Zt()),tr=S(ie());var Fn=S(q());f();m();p();var Ye=S(ie()),$l=S(hn()),Kl=S(Wa());var Cm=new Set([]),Mr=(0,Ye.kea)([(0,Ye.path)(["layout","FeaturePreviews","featurePreviewsLogic"]),(0,Ye.connect)({values:[xt,["featureFlags"],lt,["user"]],actions:[gr,["submitZendeskTicket"]]}),(0,Ye.actions)({updateEarlyAccessFeatureEnrollment:(e,t)=>({flagKey:e,enabled:t}),beginEarlyAccessFeatureFeedback:e=>({flagKey:e}),cancelEarlyAccessFeatureFeedback:!0,submitEarlyAccessFeatureFeedback:e=>({message:e}),copyExternalFeaturePreviewLink:e=>({flagKey:e})}),(0,$l.loaders)(({values:e})=>({rawEarlyAccessFeatures:[[],{loadEarlyAccessFeatures:async()=>await new Promise(t=>Ut.getEarlyAccessFeatures(r=>t(r),!0))}],activeFeedbackFlagKey:[null,{submitEarlyAccessFeatureFeedback:async({message:t})=>{if(!e.user)throw new Error("Cannot submit early access feature feedback without a user");if(!e.activeFeedbackFlagKey)throw new Error("Cannot submit early access feature feedback without an active flag key");return await gr.asyncActions.submitZendeskTicket({name:e.user.first_name,email:e.user.email,kind:"feedback",target_area:e.activeFeedbackFlagKey,severity_level:"low",message:t}),null}}]})),(0,Ye.reducers)({activeFeedbackFlagKey:{beginEarlyAccessFeatureFeedback:(e,{flagKey:t})=>t,cancelEarlyAccessFeatureFeedback:()=>null}}),(0,Ye.listeners)(()=>({updateEarlyAccessFeatureEnrollment:({flagKey:e,enabled:t})=>{Ut.updateEarlyAccessFeatureEnrollment(e,t)},copyExternalFeaturePreviewLink:({flagKey:e})=>{mr(X.absolute((0,Kl.combineUrl)("/",void 0,`panel=feature-previews%3A${e}`).url))}})),(0,Ye.selectors)({earlyAccessFeatures:[e=>[e.rawEarlyAccessFeatures,e.featureFlags],(e,t)=>e.filter(r=>r.flagKey?Cm.has(r.flagKey)?!!t[`${r.flagKey}-preview`]:!0:!1).map(r=>{if(!r.flagKey)throw new Error("Early access feature without flagKey was not filtered out");return{...r,flagKey:r.flagKey,enabled:!!t[r.flagKey]}})]})]);var se=S(j());function tu({focusedFeatureFlagKey:e}){let{earlyAccessFeatures:t,rawEarlyAccessFeaturesLoading:r}=(0,tr.useValues)(Mr),{loadEarlyAccessFeatures:n}=(0,tr.useActions)(Mr);return(0,Fn.useLayoutEffect)(()=>n(),[]),(0,Fn.useLayoutEffect)(()=>{if(t.length>0&&e){let i=document.getElementById(`feature-preview-${e}`);i&&i.scrollIntoView({behavior:"smooth"})}},[e,t]),(0,se.jsxs)("div",{className:(0,eu.default)("flex flex-col relative min-h-24",t.length===0&&"items-center justify-center"),children:[t.map((i,a)=>i.flagKey?(0,se.jsxs)("div",{id:`feature-preview-${i.flagKey}`,children:[a>0&&(0,se.jsx)(Ei,{className:"my-4"}),(0,se.jsx)(Fm,{feature:i},i.flagKey)]},i.flagKey):!1),r?(0,se.jsx)(Sc,{}):t.length===0?(0,se.jsxs)("i",{className:"text-center",children:["No feature previews currently available.",(0,se.jsx)("br",{}),"Check back later!"]}):null]})}function Fm({feature:e}){let{activeFeedbackFlagKey:t,activeFeedbackFlagKeyLoading:r}=(0,tr.useValues)(Mr),{beginEarlyAccessFeatureFeedback:n,cancelEarlyAccessFeatureFeedback:i,updateEarlyAccessFeatureEnrollment:a,copyExternalFeaturePreviewLink:o}=(0,tr.useActions)(Mr),{submitEarlyAccessFeatureFeedback:s}=(0,tr.useAsyncActions)(Mr),{flagKey:l,enabled:c,name:u,description:d,documentationUrl:h}=e,g=t===l,[v,y]=(0,Fn.useState)("");return(0,se.jsxs)("div",{children:[(0,se.jsxs)("div",{className:"flex items-center justify-between",children:[(0,se.jsxs)("div",{className:"flex items-center gap-1",children:[(0,se.jsx)("h4",{className:"font-semibold mb-0",children:u}),(0,se.jsx)(Z,{icon:(0,se.jsx)(Cs,{}),size:"small",onClick:()=>o(l)})]}),(0,se.jsx)(Fi,{checked:c,onChange:I=>a(l,I)})]}),(0,se.jsx)("p",{className:"my-2",children:d||(0,se.jsx)("i",{children:"No description."})}),(0,se.jsxs)("div",{children:[g?null:(0,se.jsx)(st,{onClick:()=>n(l),children:"Give feedback"}),h&&(0,se.jsxs)(se.Fragment,{children:[" \u2022 ",(0,se.jsx)(st,{to:h,target:"_blank",children:"Learn more"})]})]}),g&&(0,se.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,se.jsx)(Oi,{autoFocus:!0,placeholder:`What's your experience with ${u} been like?`,className:"mt-2",value:v,onChange:I=>y(I),onKeyDown:I=>{I.key==="Enter"&&I.metaKey?a(l,c):I.key==="Escape"&&(i(),y(""),I.stopPropagation())}}),(0,se.jsxs)("div",{className:"flex items-center gap-2",children:[(0,se.jsx)(Z,{type:"secondary",onClick:()=>{i(),y("")},children:"Cancel"}),(0,se.jsx)(Z,{type:"primary",onClick:()=>{s(v).then(()=>{y("")})},loading:r,className:"flex-1",center:!0,children:"Submit feedback"})]})]})]})}var Sr=S(j()),nu=()=>{let{selectedTabOptions:e}=(0,ru.useValues)(Se);return(0,Sr.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,Sr.jsx)(Ie,{title:"Feature previews"}),(0,Sr.jsxs)("div",{className:"flex-1 p-3 overflow-y-auto space-y-4",children:[(0,Sr.jsx)(Zr,{type:"info",children:"Get early access to these upcoming features. Let us know what you think!"}),(0,Sr.jsx)(tu,{focusedFeatureFlagKey:e??void 0})]})]})};f();m();p();var iu=S(ie());var Ft=S(j());function au(){let{closeSidePanel:e}=(0,iu.useActions)(Se);return(0,Ft.jsxs)(Ft.Fragment,{children:[(0,Ft.jsxs)(Ie,{children:[(0,Ft.jsx)("div",{className:"flex-1"}),(0,Ft.jsx)(Z,{size:"small",sideIcon:(0,Ft.jsx)(He,{}),to:X.max(),onClick:()=>e(),tooltip:"Open as main focus",tooltipPlacement:"bottom"})]}),(0,Ft.jsx)(sl,{})]})}f();m();p();var Nn=S(ie());var ou=S(q());var Dt=S(j()),su=()=>{let{settings:e}=(0,Nn.useValues)(ja),{closeSidePanel:t,setSettings:r}=(0,Nn.useActions)(ja),n={...e,logicKey:"sidepanel"},{selectedSectionId:i,selectedLevel:a}=(0,Nn.useValues)(cl(n));return(0,ou.useEffect)(()=>{r({sectionId:i??void 0,settingLevelId:a})},[i,a]),(0,Dt.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,Dt.jsxs)(Ie,{children:[(0,Dt.jsxs)("span",{className:"flex-1 px-2 font-semibold text-base truncate",children:[ci(a)," settings"]}),(0,Dt.jsx)(Z,{size:"small",to:X.settings(e.sectionId??e.settingLevelId,e.settingId),onClick:()=>t(),sideIcon:(0,Dt.jsx)(He,{}),children:"All settings"})]}),(0,Dt.jsx)("div",{className:"flex-1 p-3 overflow-y-auto",children:(0,Dt.jsx)(ll,{hideSections:!0,...n})})]})};f();m();p();var cu=S(Zt()),Qi=S(ie());var lu=S(q());var Ge=S(j()),uu=e=>{let{status:t,statusPage:r}=(0,Qi.useValues)(Vi),n=r?.status.description?ci(r.status.description.toLowerCase()):null;return(0,Ge.jsx)(Rt,{title:n,placement:"left",children:(0,Ge.jsx)("span",{...e,children:(0,Ge.jsx)(ws,{content:t!=="operational"?"!":"\u2713",status:t.includes("outage")?"danger":t.includes("degraded")||t.includes("monitoring")?"warning":"success",children:(0,Ge.jsx)(Ws,{})})})})},du=()=>{let{closeSidePanel:e}=(0,Qi.useActions)(_r),[t,r]=(0,lu.useState)(!1);return(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsxs)(Ie,{children:[(0,Ge.jsx)("div",{className:"flex-1"}),(0,Ge.jsx)(Z,{size:"small",sideIcon:(0,Ge.jsx)(He,{}),targetBlank:!0,onClick:()=>{window.open(Ha,"_blank")?.focus(),e()},children:"Open in new tab"})]}),(0,Ge.jsxs)("div",{className:"relative flex-1 overflow-hidden",children:[(0,Ge.jsx)("iframe",{src:Ha,title:"Status",className:(0,cu.default)("w-full h-full",!t&&"hidden"),onLoad:()=>r(!0)}),!t&&(0,Ge.jsx)(Ka,{})]})]})};f();m();p();var vt=S(ie());var zp=S(q());f();m();p();var Dp=S(fu()),Bp=S(ie()),dt=S(q());f();m();p();var Mi="7.6.0";f();m();p();function Ze(){}f();m();p();f();m();p();function fd(e){return Object.prototype.toString.call(e).slice(8,-1)}function Jr(e,t){if(e===void 0||typeof e!="function")throw new Error("The render function is not valid (received type ".concat(fd(e),`).

`).concat(t))}f();m();p();f();m();p();f();m();p();var yh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pd=/[&<>"']/g,bh=RegExp(pd.source);function md(e){return e&&bh.test(e)?e.replace(pd,function(t){return yh[t]}):e}var Sh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},hd=/&(amp|quot|lt|gt|#39);/g,xh=RegExp(hd.source);function gd(e){return e&&xh.test(e)?e.replace(hd,function(t){return Sh[t]}):e}f();m();p();function Ro(e){"@babel/helpers - typeof";return Ro=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ro(e)}function Rh(e){return e===null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function wh(e){return Ro(e)==="object"&&e!==null}function vd(e){if(!wh(e)||Rh(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Tn(e){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tn(e)}function Ih(e){if(e==null)throw new TypeError("Cannot destructure "+e)}function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wo.apply(this,arguments)}function yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yd(Object(r),!0).forEach(function(n){bd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bd(e,t,r){return t=Ch(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ch(e){var t=Fh(e,"string");return Tn(t)==="symbol"?t:String(t)}function Fh(e,t){if(Tn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Tn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nr={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},we={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function Sd(e){return md(e).replace(new RegExp(nr.highlightPreTag,"g"),we.highlightPreTag).replace(new RegExp(nr.highlightPostTag,"g"),we.highlightPostTag)}function ta(e){return vd(e)&&typeof e.value!="string"?Object.keys(e).reduce(function(t,r){return Xr(Xr({},t),{},bd({},r,ta(e[r])))},{}):Array.isArray(e)?e.map(ta):Xr(Xr({},e),{},{value:Sd(e.value)})}function xd(e){return e.__escaped===void 0&&(e=e.map(function(t){var r=wo({},(Ih(t),t));return r._highlightResult&&(r._highlightResult=ta(r._highlightResult)),r._snippetResult&&(r._snippetResult=ta(r._snippetResult)),r}),e.__escaped=!0),e}function Rd(e){return e.map(function(t){return Xr(Xr({},t),{},{highlighted:Sd(t.highlighted)})})}function ra(e){var t=we.highlightPreTag,r=we.highlightPostTag;return e.map(function(n){return n.isHighlighted?t+n.value+r:n.value}).join("")}f();m();p();f();m();p();function wd(e,t,r){return e.state.isHierarchicalFacet(t)?e.state.isHierarchicalFacetRefined(t,r):e.state.isConjunctiveFacet(t)?e.state.isFacetRefined(t,r):e.state.isDisjunctiveFacetRefined(t,r)}function Id(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Id(Object(r),!0).forEach(function(n){Eh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Id(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eh(e,t,r){return t=Ah(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ah(e){var t=Ph(e,"string");return Yr(t)==="symbol"?t:String(t)}function Ph(e,t){if(Yr(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yr(e){"@babel/helpers - typeof";return Yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yr(e)}function Oh(e,t){return Uh(e)||kh(e,t)||Th(e,t)||Wh()}function Wh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Th(e,t){if(e){if(typeof e=="string")return Cd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cd(e,t)}}function Cd(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kh(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Uh(e){if(Array.isArray(e))return e}function Fd(e){var t=e.instantSearchInstance,r=e.helper,n=e.attribute,i=e.widgetType,a=function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var u=l[1],d=l[2],h=d===void 0?"Filter Applied":d,g=l[3],v=g===void 0?{}:g,y=l[0].split(":"),I=Oh(y,2),w=I[0],W=I[1],O=typeof n=="string"?n:n(u);l.length===1&&Yr(l[0])==="object"?t.sendEventToInsights(l[0]):w==="click"&&l.length>=2&&l.length<=4&&(wd(r,O,u)||t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:i,eventType:w,eventModifier:W,payload:Nh({eventName:h,index:r.getIndex(),filters:["".concat(O,":").concat(u)]},v),attribute:O}))};return a}f();m();p();f();m();p();function na(e){return btoa(encodeURIComponent(JSON.stringify(e)))}function Nd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Io(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nd(Object(r),!0).forEach(function(n){Zh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zh(e,t,r){return t=Vh(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vh(e){var t=jh(e,"string");return zr(t)==="symbol"?t:String(t)}function jh(e,t){if(zr(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lh(e,t){return Bh(e)||Dh(e,t)||Gh(e,t)||_h()}function _h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gh(e,t){if(e){if(typeof e=="string")return Ed(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ed(e,t)}}function Ed(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dh(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Bh(e){if(Array.isArray(e))return e}function zr(e){"@babel/helpers - typeof";return zr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zr(e)}function Qh(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,r=[],n=0;n<Math.ceil(e.length/t);n++)r.push(e.slice(n*t,(n+1)*t));return r}function Ad(e){var t=e.getIndex,r=e.widgetType,n=e.methodName,i=e.args,a=e.instantSearchInstance;if(i.length===1&&zr(i[0])==="object")return[i[0]];var o=i[0].split(":"),s=Lh(o,2),l=s[0],c=s[1],u=i[1],d=i[2],h=i[3]||{};if(!u)return[];if((l==="click"||l==="conversion")&&!d)return[];var g=Array.isArray(u)?u:[u];if(g.length===0)return[];var v=g[0].__queryID,y=Qh(g),I=y.map(function(W){return W.map(function(O){return O.objectID})}),w=y.map(function(W){return W.map(function(O){return O.__position})});return l==="view"?a.status!=="idle"?[]:y.map(function(W,O){return{insightsMethod:"viewedObjectIDs",widgetType:r,eventType:l,payload:Io({eventName:d||"Hits Viewed",index:t(),objectIDs:I[O]},h),hits:W,eventModifier:c}}):l==="click"?y.map(function(W,O){return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:r,eventType:l,payload:Io({eventName:d||"Hit Clicked",index:t(),queryID:v,objectIDs:I[O],positions:w[O]},h),hits:W,eventModifier:c}}):l==="conversion"?y.map(function(W,O){return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:r,eventType:l,payload:Io({eventName:d||"Hit Converted",index:t(),queryID:v,objectIDs:I[O]},h),hits:W,eventModifier:c}}):[]}function Pd(e){var t=e.instantSearchInstance,r=e.getIndex,n=e.widgetType,i={},a=void 0,o=function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=Ad({widgetType:n,getIndex:r,methodName:"sendEvent",args:c,instantSearchInstance:t});d.forEach(function(h){h.eventType==="click"&&h.eventModifier==="internal"&&i[h.eventType]||(i[h.eventType]=!0,t.sendEventToInsights(h))}),clearTimeout(a),a=setTimeout(function(){i={}},0)};return o}function Od(e){var t=e.getIndex,r=e.widgetType,n=e.instantSearchInstance,i=function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];var c=Ad({widgetType:r,getIndex:t,methodName:"bindEvent",args:s,instantSearchInstance:n});return c.length?"data-insights-event=".concat(na(c)):""};return i}f();m();p();f();m();p();function Qt(e){return e.$$type==="ais.index"}function ia(e,t){var r=e[t.getIndexId()]||{};t.getHelper().setState(t.getWidgetSearchParameters(t.getHelper().state,{uiState:r})),t.getWidgets().filter(Qt).forEach(function(n){return ia(e,n)})}f();m();p();var Mh=Promise.resolve();function qr(e){var t=null,r=!1,n=function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];t===null&&(t=Mh.then(function(){if(t=null,r){r=!1;return}e.apply(void 0,o)}))};return n.wait=function(){if(t===null)throw new Error("The deferred function should be called before calling `wait()`");return t},n.cancel=function(){t!==null&&(r=!0)},n}f();m();p();function Hh(e){var t=e.name,r=e.connector,n=r===void 0?!1:r;return["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",n?"#connector":""].join("")}function Nt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(function(i){return Hh(i)}).join(", ");return function(i){return[i,"See documentation: ".concat(n)].filter(Boolean).join(`

`)}}f();m();p();function Wd(e,t){for(var r,n=0;n<e.length;n++)if(r=e[n],t(r,n,e))return r}f();m();p();function Td(e,t){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}f();m();p();function kd(e){if(e.transporter){var t=e.transporter,r=t.headers,n=t.queryParameters,i="x-algolia-application-id",a="x-algolia-api-key",o=r[i]||n[i],s=r[a]||n[a];return[o,s]}else return[e.applicationID,e.apiKey]}f();m();p();function aa(e){var t=we.highlightPostTag,r=we.highlightPreTag,n=e.split(r),i=n.shift(),a=i?[{value:i,isHighlighted:!1}]:[];return n.forEach(function(o){var s=o.split(t);a.push({value:s[0],isHighlighted:!0}),s[1]!==""&&a.push({value:s[1],isHighlighted:!1})}),a}f();m();p();var Jh=new RegExp(/\w/i);function Ud(e,t){var r,n,i=e[t],a=((r=e[t+1])===null||r===void 0?void 0:r.isHighlighted)||!0,o=((n=e[t-1])===null||n===void 0?void 0:n.isHighlighted)||!0;return!Jh.test(gd(i.value))&&o===a?o:i.isHighlighted}f();m();p();function ir(e,t){var r=Array.isArray(t)?t:t.split(".");return r.reduce(function(n,i){return n&&n[i]},e)}f();m();p();function kn(e){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kn(e)}function Zd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zd(Object(r),!0).forEach(function(n){Xh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xh(e,t,r){return t=Yh(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yh(e){var t=zh(e,"string");return kn(t)==="symbol"?t:String(t)}function zh(e,t){if(kn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(kn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jd(e,t,r){return e.map(function(n,i){return Vd(Vd({},n),{},{__position:r*t+i+1})})}f();m();p();function Un(e){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Un(e)}function Ld(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _d(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ld(Object(r),!0).forEach(function(n){qh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ld(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qh(e,t,r){return t=$h(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $h(e){var t=Kh(e,"string");return Un(t)==="symbol"?t:String(t)}function Kh(e,t){if(Un(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Un(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gd(e,t){return t?e.map(function(r){return _d(_d({},r),{},{__queryID:t})}):e}f();m();p();function Vn(e){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(e)}function eg(e,t){return ig(e)||ng(e,t)||rg(e,t)||tg()}function tg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rg(e,t){if(e){if(typeof e=="string")return Dd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dd(e,t)}}function Dd(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ng(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function ig(e){if(Array.isArray(e))return e}function Bd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bd(Object(r),!0).forEach(function(n){Md(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Md(e,t,r){return t=ag(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ag(e){var t=og(e,"string");return Vn(t)==="symbol"?t:String(t)}function og(e,t){if(Vn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Vn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hd(e,t){if(t&&!((!("transporter"in e)||e._cacheHydrated)&&(!e._useCache||typeof e.addAlgoliaAgent!="function"))){var r=Object.keys(t).map(function(o){var s=t[o],l=s.state,c=s.requestParams,u=s.results;return u.map(function(d){return Zn({indexName:l.index||d.index},c||d.params?{params:Qd(c||sg(d.params))}:{})})}),n=Object.keys(t).reduce(function(o,s){return o.concat(t[s].results)},[]);if("transporter"in e&&!e._cacheHydrated){e._cacheHydrated=!0;var i=e.search;e.search=function(o){for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];var u=o.map(function(d){return Zn(Zn({},d),{},{params:Qd(d.params)})});return e.transporter.responsesCache.get({method:"search",args:[u].concat(l)},function(){return i.apply(void 0,[o].concat(l))})},e.transporter.responsesCache.set({method:"search",args:r},{results:n})}if(!("transporter"in e)){var a="/1/indexes/*/queries_body_".concat(JSON.stringify({requests:r}));e.cache=Zn(Zn({},e.cache),{},Md({},a,JSON.stringify({results:Object.keys(t).map(function(o){return t[o].results})})))}}}function sg(e){return e.split("&").reduce(function(t,r){var n=r.split("="),i=eg(n,2),a=i[0],o=i[1];return t[a]=o?decodeURIComponent(o):"",t},{})}function Qd(e){var t=function(i){return Object.prototype.toString.call(i)==="[object Object]"||Object.prototype.toString.call(i)==="[object Array]"},r=function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];var l=0;return i.replace(/%s/g,function(){return encodeURIComponent(o[l++])})};return Object.keys(e).map(function(n){return r("%s=%s",n,t(e[n])?JSON.stringify(e[n]):e[n])}).join("&")}f();m();p();function Jd(e){return e!==Object(e)}function Co(e,t){if(e===t)return!0;if(Jd(e)||Jd(t)||typeof e=="function"||typeof t=="function")return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(!(i in t)||!Co(e[i],t[i]))return!1}return!0}f();m();p();f();m();p();function Xd(e){return e.filter(function(t,r,n){return n.indexOf(t)===r})}function jn(e){"@babel/helpers - typeof";return jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jn(e)}var cg=["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"];function Yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yd(Object(r),!0).forEach(function(n){lg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lg(e,t,r){return t=ug(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ug(e){var t=dg(e,"string");return jn(t)==="symbol"?t:String(t)}function dg(e,t){if(jn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fg(e,t){if(e==null)return{};var r=pg(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pg(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var mg=function(t,r){var n=r.facets,i=r.disjunctiveFacets,a=r.facetsRefinements,o=r.facetsExcludes,s=r.disjunctiveFacetsRefinements,l=r.numericRefinements,c=r.tagRefinements,u=r.hierarchicalFacets,d=r.hierarchicalFacetsRefinements,h=r.ruleContexts,g=fg(r,cg);return t.setQueryParameters(g)},hg=function(t,r){return r.facets.reduce(function(n,i){return n.addFacet(i)},t)},gg=function(t,r){return r.disjunctiveFacets.reduce(function(n,i){return n.addDisjunctiveFacet(i)},t)},vg=function(t,r){return t.setQueryParameters({hierarchicalFacets:r.hierarchicalFacets.reduce(function(n,i){var a=Td(n,function(s){return s.name===i.name});if(a===-1)return n.concat(i);var o=n.slice();return o.splice(a,1,i),o},t.hierarchicalFacets)})},yg=function(t,r){return r.tagRefinements.reduce(function(n,i){return n.addTagRefinement(i)},t)},bg=function(t,r){return t.setQueryParameters({facetsRefinements:Et(Et({},t.facetsRefinements),r.facetsRefinements)})},Sg=function(t,r){return t.setQueryParameters({facetsExcludes:Et(Et({},t.facetsExcludes),r.facetsExcludes)})},xg=function(t,r){return t.setQueryParameters({disjunctiveFacetsRefinements:Et(Et({},t.disjunctiveFacetsRefinements),r.disjunctiveFacetsRefinements)})},Rg=function(t,r){return t.setQueryParameters({numericRefinements:Et(Et({},t.numericRefinements),r.numericRefinements)})},wg=function(t,r){return t.setQueryParameters({hierarchicalFacetsRefinements:Et(Et({},t.hierarchicalFacetsRefinements),r.hierarchicalFacetsRefinements)})},Ig=function(t,r){var n=Xd([].concat(t.ruleContexts).concat(r.ruleContexts).filter(Boolean));return n.length>0?t.setQueryParameters({ruleContexts:n}):t},zd=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.reduce(function(i,a){var o=wg(i,a),s=vg(o,a),l=yg(s,a),c=Rg(l,a),u=xg(c,a),d=Sg(u,a),h=bg(d,a),g=gg(h,a),v=Ig(g,a),y=hg(v,a);return mg(y,a)})};f();m();p();function Rr(e,t,r){var n=t.getHelper();return{uiState:r,helper:n,parent:t,instantSearchInstance:e,state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:e.status==="stalled"},status:e.status,error:e.error}}function Fo(e,t){var r=t.getResults(),n=t.getHelper();return{helper:n,parent:t,instantSearchInstance:e,results:r,scopedResults:t.getScopedResults(),state:r?r._state:n.state,renderState:e.renderState,templatesConfig:e.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:e.status==="stalled"},status:e.status,error:e.error}}f();m();p();function qd(e){for(var t=e.getParent(),r=[e.getHelper().state];t!==null;)r=[t.getHelper().state].concat(r),t=t.getParent();return r}f();m();p();function Ln(e){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(e)}function $d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$d(Object(r),!0).forEach(function(n){Cg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$d(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cg(e,t,r){return t=Fg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fg(e){var t=Ng(e,"string");return Ln(t)==="symbol"?t:String(t)}function Ng(e,t){if(Ln(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ln(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sa(e){return e.some(function(t){return t.isHighlighted})?e.map(function(t,r){return oa(oa({},t),{},{isHighlighted:!Ud(e,r)})}):e.map(function(t){return oa(oa({},t),{},{isHighlighted:!1})})}f();m();p();function gt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fallback:function(){}},r=t.fallback;return typeof window>"u"?r():e({window})}f();m();p();var ar=S(q(),1);f();m();p();function No(e){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},No(e)}var Kd=Object.prototype.hasOwnProperty;function At(e,t,r){if(r!=null&&r(e,t))return!0;var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&At(e[i],t[i],r););return i===-1}if(!n||No(e)==="object"){i=0;for(n in e)if(Kd.call(e,n)&&++i&&!Kd.call(t,n)||!(n in t)||!At(e[n],t[n],r))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}f();m();p();f();m();p();var ef=S(ea(),1);function Eo(e){var t,r,n;return new ef.default.SearchResults(e,[{query:(t=e.query)!==null&&t!==void 0?t:"",page:(r=e.page)!==null&&r!==void 0?r:0,hitsPerPage:(n=e.hitsPerPage)!==null&&n!==void 0?n:20,hits:[],nbHits:0,nbPages:0,params:"",exhaustiveNbHits:!0,exhaustiveFacetsCount:!0,processingTimeMS:0,index:e.index}],{__isArtificial:!0})}function _n(e){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_n(e)}function tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tf(Object(r),!0).forEach(function(n){Eg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eg(e,t,r){return t=Ag(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ag(e){var t=Pg(e,"string");return _n(t)==="symbol"?t:String(t)}function Pg(e,t){if(_n(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_n(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nf(e){var t=e.getHelper(),r=e.getResults()||Eo(t.state),n=e.getScopedResults().map(function(i){var a=i.indexId===e.getIndexId()?r:Eo(i.helper.state);return rf(rf({},i),{},{results:i.results||a})});return{results:r,scopedResults:n}}f();m();p();var of=S(q(),1);f();m();p();function ca(e,t){if(!e)throw new Error("Invariant failed")}f();m();p();var af=S(q(),1),la=(0,af.createContext)(null);function sf(){var e=(0,of.useContext)(la);return ca(e!==null,"The <Index> component must be used within <InstantSearch>."),e}f();m();p();var lf=S(q(),1);f();m();p();var cf=S(q(),1),ua=(0,cf.createContext)(null);function da(){var e=(0,lf.useContext)(ua);return ca(e!==null,"Hooks must be used inside the <InstantSearch> component.\n\nThey are not compatible with the `react-instantsearch-core@6.x` and `react-instantsearch-dom` packages, so make sure to use the <InstantSearch> component from `react-instantsearch-core@7.x`."),e}f();m();p();var ff=S(q(),1);f();m();p();var uf=S(q(),1),df=(0,uf.createContext)(null);function fa(){return(0,ff.useContext)(df)}f();m();p();var mf=S(q(),1);function Og(e,t){return Ug(e)||kg(e,t)||Tg(e,t)||Wg()}function Wg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tg(e,t){if(e){if(typeof e=="string")return pf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pf(e,t)}}function pf(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kg(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Ug(e){if(Array.isArray(e))return e}function Ao(e){var t=(0,mf.useState)(function(){return e}),r=Og(t,2),n=r[0],i=r[1];return At(n,e)||i(e),n}f();m();p();var wr=S(q(),1);f();m();p();var Zg=S(q(),1),Vg="use",Po=Zg[Vg];f();m();p();var pa=S(q(),1),hf=typeof window<"u"?pa.useLayoutEffect:pa.useEffect;f();m();p();var yf=S(q(),1);f();m();p();var gf=S(q(),1),vf=(0,gf.createContext)(null);function ma(){return(0,yf.useContext)(vf)}function bf(e){var t,r=e.widget,n=e.parentIndex,i=e.props,a=e.shouldSsr,o=ma(),s=(0,wr.useRef)(i);(0,wr.useEffect)(function(){s.current=i},[i]);var l=(0,wr.useRef)(r);(0,wr.useEffect)(function(){l.current=r},[r]);var c=(0,wr.useRef)(null),u=a&&!n.getWidgets().includes(r),d=da();if(hf(function(){var g=l.current;if(!c.current)u||n.addWidgets([r]);else{clearTimeout(c.current);var v=At(i,s.current);v||(n.removeWidgets([g]),n.addWidgets([r]))}return function(){c.current=setTimeout(function(){d._schedule(function(){d._preventWidgetCleanup||n.removeWidgets([g])})})}},[n,r,u,d,i]),(u||(o==null||(t=o.current)===null||t===void 0?void 0:t.status)==="pending")&&n.addWidgets([r]),typeof window>"u"&&o!==null&&o!==void 0&&o.current&&r.$$type!=="ais.index"){var h;Po(o.current),r.$$type!=="ais.dynamicWidgets"&&(h=d.helper)!==null&&h!==void 0&&h.lastResults&&Po(o.current)}}function Gn(e){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(e)}var jg=["instantSearchInstance","widgetParams"],Lg=["widgetParams"];function _g(e,t){return Qg(e)||Bg(e,t)||Dg(e,t)||Gg()}function Gg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dg(e,t){if(e){if(typeof e=="string")return Sf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sf(e,t)}}function Sf(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bg(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Qg(e){if(Array.isArray(e))return e}function xf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xf(Object(r),!0).forEach(function(n){Mg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mg(e,t,r){return t=Hg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hg(e){var t=Jg(e,"string");return Gn(t)==="symbol"?t:String(t)}function Jg(e,t){if(Gn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wf(e,t){if(e==null)return{};var r=Xg(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Xg(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function $r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=fa(),i=da(),a=sf(),o=Ao(t),s=Ao(r),l=(0,ar.useRef)(!0),c=(0,ar.useRef)(null),u=(0,ar.useRef)(i.status),d=(0,ar.useMemo)(function(){var I=e(function(w,W){if(W){l.current=!0;return}if(l.current){var O=w.instantSearchInstance,B=w.widgetParams,J=wf(w,jg);(!At(J,c.current,function($,Q){return $?.constructor===Function&&Q?.constructor===Function})||O.status!==u.current)&&(y(J),c.current=J,u.current=O.status)}},function(){l.current=!1});return Rf(Rf({},I(o)),s)},[e,o,s]),h=(0,ar.useState)(function(){if(d.getWidgetRenderState){var I,w=a.getHelper(),W=a.getWidgetUiState({})[a.getIndexId()];w.state=((I=d.getWidgetSearchParameters)===null||I===void 0?void 0:I.call(d,w.state,{uiState:W}))||w.state;var O=nf(a),B=O.results,J=O.scopedResults,$=d.getWidgetRenderState({helper:w,parent:a,instantSearchInstance:i,results:B,scopedResults:J,state:w.state,renderState:i.renderState,templatesConfig:i.templatesConfig,createURL:a.createURL,searchMetadata:{isSearchStalled:i.status==="stalled"},status:i.status,error:i.error}),Q=$.widgetParams,Y=wf($,Lg);return Y}return{}}),g=_g(h,2),v=g[0],y=g[1];return bf({widget:d,parentIndex:a,props:o,shouldSsr:!!n}),v}f();m();p();var Kr=S(ea(),1);function Mn(e){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mn(e)}var Yg=["initialSearchParameters"];function If(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?If(Object(r),!0).forEach(function(n){en(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):If(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function en(e,t,r){return t=zg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zg(e){var t=qg(e,"string");return Mn(t)==="symbol"?t:String(t)}function qg(e,t){if(Mn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cf(e){return tv(e)||ev(e)||Kg(e)||$g()}function $g(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kg(e,t){if(e){if(typeof e=="string")return Wo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wo(e,t)}}function ev(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tv(e){if(Array.isArray(e))return Wo(e)}function Wo(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rv(e,t){if(e==null)return{};var r=nv(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nv(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var Dn=Nt({name:"index-widget"});function Ff(e,t){var r=t.state,n=t.isPageReset,i=t._uiState;r!==e.state&&(e.state=r,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:n,_uiState:i}))}function Bn(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e.reduce(function(n,i){return Qt(i)||!i.getWidgetUiState&&!i.getWidgetState?n:i.getWidgetUiState?i.getWidgetUiState(n,t):i.getWidgetState(n,t)},r)}function Qn(e,t){var r=t.initialSearchParameters,n=rv(t,Yg);return e.filter(function(i){return!Qt(i)}).reduce(function(i,a){return a.getWidgetSearchParameters?a.getWidgetSearchParameters(i,n):i},r)}function Nf(e){var t=e.filter(Qt);t.length!==0&&t.forEach(function(r){var n=r.getHelper();Ff(n,{state:n.state.resetPage(),isPageReset:!0}),Nf(r.getWidgets())})}function Ef(e){var t=e.filter(Qt);return t.reduce(function(r,n){return r.concat.apply(r,[{indexId:n.getIndexId(),results:n.getResults(),helper:n.getHelper()}].concat(Cf(Ef(n.getWidgets()))))},[])}var iv=function(t){if(t===void 0||t.indexName===void 0)throw new Error(Dn("The `indexName` option is required."));var r=t.indexName,n=t.indexId,i=n===void 0?r:n,a=[],o={},s=null,l=null,c=null,u=null,d=null;return{$$type:"ais.index",$$widgetType:"ais.index",getIndexName:function(){return r},getIndexId:function(){return i},getHelper:function(){return c},getResults:function(){var g;return(g=u)!==null&&g!==void 0&&g.lastResults?(u.lastResults._state=c.state,u.lastResults):null},getPreviousState:function(){return d},getScopedResults:function(){var g=this.getParent(),v=g?g.getWidgets():[this];return Ef(v)},getParent:function(){return l},createURL:function(g){return typeof g=="function"?s._createURL(en({},i,g(o))):s._createURL(en({},i,Bn(a,{searchParameters:g,helper:c})))},getWidgets:function(){return a},addWidgets:function(g){var v=this;if(!Array.isArray(g))throw new Error(Dn("The `addWidgets` method expects an array of widgets."));if(g.some(function(y){return typeof y.init!="function"&&typeof y.render!="function"}))throw new Error(Dn("The widget definition expects a `render` and/or an `init` method."));return a=a.concat(g),s&&g.length&&(Ff(c,{state:Qn(a,{uiState:o,initialSearchParameters:c.state}),_uiState:o}),g.forEach(function(y){if(y.getRenderState){var I=y.getRenderState(s.renderState[v.getIndexId()]||{},Rr(s,v,s._initialUiState));Oo({renderState:I,instantSearchInstance:s,parent:v})}}),g.forEach(function(y){y.init&&y.init(Rr(s,v,s._initialUiState))}),s.scheduleSearch()),this},removeWidgets:function(g){var v=this;if(!Array.isArray(g))throw new Error(Dn("The `removeWidgets` method expects an array of widgets."));if(g.some(function(w){return typeof w.dispose!="function"}))throw new Error(Dn("The widget definition expects a `dispose` method."));if(a=a.filter(function(w){return g.indexOf(w)===-1}),s&&g.length){var y=g.reduce(function(w,W){var O=W.dispose({helper:c,state:w,parent:v});return O||w},c.state),I=s.future.preserveSharedStateOnUnmount?Qn(a,{uiState:o,initialSearchParameters:new Kr.default.SearchParameters({index:this.getIndexName()})}):Qn(a,{uiState:Bn(a,{searchParameters:y,helper:c}),initialSearchParameters:y});o=Bn(a,{searchParameters:I,helper:c}),c.setState(I),a.length&&s.scheduleSearch()}return this},init:function(g){var v=this,y,I=g.instantSearchInstance,w=g.parent,W=g.uiState;if(c===null){s=I,l=w,o=W[i]||{};var O=I.mainHelper,B=Qn(a,{uiState:o,initialSearchParameters:new Kr.default.SearchParameters({index:r})});c=(0,Kr.default)({},B.index,B),c.search=function(){return I.onStateChange?(I.onStateChange({uiState:I.mainIndex.getWidgetUiState({}),setUiState:function(Y){return I.setUiState(Y,!1)}}),O):O.search()},c.searchWithoutTriggeringOnStateChange=function(){return O.search()},c.searchForFacetValues=function(Q,Y,K,_){var z=c.state.setQueryParameters(_);return O.searchForFacetValues(Q,Y,K,z)},u=O.derive(function(){return zd.apply(void 0,[O.state].concat(Cf(qd(v))))});var J=(y=I._initialResults)===null||y===void 0?void 0:y[this.getIndexId()];if(J){var $=new Kr.default.SearchResults(new Kr.default.SearchParameters(J.state),J.results);u.lastResults=$,c.lastResults=$}c.on("change",function(Q){var Y=Q.isPageReset;Y&&Nf(a)}),u.on("search",function(){I.scheduleStalledRender()}),u.on("result",function(Q){var Y=Q.results;I.scheduleRender(),c.lastResults=Y,d=Y?._state}),a.forEach(function(Q){if(Q.getRenderState){var Y=Q.getRenderState(I.renderState[v.getIndexId()]||{},Rr(I,v,W));Oo({renderState:Y,instantSearchInstance:I,parent:v})}}),a.forEach(function(Q){Q.init&&Q.init(Rr(I,v,W))}),c.on("change",function(Q){var Y=Q.state,K=Q._uiState;o=Bn(a,{searchParameters:Y,helper:c},K||{}),I.onStateChange||I.onInternalStateChange()}),J&&I.scheduleRender()}},render:function(g){var v=this,y=g.instantSearchInstance;y.status==="error"&&!y.mainHelper.hasPendingRequests()&&d&&c.setState(d);var I=this.getResults()?a:a.filter(Qt);I.forEach(function(w){if(w.getRenderState){var W=w.getRenderState(y.renderState[v.getIndexId()]||{},Fo(y,v));Oo({renderState:W,instantSearchInstance:y,parent:v})}}),I.forEach(function(w){w.render&&w.render(Fo(y,v))})},dispose:function(){var g=this,v,y;a.forEach(function(I){I.dispose&&I.dispose({helper:c,state:c.state,parent:g})}),s=null,l=null,(v=c)===null||v===void 0||v.removeAllListeners(),c=null,(y=u)===null||y===void 0||y.detach(),u=null},getWidgetUiState:function(g){return a.filter(Qt).reduce(function(v,y){return y.getWidgetUiState(v)},Pt(Pt({},g),{},en({},i,Pt(Pt({},g[i]),o))))},getWidgetState:function(g){return this.getWidgetUiState(g)},getWidgetSearchParameters:function(g,v){var y=v.uiState;return Qn(a,{uiState:y,initialSearchParameters:g})},refreshUiState:function(){o=Bn(a,{searchParameters:this.getHelper().state,helper:this.getHelper()},o)},setIndexUiState:function(g){var v=typeof g=="function"?g(o):g;s.setUiState(function(y){return Pt(Pt({},y),{},en({},i,v))})}}},Af=iv;function Oo(e){var t=e.renderState,r=e.instantSearchInstance,n=e.parent,i=n?n.getIndexId():r.mainIndex.getIndexId();r.renderState=Pt(Pt({},r.renderState),{},en({},i,Pt(Pt({},r.renderState[i]),t)))}f();m();p();var Of=S(q(),1);function av(e,t){return lv(e)||cv(e,t)||sv(e,t)||ov()}function ov(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sv(e,t){if(e){if(typeof e=="string")return Pf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pf(e,t)}}function Pf(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cv(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function lv(e){if(Array.isArray(e))return e}function Wf(){var e=(0,Of.useReducer)(function(n){return n+1},0),t=av(e,2),r=t[1];return r}f();m();p();var Uf=S(q(),1);f();m();p();var Tf=S(q(),1),kf=(0,Tf.createContext)(null);function Zf(){return(0,Uf.useContext)(kf)}f();m();p();var es=S(q(),1);f();m();p();f();m();p();var vp=S(Hi(),1),qo=S(ea(),1);f();m();p();f();m();p();f();m();p();f();m();p();var uv="ais",or=function(t){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.descendantName,i=r.modifierName,a=n?"-".concat(n):"",o=i?"--".concat(i):"";return"".concat(uv,"-").concat(t).concat(a).concat(o)}};var dv=or("Highlight");function ha(e){var t=e.attribute,r=e.highlightedTagName,n=r===void 0?"mark":r,i=e.hit,a=e.cssClasses,o=a===void 0?{}:a,s=ir(i._highlightResult,t),l=s||{},c=l.value,u=c===void 0?"":c,d=dv({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):"");return u.replace(new RegExp(we.highlightPreTag,"g"),"<".concat(n,' class="').concat(d,'">')).replace(new RegExp(we.highlightPostTag,"g"),"</".concat(n,">"))}f();m();p();var fv=or("ReverseHighlight");function ga(e){var t=e.attribute,r=e.highlightedTagName,n=r===void 0?"mark":r,i=e.hit,a=e.cssClasses,o=a===void 0?{}:a,s=ir(i._highlightResult,t),l=s||{},c=l.value,u=c===void 0?"":c,d=fv({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):""),h=ra(sa(aa(u)));return h.replace(new RegExp(we.highlightPreTag,"g"),"<".concat(n,' class="').concat(d,'">')).replace(new RegExp(we.highlightPostTag,"g"),"</".concat(n,">"))}f();m();p();var pv=or("Snippet");function va(e){var t=e.attribute,r=e.highlightedTagName,n=r===void 0?"mark":r,i=e.hit,a=e.cssClasses,o=a===void 0?{}:a,s=ir(i._snippetResult,t),l=s||{},c=l.value,u=c===void 0?"":c,d=pv({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):"");return u.replace(new RegExp(we.highlightPreTag,"g"),"<".concat(n,' class="').concat(d,'">')).replace(new RegExp(we.highlightPostTag,"g"),"</".concat(n,">"))}f();m();p();var mv=or("ReverseSnippet");function ya(e){var t=e.attribute,r=e.highlightedTagName,n=r===void 0?"mark":r,i=e.hit,a=e.cssClasses,o=a===void 0?{}:a,s=ir(i._snippetResult,t),l=s||{},c=l.value,u=c===void 0?"":c,d=mv({descendantName:"highlighted"})+(o.highlighted?" ".concat(o.highlighted):""),h=ra(sa(aa(u)));return h.replace(new RegExp(we.highlightPreTag,"g"),"<".concat(n,' class="').concat(d,'">')).replace(new RegExp(we.highlightPostTag,"g"),"</".concat(n,">"))}f();m();p();function To(e){"@babel/helpers - typeof";return To=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},To(e)}function hv(e){var t=e.method,r=e.payload;if(To(r)!=="object")throw new Error("The insights helper expects the payload to be an object.");var n;try{n=na(r)}catch{throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(t,'" data-insights-payload="').concat(n,'"')}function ba(e,t){return hv({method:e,payload:t})}f();m();p();function ko(e){"@babel/helpers - typeof";return ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ko(e)}var gv="_ALGOLIA";function vv(e){if(!((typeof document>"u"?"undefined":ko(document))!=="object"||typeof document.cookie!="string"))for(var t="".concat(e,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}}function Uo(){return vv(gv)}function Jn(e){"@babel/helpers - typeof";return Jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(e)}function Vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vf(Object(r),!0).forEach(function(n){yv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yv(e,t,r){return t=bv(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bv(e){var t=Sv(e,"string");return Jn(t)==="symbol"?t:String(t)}function Sv(e,t){if(Jn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hn(e,t){return wv(e)||Rv(e,t)||Lf(e,t)||xv()}function xv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rv(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function wv(e){if(Array.isArray(e))return e}function Iv(e){return Nv(e)||Fv(e)||Lf(e)||Cv()}function Cv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lf(e,t){if(e){if(typeof e=="string")return Vo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vo(e,t)}}function Fv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nv(e){if(Array.isArray(e))return Vo(e)}function Vo(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _f="2.13.0",Ev="https://cdn.jsdelivr.net/npm/search-insights@".concat(_f,"/dist/search-insights.min.js");function jo(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.insightsClient,r=e.insightsInitParams,n=e.onEvent,i=e.$$internal,a=i===void 0?!1:i,o=e.$$automatic,s=o===void 0?!1:o,l=t;!t&&t!==null&&gt(function(u){var d=u.window,h=d.AlgoliaAnalyticsObject||"aa";typeof h=="string"&&(l=d[h]),l||(d.AlgoliaAnalyticsObject=h,d[h]||(d[h]=function(){d[h].queue||(d[h].queue=[]);for(var g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];d[h].queue.push(v)},d[h].version=_f,d[h].shouldAddScript=!0),l=d[h])});var c=l||Ze;return function(u){var d=u.instantSearchInstance,h=d.middleware.filter(function(_){return _.instance.$$type==="ais.insights"&&_.instance.$$internal}).map(function(_){return _.creator});d.unuse.apply(d,Iv(h));var g=kd(d.client),v=Hn(g,2),y=v[0],I=v[1],w=void 0,W=void 0,O=void 0,B=void 0,J=c.queue;if(Array.isArray(J)){var $=["setUserToken","setAuthenticatedUserToken"].map(function(_){var z=Wd(J.slice().reverse(),function(it){var at=Hn(it,1),bt=at[0];return bt===_})||[],Ae=Hn(z,2),Ke=Ae[1];return Ke}),Q=Hn($,2);w=Q[0],W=Q[1]}c("getUserToken",null,function(_,z){O=Zo(z)}),c("getAuthenticatedUserToken",null,function(_,z){B=Zo(z)}),(r||!jf(c))&&c("init",Ir({appId:y,apiKey:I,partial:!0},r));var Y,K;return{$$type:"ais.insights",$$internal:a,$$automatic:s,onStateChange:function(){},subscribe:function(){if(c.shouldAddScript){var z="[insights middleware]: could not load search-insights.js. Please load it manually following https://alg.li/insights-init";try{var Ae=document.createElement("script");Ae.async=!0,Ae.src=Ev,Ae.onerror=function(){d.emit("error",new Error(z))},document.body.appendChild(Ae),c.shouldAddScript=!1}catch{c.shouldAddScript=!1,d.emit("error",new Error(z))}}},started:function(){c("addAlgoliaAgent","insights-middleware"),K=d.mainHelper,Y={userToken:K.state.userToken,clickAnalytics:K.state.clickAnalytics},s||K.overrideStateWithoutTriggeringChangeEvent(Ir(Ir({},K.state),{},{clickAnalytics:!0})),a||d.scheduleSearch();var z=function(G){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ce=Zo(G);if(!ce)return;var Pe=K.state.userToken;function ot(){K.overrideStateWithoutTriggeringChangeEvent(Ir(Ir({},K.state),{},{userToken:ce})),Pe&&Pe!==G&&d.scheduleSearch()}fe?ot():setTimeout(ot,0)},Ae=Uo();Ae&&z(Ae,!0);function Ke(ee,G,fe){z(ee,!0),G&&c("setUserToken",G),fe&&c("setAuthenticatedUserToken",fe)}var it=B||O,at=W||w;it?Ke(it,O,B):at&&Ke(at,w,W),c("onUserTokenChange",z,{immediate:!0}),c("onAuthenticatedUserTokenChange",function(ee){ee||c("getUserToken",null,function(G,fe){z(fe)}),z(ee)},{immediate:!0});var bt=c;jf(c)&&(bt=function(G,fe){var ce={headers:{"X-Algolia-Application-Id":y,"X-Algolia-API-Key":I}};return c(G,fe,ce)}),d.sendEventToInsights=function(ee){n?n(ee,bt):ee.insightsMethod&&(ee.payload.algoliaSource=["instantsearch"],s&&ee.payload.algoliaSource.push("instantsearch-automatic"),ee.eventModifier==="internal"&&ee.payload.algoliaSource.push("instantsearch-internal"),bt(ee.insightsMethod,ee.payload))}},unsubscribe:function(){c("onUserTokenChange",void 0),c("onAuthenticatedUserTokenChange",void 0),d.sendEventToInsights=Ze,K&&Y&&(K.overrideStateWithoutTriggeringChangeEvent(Ir(Ir({},K.state),Y)),d.scheduleSearch())}}}}function jf(e){var t=(e.version||"").split(".").map(Number),r=Hn(t,2),n=r[0],i=r[1],a=n>=3,o=n===2&&i>=6,s=n===1&&i>=10;return a||o||s}function Zo(e){if(e)return typeof e=="number"?e.toString():e}f();m();p();function Gf(e,t,r){var n=Rr(t,t.mainIndex,t._initialUiState);e.forEach(function(i){var a={};if(i.getWidgetRenderState){var o=i.getWidgetRenderState(n);o&&o.widgetParams&&(a=o.widgetParams)}var s=Object.keys(a).filter(function(l){return a[l]!==void 0});r.widgets.push({type:i.$$type,widgetType:i.$$widgetType,params:s}),i.$$type==="ais.index"&&Gf(i.getWidgets(),t,r)})}function Df(){return gt(function(e){var t,r,n=e.window;return((t=n.navigator)===null||t===void 0||(r=t.userAgent)===null||r===void 0?void 0:r.indexOf("Algolia Crawler"))>-1},{fallback:function(){return!1}})}function Bf(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.$$internal,r=t===void 0?!1:t;return function(n){var i=n.instantSearchInstance,a={widgets:[]},o=document.createElement("meta"),s=document.querySelector("head");return o.name="instantsearch:widgets",{$$type:"ais.metadata",$$internal:r,onStateChange:function(){},subscribe:function(){setTimeout(function(){var c=i.client;a.ua=c.transporter&&c.transporter.userAgent?c.transporter.userAgent.value:c._ua,Gf(i.mainIndex.getWidgets(),i,a),i.middleware.forEach(function(u){return a.widgets.push({middleware:!0,type:u.instance.$$type,internal:u.instance.$$internal})}),o.content=JSON.stringify(a),s.appendChild(o)},0)},started:function(){},unsubscribe:function(){o.remove()}}}}f();m();p();f();m();p();var Qo=S(rp(),1);function Yn(e){"@babel/helpers - typeof";return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(e)}function oy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function np(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ap(n.key),n)}}function sy(e,t,r){return t&&np(e.prototype,t),r&&np(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qe(e,t,r){return t=ap(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ap(e){var t=cy(e,"string");return Yn(t)==="symbol"?t:String(t)}function cy(e,t){if(Yn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ip=function(t){t&&(window.document.title=t)},ly=function(){function e(t){var r=this,n=t.windowTitle,i=t.writeDelay,a=i===void 0?400:i,o=t.createURL,s=t.parseURL,l=t.getLocation,c=t.start,u=t.dispose,d=t.push,h=t.cleanUrlOnDispose;oy(this,e),Qe(this,"$$type","ais.browser"),Qe(this,"windowTitle",void 0),Qe(this,"writeDelay",void 0),Qe(this,"_createURL",void 0),Qe(this,"parseURL",void 0),Qe(this,"getLocation",void 0),Qe(this,"writeTimer",void 0),Qe(this,"_onPopState",void 0),Qe(this,"inPopState",!1),Qe(this,"isDisposed",!1),Qe(this,"latestAcknowledgedHistory",0),Qe(this,"_start",void 0),Qe(this,"_dispose",void 0),Qe(this,"_push",void 0),Qe(this,"_cleanUrlOnDispose",void 0),this.windowTitle=n,this.writeTimer=void 0,this.writeDelay=a,this._createURL=o,this.parseURL=s,this.getLocation=l,this._start=c,this._dispose=u,this._push=d,this._cleanUrlOnDispose=typeof h>"u"?!0:h,gt(function(g){var v=g.window,y=r.windowTitle&&r.windowTitle(r.read());ip(y),r.latestAcknowledgedHistory=v.history.length})}return sy(e,[{key:"read",value:function(){return this.parseURL({qsModule:Qo.default,location:this.getLocation()})}},{key:"write",value:function(r){var n=this;gt(function(i){var a=i.window,o=n.createURL(r),s=n.windowTitle&&n.windowTitle(r);n.writeTimer&&clearTimeout(n.writeTimer),n.writeTimer=setTimeout(function(){ip(s),n.shouldWrite(o)&&(n._push?n._push(o):a.history.pushState(r,s||"",o),n.latestAcknowledgedHistory=a.history.length),n.inPopState=!1,n.writeTimer=void 0},n.writeDelay)})}},{key:"onUpdate",value:function(r){var n=this;this._start&&this._start(function(){r(n.read())}),this._onPopState=function(){n.writeTimer&&(clearTimeout(n.writeTimer),n.writeTimer=void 0),n.inPopState=!0,r(n.read())},gt(function(i){var a=i.window;a.addEventListener("popstate",n._onPopState)})}},{key:"createURL",value:function(r){var n=this._createURL({qsModule:Qo.default,routeState:r,location:this.getLocation()});return n}},{key:"dispose",value:function(){var r=this;this._dispose&&this._dispose(),this.isDisposed=!0,gt(function(n){var i=n.window;r._onPopState&&i.removeEventListener("popstate",r._onPopState)}),this.writeTimer&&clearTimeout(this.writeTimer),this._cleanUrlOnDispose&&this.write({})}},{key:"start",value:function(){this.isDisposed=!1}},{key:"shouldWrite",value:function(r){var n=this;return gt(function(i){var a=i.window,o=!(n.isDisposed&&n.latestAcknowledgedHistory!==a.history.length);return!n.inPopState&&o&&r!==a.location.href})}}]),e}();function Mo(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.createURL,r=t===void 0?function(v){var y=v.qsModule,I=v.routeState,w=v.location,W=w.protocol,O=w.hostname,B=w.port,J=B===void 0?"":B,$=w.pathname,Q=w.hash,Y=y.stringify(I),K=J===""?"":":".concat(J);return Y?"".concat(W,"//").concat(O).concat(K).concat($,"?").concat(Y).concat(Q):"".concat(W,"//").concat(O).concat(K).concat($).concat(Q)}:t,n=e.parseURL,i=n===void 0?function(v){var y=v.qsModule,I=v.location;return y.parse(I.search.slice(1),{arrayLimit:99})}:n,a=e.writeDelay,o=a===void 0?400:a,s=e.windowTitle,l=e.getLocation,c=l===void 0?function(){return gt(function(v){var y=v.window;return y.location},{fallback:function(){throw new Error("You need to provide `getLocation` to the `history` router in environments where `window` does not exist.")}})}:l,u=e.start,d=e.dispose,h=e.push,g=e.cleanUrlOnDispose;return new ly({createURL:r,parseURL:i,writeDelay:o,windowTitle:s,getLocation:c,start:u,dispose:d,push:h,cleanUrlOnDispose:g})}f();m();p();function zn(e){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(e)}var uy=["configure"];function op(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?op(Object(r),!0).forEach(function(n){Ho(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):op(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ho(e,t,r){return t=dy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dy(e){var t=fy(e,"string");return zn(t)==="symbol"?t:String(t)}function fy(e,t){if(zn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function py(e,t){if(e==null)return{};var r=my(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function my(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function sp(e){var t=e.configure,r=py(e,uy);return r}function Jo(){return{$$type:"ais.simple",stateToRoute:function(t){return Object.keys(t).reduce(function(r,n){return xa(xa({},r),{},Ho({},n,sp(t[n])))},{})},routeToState:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(r,n){return xa(xa({},r),{},Ho({},n,sp(t[n])))},{})}}}function qn(e){"@babel/helpers - typeof";return qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(e)}function cp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cp(Object(r),!0).forEach(function(n){lp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lp(e,t,r){return t=hy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hy(e){var t=gy(e,"string");return qn(t)==="symbol"?t:String(t)}function gy(e,t){if(qn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(qn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var up=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.router,n=r===void 0?Mo():r,i=t.stateMapping,a=i===void 0?Jo():i,o=t.$$internal,s=o===void 0?!1:o;return function(l){var c=l.instantSearchInstance;function u(g){var v=c.mainIndex.getWidgets().length===0?c._initialUiState:c.mainIndex.getWidgetUiState({}),y=Object.keys(g).reduce(function(w,W){return Ra(Ra({},w),{},lp({},W,g[W]))},v),I=a.stateToRoute(y);return n.createURL(I)}c._createURL=u;var d=void 0,h=c._initialUiState;return{$$type:"ais.router({router:".concat(n.$$type||"__unknown__",", stateMapping:").concat(a.$$type||"__unknown__","})"),$$internal:s,onStateChange:function(v){var y=v.uiState,I=a.stateToRoute(y);(d===void 0||!Co(d,I))&&(n.write(I),d=I)},subscribe:function(){c._initialUiState=Ra(Ra({},h),a.routeToState(n.read())),n.onUpdate(function(v){c.mainIndex.getWidgets().length>0&&c.setUiState(a.routeToState(v))})},started:function(){var v;(v=n.start)===null||v===void 0||v.call(n)},unsubscribe:function(){n.dispose()}}}};f();m();p();f();m();p();function dp(e,t){return e.toLocaleString(t)}function $n(e){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(e)}function fp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fp(Object(r),!0).forEach(function(n){vy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vy(e,t,r){return t=yy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yy(e){var t=by(e,"string");return $n(t)==="symbol"?t:String(t)}function by(e,t){if($n(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($n(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xo(e){var t=e.numberLocale;return{formatNumber:function(n,i){return dp(Number(i(n)),t)},highlight:function(n,i){try{var a=JSON.parse(n);return i(ha(Mt(Mt({},a),{},{hit:this})))}catch{throw new Error(`
The highlight helper expects a JSON object of the format:
{ "attribute": "name", "highlightedTagName": "mark" }`)}},reverseHighlight:function(n,i){try{var a=JSON.parse(n);return i(ga(Mt(Mt({},a),{},{hit:this})))}catch{throw new Error(`
  The reverseHighlight helper expects a JSON object of the format:
  { "attribute": "name", "highlightedTagName": "mark" }`)}},snippet:function(n,i){try{var a=JSON.parse(n);return i(va(Mt(Mt({},a),{},{hit:this})))}catch{throw new Error(`
The snippet helper expects a JSON object of the format:
{ "attribute": "name", "highlightedTagName": "mark" }`)}},reverseSnippet:function(n,i){try{var a=JSON.parse(n);return i(ya(Mt(Mt({},a),{},{hit:this})))}catch{throw new Error(`
  The reverseSnippet helper expects a JSON object of the format:
  { "attribute": "name", "highlightedTagName": "mark" }`)}},insights:function(n,i){try{var a=JSON.parse(n),o=a.method,s=a.payload;return i(ba(o,Mt({objectIDs:[this.objectID]},s)))}catch{throw new Error(`
The insights helper expects a JSON object of the format:
{ "method": "method-name", "payload": { "eventName": "name of the event" } }`)}}}}f();m();p();var pp="4.65.0";function rn(e){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rn(e)}function mp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mp(Object(r),!0).forEach(function(n){ue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gp(n.key),n)}}function xy(e,t,r){return t&&hp(e.prototype,t),r&&hp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ry(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zo(e,t)}function zo(e,t){return zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zo(e,t)}function wy(e){var t=Cy();return function(){var n=wa(e),i;if(t){var a=wa(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Iy(this,i)}}function Iy(e,t){if(t&&(rn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return le(e)}function le(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wa(e){return wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wa(e)}function ue(e,t,r){return t=gp(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gp(e){var t=Fy(e,"string");return rn(t)==="symbol"?t:String(t)}function Fy(e,t){if(rn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wt=Nt({name:"instantsearch"});function Ny(){return"#"}var $o={preserveSharedStateOnUnmount:!1,persistHierarchicalRootCount:!1},Ey=function(e){Ry(r,e);var t=wy(r);function r(n){var i,a;Sy(this,r),a=t.call(this),ue(le(a),"client",void 0),ue(le(a),"indexName",void 0),ue(le(a),"insightsClient",void 0),ue(le(a),"onStateChange",null),ue(le(a),"future",void 0),ue(le(a),"helper",void 0),ue(le(a),"mainHelper",void 0),ue(le(a),"mainIndex",void 0),ue(le(a),"started",void 0),ue(le(a),"templatesConfig",void 0),ue(le(a),"renderState",{}),ue(le(a),"_stalledSearchDelay",void 0),ue(le(a),"_searchStalledTimer",void 0),ue(le(a),"_initialUiState",void 0),ue(le(a),"_initialResults",void 0),ue(le(a),"_createURL",void 0),ue(le(a),"_searchFunction",void 0),ue(le(a),"_mainHelperSearch",void 0),ue(le(a),"_insights",void 0),ue(le(a),"middleware",[]),ue(le(a),"sendEventToInsights",void 0),ue(le(a),"status","idle"),ue(le(a),"error",void 0),ue(le(a),"scheduleSearch",qr(function(){a.started&&a.mainHelper.search()})),ue(le(a),"scheduleRender",qr(function(){var Ae,Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;(Ae=a.mainHelper)!==null&&Ae!==void 0&&Ae.hasPendingRequests()||(clearTimeout(a._searchStalledTimer),a._searchStalledTimer=null,Ke&&(a.status="idle",a.error=void 0)),a.mainIndex.render({instantSearchInstance:le(a)}),a.emit("render")})),ue(le(a),"onInternalStateChange",qr(function(){var Ae=a.mainIndex.getWidgetUiState({});a.middleware.forEach(function(Ke){var it=Ke.instance;it.onStateChange({uiState:Ae})})})),a.setMaxListeners(100);var o=n.indexName,s=o===void 0?"":o,l=n.numberLocale,c=n.initialUiState,u=c===void 0?{}:c,d=n.routing,h=d===void 0?null:d,g=n.insights,v=g===void 0?void 0:g,y=n.searchFunction,I=n.stalledSearchDelay,w=I===void 0?200:I,W=n.searchClient,O=W===void 0?null:W,B=n.insightsClient,J=B===void 0?null:B,$=n.onStateChange,Q=$===void 0?null:$,Y=n.future,K=Y===void 0?Yo(Yo({},$o),n.future||{}):Y;if(O===null)throw new Error(Wt("The `searchClient` option is required."));if(typeof O.search!="function")throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if(typeof O.addAlgoliaAgent=="function"&&O.addAlgoliaAgent("instantsearch.js (".concat(pp,")")),J&&typeof J!="function")throw new Error(Wt("The `insightsClient` option should be a function."));if(a.client=O,a.future=K,a.insightsClient=J,a.indexName=s,a.helper=null,a.mainHelper=null,a.mainIndex=Af({indexName:s}),a.onStateChange=Q,a.started=!1,a.templatesConfig={helpers:Xo({numberLocale:l}),compileOptions:{}},a._stalledSearchDelay=w,a._searchStalledTimer=null,a._createURL=Ny,a._initialUiState=u,a._initialResults=null,a._insights=v,y&&(a._searchFunction=y),a.sendEventToInsights=Ze,h){var _=typeof h=="boolean"?{}:h;_.$$internal=!0,a.use(up(_))}if(v){var z=typeof v=="boolean"?{}:v;z.$$internal=!0,a.use(jo(z))}return Df()&&a.use(Bf({$$internal:!0})),a}return xy(r,[{key:"_isSearchStalled",get:function(){return this.status==="stalled"}},{key:"use",value:function(){for(var i=this,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o.map(function(c){var u=Yo({$$type:"__unknown__",$$internal:!1,subscribe:Ze,started:Ze,unsubscribe:Ze,onStateChange:Ze},c({instantSearchInstance:i}));return i.middleware.push({creator:c,instance:u}),u});return this.started&&l.forEach(function(c){c.subscribe(),c.started()}),this}},{key:"unuse",value:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return this.middleware.filter(function(s){return a.includes(s.creator)}).forEach(function(s){return s.instance.unsubscribe()}),this.middleware=this.middleware.filter(function(s){return!a.includes(s.creator)}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(i){return this.addWidgets([i])}},{key:"addWidgets",value:function(i){if(!Array.isArray(i))throw new Error(Wt("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(i.some(function(a){return typeof a.init!="function"&&typeof a.render!="function"}))throw new Error(Wt("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(i),this}},{key:"removeWidget",value:function(i){return this.removeWidgets([i])}},{key:"removeWidgets",value:function(i){if(!Array.isArray(i))throw new Error(Wt("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(i.some(function(a){return typeof a.dispose!="function"}))throw new Error(Wt("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(i),this}},{key:"start",value:function(){var i=this;if(this.started)throw new Error(Wt("The `start` method has already been called once."));var a=this.mainHelper||(0,qo.default)(this.client,this.indexName,void 0,{persistHierarchicalRootCount:this.future.persistHierarchicalRootCount});if(a.search=function(){return i.status="loading",i.scheduleRender(!1),a.searchOnlyWithDerivedHelpers()},this._searchFunction){var o={search:function(){return new Promise(Ze)}};this._mainHelperSearch=a.search.bind(a),a.search=function(){var l=i.mainIndex.getHelper(),c=(0,qo.default)(o,l.state.index,l.state);return c.once("search",function(u){var d=u.state;l.overrideStateWithoutTriggeringChangeEvent(d),i._mainHelperSearch()}),c.on("change",function(u){var d=u.state;l.setState(d)}),i._searchFunction(c),a}}if(a.on("error",function(l){var c=l.error;if(!(c instanceof Error)){var u=c;c=Object.keys(u).reduce(function(d,h){return d[h]=u[h],d},new Error(u.message))}c.error=c,i.error=c,i.status="error",i.scheduleRender(!1),i.emit("error",c)}),this.mainHelper=a,this.middleware.forEach(function(l){var c=l.instance;c.subscribe()}),this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this._initialResults){Hd(this.client,this._initialResults);var s=this.scheduleSearch;this.scheduleSearch=qr(Ze),qr(function(){i.scheduleSearch=s})()}else this.mainIndex.getWidgets().length>0&&this.scheduleSearch();this.helper=this.mainIndex.getHelper(),this.started=!0,this.middleware.forEach(function(l){var c=l.instance;c.started()}),typeof this._insights>"u"&&a.derivedHelpers[0].once("result",function(){var l=i.mainIndex.getScopedResults().some(function(c){var u=c.results;return u?._automaticInsights});l&&i.use(jo({$$internal:!0,$$automatic:!0}))})}},{key:"dispose",value:function(){var i;this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),(i=this.mainHelper)===null||i===void 0||i.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(a){var o=a.instance;o.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var i=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){i.status="stalled",i.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this.mainHelper)throw new Error(Wt("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var s=typeof i=="function"?i(this.mainIndex.getWidgetUiState({})):i;this.onStateChange&&o?this.onStateChange({uiState:s,setUiState:function(c){ia(typeof c=="function"?c(s):c,a.mainIndex),a.scheduleSearch(),a.onInternalStateChange()}}):(ia(s,this.mainIndex),this.scheduleSearch(),this.onInternalStateChange())}},{key:"getUiState",value:function(){return this.started&&this.mainIndex.refreshUiState(),this.mainIndex.getWidgetUiState({})}},{key:"createURL",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.started)throw new Error(Wt("The `start` method needs to be called before `createURL`."));return this._createURL(i)}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(Wt("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}]),r}(vp.default),yp=Ey;var sr=S(q(),1),Ep=S(Rp(),1);function Kn(e){"@babel/helpers - typeof";return Kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(e)}function wp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ip(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wp(Object(r),!0).forEach(function(n){jy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jy(e,t,r){return t=Ly(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ly(e){var t=_y(e,"string");return Kn(t)==="symbol"?t:String(t)}function _y(e,t){if(Kn(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cp=["react (".concat(sr.version,")"),"react-instantsearch (".concat(Mi,")"),"react-instantsearch-core (".concat(Mi,")")],Fp="react-instantsearch-server (".concat(Mi,")"),Gy=function(t){return t?"next.js (".concat(t,")"):null};function Ap(e){var t=Wf(),r=fa(),n=Zf(),i=ma(),a=n?.initialResults,o=(0,sr.useRef)(e),s=r||a||i,l=(0,sr.useRef)(null);if(n&&(l=n.ssrSearchRef),l.current===null){var c=new yp(e);c._schedule=function(I){c._schedule.queue.push(I),clearTimeout(c._schedule.timer),c._schedule.timer=setTimeout(function(){c._schedule.queue.forEach(function(w){w()}),c._schedule.queue=[]},0)},c._schedule.queue=[],s&&(c._initialResults=a||{}),Np(e.searchClient,[].concat(Cp,[r&&Fp,Gy(Qy())])),s&&c.start(),r&&r.notifyServer({search:c}),Dy(e.routing),By(!!i),l.current=c}{var u=l.current,d=o.current;if(d.indexName!==e.indexName&&(u.helper.setIndex(e.indexName||"").search(),o.current=e),d.searchClient!==e.searchClient&&(Np(e.searchClient,[].concat(Cp,[r&&Fp])),u.mainHelper.setClient(e.searchClient).search(),o.current=e),d.onStateChange!==e.onStateChange&&(u.onStateChange=e.onStateChange,o.current=e),d.searchFunction!==e.searchFunction&&(u._searchFunction=e.searchFunction,o.current=e),d.stalledSearchDelay!==e.stalledSearchDelay){var h;u._stalledSearchDelay=(h=e.stalledSearchDelay)!==null&&h!==void 0?h:200,o.current=e}At(d.future,e.future)||(u.future=Ip(Ip({},$o),e.future),o.current=e)}var g=(0,sr.useRef)(null),v=(0,Ep.useSyncExternalStore)((0,sr.useCallback)(function(){var y=l.current;return g.current===null?y.started||(y.start(),t()):(clearTimeout(g.current),y._preventWidgetCleanup=!1),function(){function I(){y.dispose()}clearTimeout(y._schedule.timer),g.current=setTimeout(I),y._preventWidgetCleanup=!0}},[t]),function(){return l.current},function(){return l.current});return v}function Np(e,t){typeof e.addAlgoliaAgent=="function"&&t.filter(Boolean).forEach(function(r){e.addAlgoliaAgent(r)})}function Dy(e){if(0)var t,r}function By(e){var t}function Qy(){var e,t;return typeof window<"u"&&((e=window.next)===null||e===void 0?void 0:e.version)||(typeof b<"u"?(t=b.env)===null||t===void 0?void 0:t.NEXT_RUNTIME:void 0)}var My=["children"];function Hy(e,t){if(e==null)return{};var r=Jy(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jy(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Pp(e){var t=e.children,r=Hy(e,My),n=Ap(r);return n.started?es.default.createElement(ua.Provider,{value:n},es.default.createElement(la.Provider,{value:n.mainIndex},t)):null}f();m();p();f();m();p();function ei(e){"@babel/helpers - typeof";return ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ei(e)}function Op(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Op(Object(r),!0).forEach(function(n){Wp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Op(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wp(e,t,r){return t=Xy(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xy(e){var t=Yy(e,"string");return ei(t)==="symbol"?t:String(t)}function Yy(e,t){if(ei(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ei(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zy=Nt({name:"hits",connector:!0}),qy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ze;return Jr(t,zy()),function(n){var i=n||{},a=i.escapeHTML,o=a===void 0?!0:a,s=i.transformItems,l=s===void 0?function(d){return d}:s,c,u;return{$$type:"ais.hits",init:function(h){t(cr(cr({},this.getWidgetRenderState(h)),{},{instantSearchInstance:h.instantSearchInstance}),!0)},render:function(h){var g=this.getWidgetRenderState(h);t(cr(cr({},g),{},{instantSearchInstance:h.instantSearchInstance}),!1),g.sendEvent("view:internal",g.hits)},getRenderState:function(h,g){return cr(cr({},h),{},{hits:this.getWidgetRenderState(g)})},getWidgetRenderState:function(h){var g=h.results,v=h.helper,y=h.instantSearchInstance;if(c||(c=Pd({instantSearchInstance:y,getIndex:function(){return v.getIndex()},widgetType:this.$$type})),u||(u=Od({getIndex:function(){return v.getIndex()},widgetType:this.$$type,instantSearchInstance:y})),!g)return{hits:[],results:void 0,sendEvent:c,bindEvent:u,widgetParams:n};o&&g.hits.length>0&&(g.hits=xd(g.hits));var I=jd(g.hits,g.page,g.hitsPerPage),w=Gd(I,g.queryID),W=l(w,{results:g});return{hits:W,results:g,sendEvent:c,bindEvent:u,widgetParams:n}},dispose:function(h){var g=h.state;return r(),o?g.setQueryParameters(Object.keys(nr).reduce(function(v,y){return cr(cr({},v),{},Wp({},y,void 0))},{})):g},getWidgetSearchParameters:function(h){return o?h.setQueryParameters(nr):h}}}},Tp=qy;function ts(e,t){return $r(Tp,e,t)}f();m();p();f();m();p();function ri(e){"@babel/helpers - typeof";return ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ri(e)}var $y=["name","escapedValue"],Ky=["escapedValue","value"];function kp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kp(Object(r),!0).forEach(function(n){ti(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ti(e,t,r){return t=eb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eb(e){var t=tb(e,"string");return ri(t)==="symbol"?t:String(t)}function tb(e,t){if(ri(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ri(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Up(e,t){if(e==null)return{};var r=rb(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rb(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}var Ia=Nt({name:"refinement-list",connector:!0}),Zp=["isRefined","count:desc","name:asc"],nb=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ze;return Jr(t,Ia()),function(n){var i=n||{},a=i.attribute,o=i.operator,s=o===void 0?"or":o,l=i.limit,c=l===void 0?10:l,u=i.showMore,d=u===void 0?!1:u,h=i.showMoreLimit,g=h===void 0?20:h,v=i.sortBy,y=v===void 0?Zp:v,I=i.escapeFacetValues,w=I===void 0?!0:I,W=i.transformItems,O=W===void 0?function(ee){return ee}:W;if(!a)throw new Error(Ia("The `attribute` option is required."));if(!/^(and|or)$/.test(s))throw new Error(Ia('The `operator` must one of: `"and"`, `"or"` (got "'.concat(s,'").')));if(d===!0&&g<=c)throw new Error(Ia("`showMoreLimit` should be greater than `limit`."));var B=function(G){var fe=G.name,ce=G.escapedValue,Pe=Up(G,$y);return me(me({},Pe),{},{value:ce,label:fe,highlighted:fe})},J,$=[],Q=!0,Y,K,_=!1,z=function(){};function Ae(){z()}function Ke(ee,G){return function(){_=!_,G.render(ee)}}function it(){return _?g:c}var at=function(){return function(){}},bt=function(G,fe){return function(ce){return function(Pe){var ot=ce.instantSearchInstance,zt=ce.results;if(Pe===""&&$)t(me(me({},fe.getWidgetRenderState(me(me({},ce),{},{results:J}))),{},{instantSearchInstance:ot}),!1);else{var pt={highlightPreTag:w?nr.highlightPreTag:we.highlightPreTag,highlightPostTag:w?nr.highlightPostTag:we.highlightPostTag};G.searchForFacetValues(a,Pe,Math.min(it(),100),pt).then(function(C){var F=w?Rd(C.facetHits):C.facetHits,N=O(F.map(function(E){var T=E.escapedValue,L=E.value,M=Up(E,Ky);return me(me({},M),{},{value:T,label:L})}),{results:zt});t(me(me({},fe.getWidgetRenderState(me(me({},ce),{},{results:J}))),{},{items:N,canToggleShowMore:!1,canRefine:!0,isFromSearch:!0,instantSearchInstance:ot}),!1)})}}}};return{$$type:"ais.refinementList",init:function(G){t(me(me({},this.getWidgetRenderState(G)),{},{instantSearchInstance:G.instantSearchInstance}),!0)},render:function(G){t(me(me({},this.getWidgetRenderState(G)),{},{instantSearchInstance:G.instantSearchInstance}),!1)},getRenderState:function(G,fe){return me(me({},G),{},{refinementList:me(me({},G.refinementList),{},ti({},a,this.getWidgetRenderState(fe)))})},getWidgetRenderState:function(G){var fe=this,ce=G.results,Pe=G.state,ot=G.createURL,zt=G.instantSearchInstance,pt=G.helper,C=[],F=[];if((!K||!Y||!at)&&(K=Fd({instantSearchInstance:zt,helper:pt,attribute:a,widgetType:this.$$type}),Y=function(ne){K("click:internal",ne),pt.toggleFacetRefinement(a,ne).search()},at=bt(pt,this)),ce){var N=ce.getFacetValues(a,{sortBy:y,facetOrdering:y===Zp});F=N&&Array.isArray(N)?N:[],C=O(F.slice(0,it()).map(B),{results:ce});var E=Pe.maxValuesPerFacet,T=it();Q=E>T?F.length<=T:F.length<T,J=ce,$=C,G.results&&(z=Ke(G,this))}var L=at&&at(G),M=_&&$.length>c,V=d&&!Q,ae=M||V;return{createURL:function(ne){return ot(function(Oe){return fe.getWidgetUiState(Oe,{searchParameters:Pe.resetPage().toggleFacetRefinement(a,ne),helper:pt})})},items:C,refine:Y,searchForItems:L,isFromSearch:!1,canRefine:C.length>0,widgetParams:n,isShowingMore:_,canToggleShowMore:ae,toggleShowMore:Ae,sendEvent:K,hasExhaustiveItems:Q}},dispose:function(G){var fe=G.state;r();var ce=fe.setQueryParameter("maxValuesPerFacet",void 0);return s==="and"?ce.removeFacet(a):ce.removeDisjunctiveFacet(a)},getWidgetUiState:function(G,fe){var ce=fe.searchParameters,Pe=s==="or"?ce.getDisjunctiveRefinements(a):ce.getConjunctiveRefinements(a);return ib(me(me({},G),{},{refinementList:me(me({},G.refinementList),{},ti({},a,Pe))}),a)},getWidgetSearchParameters:function(G,fe){var ce=fe.uiState,Pe=s==="or";if(G.isHierarchicalFacet(a)||Pe&&G.isConjunctiveFacet(a)||!Pe&&G.isDisjunctiveFacet(a))return G;var ot=ce.refinementList&&ce.refinementList[a],zt=Pe?G.addDisjunctiveFacet(a).removeDisjunctiveFacetRefinement(a):G.addFacet(a).removeFacetRefinement(a),pt=zt.maxValuesPerFacet||0,C=Math.max(pt,d?g:c),F=zt.setQueryParameter("maxValuesPerFacet",C);if(!ot){var N=Pe?"disjunctiveFacetsRefinements":"facetsRefinements";return F.setQueryParameters(ti({},N,me(me({},F[N]),{},ti({},a,[]))))}return ot.reduce(function(E,T){return Pe?E.addDisjunctiveFacetRefinement(a,T):E.addFacetRefinement(a,T)},F)}}}};function ib(e,t){return e.refinementList&&((!e.refinementList[t]||e.refinementList[t].length===0)&&delete e.refinementList[t],Object.keys(e.refinementList).length===0&&delete e.refinementList),e}var Vp=nb;function rs(e,t){return $r(Vp,e,t)}f();m();p();f();m();p();function ni(e){"@babel/helpers - typeof";return ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(e)}function jp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jp(Object(r),!0).forEach(function(n){ab(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ab(e,t,r){return t=ob(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ob(e){var t=sb(e,"string");return ni(t)==="symbol"?t:String(t)}function sb(e,t){if(ni(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ni(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cb=Nt({name:"search-box",connector:!0}),lb=function(t,r){return r(t)},ub=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ze;return Jr(t,cb()),function(n){var i=n||{},a=i.queryHook,o=a===void 0?lb:a,s,l;return{$$type:"ais.searchBox",init:function(u){var d=u.instantSearchInstance;t(lr(lr({},this.getWidgetRenderState(u)),{},{instantSearchInstance:d}),!0)},render:function(u){var d=u.instantSearchInstance;t(lr(lr({},this.getWidgetRenderState(u)),{},{instantSearchInstance:d}),!1)},dispose:function(u){var d=u.state;return r(),d.setQueryParameter("query",void 0)},getRenderState:function(u,d){return lr(lr({},u),{},{searchBox:this.getWidgetRenderState(d)})},getWidgetRenderState:function(u){var d=u.helper,h=u.instantSearchInstance,g=u.state;return s||(s=function(y){o(y,function(I){return d.setQuery(I).search()})},l=function(){d.setQuery("").search()}),{query:g.query||"",refine:s,clear:l,widgetParams:n,isSearchStalled:h.status==="stalled"}},getWidgetUiState:function(u,d){var h=d.searchParameters,g=h.query||"";return g===""||u&&u.query===g?u:lr(lr({},u),{},{query:g})},getWidgetSearchParameters:function(u,d){var h=d.uiState;return u.setQueryParameter("query",h.query||"")}}}},Lp=ub;function _p(e,t){return $r(Lp,e,t)}var de=S(j()),db=(0,Dp.default)("7VNQB5W0TX","37f41fd37095bc85af76ed4edc85eb5a"),fb=({key:e,index:t,style:r,hits:n,activeOption:i})=>{let{slug:a,title:o,type:s,resolved:l}=n[t];return(0,de.jsx)("li",{style:r,role:"listitem",tabIndex:-1,className:"p-1 border-b last:border-b-0",children:(0,de.jsx)(Z,{active:i===t,to:`https://posthog.com/${a}`,className:"[&_>span>span]:flex-col [&_>span>span]:items-start [&_>span>span]:space-y-1",children:(0,de.jsxs)("span",{children:[(0,de.jsxs)("span",{className:"flex space-x-2 items-center",children:[(0,de.jsx)("p",{className:"m-0 font-bold font-sans line-clamp-1",children:o}),s==="question"&&l&&(0,de.jsx)(mi,{className:"text-success size-4 flex-shrink-0"})]}),(0,de.jsxs)("p",{className:"text-xs m-0 opacity-80 font-normal font-sans line-clamp-1",children:["/",a]})]})})},e)},pb=({activeOption:e})=>{let{hits:t}=ts();return(0,de.jsx)("ol",{role:"listbox",className:"list-none m-0 p-0 h-[80vh]",children:(0,de.jsx)(Pc,{children:({height:r,width:n})=>(0,de.jsx)(Wc,{scrollToIndex:e,width:n,height:r,rowCount:t.length,rowHeight:50,rowRenderer:i=>fb({...i,hits:t,activeOption:e})})})})},mb=({value:e,setValue:t})=>{let{refine:r}=_p();return(0,de.jsx)(wc,{onChange:i=>{t(i),r(i)},value:e,type:"search",fullWidth:!0,placeholder:"Search..."})},ur=[{type:"all",label:"All"},{type:"docs",label:"Docs"},{type:"question",label:"Questions"},{type:"tutorial",label:"Tutorials"}],hb=({type:e,label:t,active:r,onClick:n})=>{let{refine:i,items:a}=rs({attribute:"type"}),o=e!=="all"&&a.find(({value:l})=>l===e)?.count,s=l=>{l.stopPropagation(),n(e)};return(0,dt.useEffect)(()=>{i(e)},[]),(0,de.jsx)("button",{className:"p-0 cursor-pointer bg-surface-primary",onClick:s,children:(0,de.jsxs)(wt,{size:"medium",type:r?"primary":"option",children:[(0,de.jsx)("span",{children:t}),e!=="all"&&(0,de.jsxs)("span",{children:["(",o??0,")"]})]})})},gb=({activeTag:e,setActiveTag:t})=>{let r=n=>{t(n)};return(0,de.jsx)("ul",{className:"list-none m-0 p-0 flex space-x-1 mt-1 mb-0.5 pb-1.5 border-b px-2",children:ur.map(n=>{let{type:i}=n;return(0,de.jsx)("li",{children:(0,de.jsx)(hb,{...n,active:e===i,onClick:r})},i)})})},vb=()=>{let{openSidePanel:e}=(0,Bp.useActions)(Se),{hits:t}=ts(),{items:r,refine:n}=rs({attribute:"type"}),i=(0,dt.useRef)(null),[a,o]=(0,dt.useState)(""),[s,l]=(0,dt.useState)(),[c,u]=(0,dt.useState)("all"),[d,h]=(0,dt.useState)(!1),g=v=>{switch(v.key){case"Enter":{s!==void 0&&e("docs",`https://posthog.com/${t[s].slug}`);break}case"Escape":{h(!1);break}case"ArrowDown":{v.preventDefault(),l(y=>y===void 0||y>=t.length-1?0:y+1);break}case"ArrowUp":{v.preventDefault(),l(y=>{if(y!==void 0)return y<=0?t.length-1:y-1});break}case"Tab":case"ArrowRight":{v.preventDefault();let y=ur.findIndex(({type:I})=>I===c);u(ur[y>=ur.length-1?0:y+1].type);break}case"ArrowLeft":{v.preventDefault();let y=ur.findIndex(({type:I})=>I===c);u(ur[y<=0?ur.length-1:y-1].type)}}};return(0,dt.useEffect)(()=>{h(!!a),l(0)},[a]),(0,dt.useEffect)(()=>{l(0),c==="all"?r.filter(({value:y})=>ur.some(({type:I})=>I===y)).forEach(({value:y,isRefined:I})=>{I||n(y)}):(r.forEach(({value:v,isRefined:y})=>{y&&n(v)}),n(c))},[c]),(0,dt.useEffect)(()=>{let v=y=>{i?.current?.contains(y.target)||h(!1)};return window.addEventListener("click",v),()=>{window.removeEventListener("click",v)}},[]),(0,de.jsxs)("div",{className:"relative",ref:i,onKeyDown:g,children:[(0,de.jsx)(mb,{value:a,setValue:o}),d&&(0,de.jsxs)("div",{className:"absolute w-full bg-surface-primary z-50 border rounded-lg shadow-xl mt-0.5",children:[(0,de.jsx)(gb,{activeTag:c,setActiveTag:u}),(0,de.jsx)(pb,{activeOption:s})]})]})};function ns(){return(0,de.jsx)(Pp,{searchClient:db,indexName:"prod_posthog_com",children:(0,de.jsx)(vb,{})})}f();m();p();var Nr=S(ie());var nt=S(q());f();m();p();var Tt=S(ie()),Mp=S(hn());f();m();p();var Qp={async sendMessage(e){let t=sessionStorage.getItem("max_session_id");t||(t=crypto.randomUUID(),sessionStorage.setItem("max_session_id",t));let r=await ut.createResponse("/max/chat/",{message:e,role:"user",session_id:t});if(!r.ok)throw new Error("Failed to send message to Max");let n=await r.json();return{content:n.content,rate_limits:n.rate_limits}}};var is=(0,Tt.kea)([(0,Tt.path)(["scenes","navigation","sidepanel","sidePanelMaxAILogic"]),(0,Tt.actions)({submitMessage:e=>({message:e}),clearChatHistory:!0,appendAssistantMessage:e=>({content:e}),setSearchingThinking:e=>({isSearching:e}),setRateLimited:(e,t)=>({isLimited:e,limitType:t}),setServerError:e=>({isError:e}),retryAfter:(e,t,r)=>({message:e,retryAfter:t,limitType:r})}),(0,Tt.reducers)({retryAttempts:[0,{submitMessage:()=>0,retryAfter:e=>e+1,setRateLimited:(e,{isLimited:t})=>t?e:0}],retryAfter:[null,{retryAfter:(e,{retryAfter:t})=>t}],rateLimitType:[null,{setRateLimited:(e,{limitType:t})=>t||null,retryAfter:(e,{limitType:t})=>t||null}],currentMessages:[[],{submitMessage:(e,{message:t})=>t.trim()?[...e,{role:"user",content:t,timestamp:new Date().toISOString()}]:e,appendAssistantMessage:(e,{content:t})=>[...e,{role:"assistant",content:t,timestamp:new Date().toISOString(),isRateLimited:t.includes("Rate limit exceeded")||t.includes("rate-limited"),isError:t.includes("connect to the Anthropic API")||t.includes("status.anthropic.com")}],clearChatHistory:()=>[]}],isSearchingThinking:[!1,{setSearchingThinking:(e,{isSearching:t})=>t}],isRateLimited:[!1,{setRateLimited:(e,{isLimited:t})=>t}],hasServerError:[!1,{setServerError:(e,{isError:t})=>t}]}),(0,Mp.loaders)(({actions:e,values:t})=>({assistantResponse:[null,{submitMessage:async({message:r},n)=>{try{if(t.retryAttempts>=3)return e.appendAssistantMessage("\u{1F62E}\u200D\u{1F4A8} I'm still experiencing rate limits. Please leave me alone for a few minutes. Scroll down and hit `End chat`, then try me again after I've had a nap. \u{1F994}"),e.setSearchingThinking(!1),null;e.setSearchingThinking(!0),e.setServerError(!1),t.isRateLimited||e.setRateLimited(!1);let i=await Qp.sendMessage(r);await n(100);let a=typeof i.content=="string"?i.content:i.content.text;return e.appendAssistantMessage(a),await n(300),e.setSearchingThinking(!1),a}catch(i){if(typeof i=="object"&&i&&"status"in i&&typeof i.status=="number")if(i.status===429){let o=Math.min(i.data?.retry_after||40,40),s=i.data?.limit_type;e.setRateLimited(!0,s),t.retryAttempts<2?e.retryAfter(r,o,s):(e.appendAssistantMessage("I'm still experiencing rate limits. Please wait a minute or two before trying again."),e.setSearchingThinking(!1)),await n(100)}else[500,504,524,529].includes(i.status)&&(e.setServerError(!0),await n(100),e.setSearchingThinking(!1));else await n(100),e.setSearchingThinking(!1);return console.error("Error sending message:",i),null}}}]})),(0,Tt.listeners)(({actions:e})=>({retryAfter:async({retryAfter:t,message:r},n)=>{await n(t*1e3),e.setRateLimited(!1,void 0),e.submitMessage(r)}}))]);var U=S(j()),yb=(0,nt.memo)(function({content:t}){let{openEmailForm:r}=(0,Nr.useActions)(gr),n=t.replace(new RegExp("<thinking>.*?</thinking>","s"),"").replace(new RegExp("<search_result_reflection>.*?</search_result_reflection>","gs"),"").replace(new RegExp("<search_quality_score>.*?</search_quality_score>","s"),"").replace(new RegExp("<info_validation>.*?</info_validation>","s"),"").replace(new RegExp("<url_validation>.*?</url_validation>","s"),"").replace(new RegExp("<reply>|</reply>","g"),"").trim();return(0,U.jsx)("div",{onClick:a=>{let o=a.target;o.tagName==="A"&&o.getAttribute("href")?.includes("/support?panel=email")&&(a.preventDefault(),r())},children:(0,U.jsx)(Ti,{disableDocsRedirect:!0,children:n})})});function Hp(e){return Array.from(e.matchAll(new RegExp("<thinking>(.*?)</thinking>","gs"))).map(r=>r[1].trim())}function Jp(e){return Array.from(e.matchAll(new RegExp("<search_result_reflection>(.*?)</search_result_reflection>","gs"))).map(r=>r[1].trim())}function as(e){let t=e.match(new RegExp("<search_quality_score>(.*?)</search_quality_score>","s"));return t?{hasQualityScore:!0,content:t[1].trim()}:{hasQualityScore:!1,content:null}}function os(e){let t=e.match(new RegExp("<info_validation>(.*?)</info_validation>","s"));return t?{hasQualityScore:!0,content:t[1].trim()}:{hasQualityScore:!1,content:null}}function ss(e){let t=e.match(new RegExp("<url_validation>(.*?)</url_validation>","s"));return t?{hasQualityScore:!0,content:t[1].trim()}:{hasQualityScore:!1,content:null}}var Xp=(0,nt.forwardRef)(function(t,r){let{currentMessages:n,isSearchingThinking:i,isRateLimited:a,hasServerError:o}=(0,Nr.useValues)(is),{submitMessage:s}=(0,Nr.useActions)(is),{dataProcessingAccepted:l}=(0,Nr.useValues)(Ga),[c,u]=(0,nt.useState)("");(0,nt.useEffect)(()=>{l&&s("__GREETING__")},[s,l]);let d=n.length>0&&n.some(w=>w.role==="assistant"),h=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),c.trim()&&!i&&l&&(s(c),u("")))},g=(0,nt.useRef)(null),v=(0,nt.useRef)(null),y=(0,nt.useRef)(n.length);(0,nt.useEffect)(()=>{y.current!==n.length&&(setTimeout(()=>{v.current?.scrollIntoView({behavior:"smooth",block:"end"})},100),y.current=n.length)},[n]);let I=n.filter(w=>w.content!=="__GREETING__");return(0,U.jsxs)("div",{ref:r,className:"flex flex-col h-full",children:[(0,U.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 space-y-4 [overflow-anchor:none]",children:[(0,U.jsxs)("div",{className:"bg-surface-primary dark:bg-transparent rounded p-1",children:[(0,U.jsx)("h4",{className:"mb-2",children:"Tips for chatting with Max:"}),(0,U.jsxs)("ul",{className:"list-disc pl-4 space-y-2 text-secondary",children:[(0,U.jsx)("li",{children:"Max can't handle files or images (yet.)"}),(0,U.jsx)("li",{children:"Max can't see what page you're on, or the contents. Copy/paste error messages or queries to share with Max."}),(0,U.jsx)("li",{children:"Replies can take up to 3 mins due to rate-limiting."}),(0,U.jsx)("li",{children:"Max can make mistakes. Please double-check responses."})]})]}),I.length===0?(0,U.jsxs)("div",{className:"flex items-center gap-2 text-secondary",children:[(0,U.jsx)("span",{children:"Max is crawling out of his burrow and shaking off his quills..."}),(0,U.jsx)(Je,{className:"text-lg"})]}):I.map((w,W)=>(0,U.jsxs)("div",{className:`flex w-full ${w.role==="user"?"justify-end":"justify-start"}`,children:[w.role==="user"&&(0,U.jsx)("div",{className:"text-sm text-secondary mr-2 mt-2",children:"You"}),(0,U.jsxs)("div",{className:`${w.role==="assistant"?"flex flex-col":""} max-w-full`,children:[w.role==="assistant"&&(0,U.jsx)("div",{className:"text-sm text-primary-alt mb-1",children:"Max"}),(0,U.jsx)("div",{className:`p-2 rounded-lg min-w-[90%] whitespace-pre-wrap ${w.role==="assistant"?"bg-surface-primary dark:bg-surface-primary text-default":"bg-surface-primary dark:bg-surface-secondary text-default"}`,children:w.role==="assistant"?typeof w.content=="string"&&(w.content.includes("<search_state>started</search_state>")?(0,U.jsxs)("div",{className:"flex items-center gap-2",children:[(0,U.jsx)("span",{children:"Max is searching..."}),(0,U.jsx)(Je,{className:"text-lg"})]}):w.content.includes("<search_state>completed</search_state>")?(0,U.jsx)("div",{children:"Max searched"}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(yb,{content:w.content}),W===0?null:(Hp(w.content).length>0||Jp(w.content).length>0||as(w.content).hasQualityScore||os(w.content).hasQualityScore||ss(w.content).hasQualityScore)&&(0,U.jsx)(jt,{className:"mt-4 text-sm",panels:[{key:"analysis",header:(0,U.jsx)("span",{className:"text-secondary",children:"What was Max thinking?"}),content:(0,U.jsxs)("div",{className:"space-y-3 p-1",children:[Hp(w.content).map((O,B)=>(0,U.jsx)(jt,{panels:[{key:"thinking",header:"Thinking",content:(0,U.jsx)("div",{children:O})}]},`thinking-${B}-${w.timestamp}`)),Jp(w.content).map((O,B)=>(0,U.jsx)(jt,{panels:[{key:"reflection",header:"Search Reflection",content:(0,U.jsx)("div",{children:O})}]},`reflection-${B}-${w.timestamp}`)),as(w.content).hasQualityScore&&(0,U.jsx)(jt,{panels:[{key:"quality",header:"Search Quality",content:(0,U.jsx)("div",{children:as(w.content).content})}]}),os(w.content).hasQualityScore&&(0,U.jsx)(jt,{panels:[{key:"info",header:"Information Validation",content:(0,U.jsx)("div",{children:os(w.content).content})}]}),ss(w.content).hasQualityScore&&(0,U.jsx)(jt,{panels:[{key:"url",header:"URL Validation",content:(0,U.jsx)("div",{children:ss(w.content).content})}]})]})}]},`analysis-${w.timestamp}`)]})):w.content})]})]},`${w.timestamp}-${W}`)),(o||a)&&(0,U.jsx)("div",{className:"flex justify-start",children:(0,U.jsxs)("div",{className:"flex flex-col",children:[(0,U.jsx)("div",{className:"text-sm text-primary-alt mb-1",children:"Max"}),(0,U.jsx)("div",{className:"p-2 rounded-lg bg-surface-primary dark:bg-surface-primary text-default",children:(0,U.jsxs)("div",{className:"flex items-center gap-2",children:[(0,U.jsx)("span",{children:o?"\u{1FAE3} Uh-oh. I wasn't able to connect to the Anthropic API (my brain!) Please try sending your message again in about 1 minute? (If you see this message twice in a row, please use the 'End chat' button below to start a new chat.)":a?"\u{1FAE3} Uh-oh, I'm really popular today, we've been rate-limited. I just need to catch my breath. Hang on, I'll repeat your question and resume searching in less than a minute. If I repeat it more than 3 times, maybe try again later.":"Searching and thinking..."}),(0,U.jsx)(Je,{className:"text-lg"})]})})]})}),(0,U.jsx)("div",{ref:g})]}),(0,U.jsx)(Ei,{}),d&&(0,U.jsxs)(U.Fragment,{children:[i&&(0,U.jsxs)("div",{className:"flex items-center gap-2 p-2 text-secondary justify-center",children:[(0,U.jsx)("span",{children:"Max is searching and thinking..."}),(0,U.jsx)(Je,{className:"text-sm"})]}),(0,U.jsxs)("form",{className:"p-4 pb-1",children:[(0,U.jsx)(Oi,{value:c,onChange:u,onKeyDown:h,placeholder:"Type or paste here...",minRows:4,maxRows:12,className:"w-full","data-attr":"max-chat-input"}),(0,U.jsx)("div",{className:"px-0 text-xs text-secondary mt-1 mb-2",children:"`enter` to send, `shift+enter` for a new line"}),(0,U.jsx)(Z,{type:"primary","data-attr":"max-chat-send",fullWidth:!0,center:!0,className:i?"opacity-50":"",onClick:w=>{w.preventDefault(),c.trim()&&!i&&l&&(s(c),u(""))},children:"Send"})]}),(0,U.jsx)("div",{ref:v})]})]})});function Yp(){let{dataProcessingAccepted:e}=(0,Nr.useValues)(Ga);return(0,U.jsx)(ki,{flag:et.SUPPORT_SIDEBAR_MAX,match:!0,children:(0,U.jsx)("div",{className:"relative",children:e?(0,U.jsx)(Xp,{}):(0,U.jsx)(Mc,{placement:"right-start",middleware:[Fs(-12)],showArrow:!0,children:(0,U.jsx)(Xp,{})})})})}var P=S(j()),bb=[{name:"Product OS",slug:"product-os",icon:(0,P.jsx)(uc,{className:"text-danger h-5 w-5"})},{name:"Product analytics",slug:"product-analytics",icon:(0,P.jsx)(yi,{className:"text-[#2F80FA] h-5 w-5"})},{name:"Web analytics",slug:"web-analytics",icon:(0,P.jsx)(Ri,{className:"text-[#36C46F] h-5 w-5"})},{name:"Session replay",slug:"session-replay",icon:(0,P.jsx)(Vt,{className:"text-warning h-5 w-5"})},{name:"Feature flags",slug:"feature-flags",icon:(0,P.jsx)(Ii,{className:"text-[#30ABC6] h-5 w-5"})},{name:"Experiments",slug:"experiments",icon:(0,P.jsx)(wi,{className:"text-[#B62AD9] h-5 w-5"})},{name:"Surveys",slug:"surveys",icon:(0,P.jsx)($s,{className:"text-danger h-5 w-5"})},{name:"Data pipelines",slug:"cdp",icon:(0,P.jsx)(ic,{className:"text-[#2EA2D3] h-5 w-5"})},{name:"Data warehouse",slug:"data-warehouse",icon:(0,P.jsx)(gn,{className:"text-[#8567FF] h-5 w-5"})},{name:"AI engineering",slug:"ai-engineering",icon:(0,P.jsx)(Ns,{className:"text-[#681291] dark:text-[#C170E8] h-5 w-5"})}],dr=({title:e,children:t})=>(0,P.jsx)("section",{className:"mb-6",children:e==="Explore the docs"?(0,P.jsx)(jt,{panels:[{key:"docs",header:(0,P.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,P.jsx)(Es,{className:"text-warning h-5 w-5"}),(0,P.jsx)("span",{children:e})]}),content:t}]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("h3",{children:e}),t]})}),Sb="\u{1F384} \u{1F385} Support during the holidays \u{1F381} \u26C4",xb="We're offering reduced support while we celebrate the holidays. Responses may be slower than normal over the holiday period (23rd December to the 6th January), and between the 25th and 27th of December we'll only be responding to critical issues. Thanks for your patience!",Rb=({onCancel:e})=>{let{supportPlans:t,hasSupportAddonPlan:r}=(0,vt.useValues)(jc),{featureFlags:n}=(0,vt.useValues)(xt);return(0,P.jsxs)(dr,{title:"Email an engineer",children:[(0,P.jsx)(Zc,{}),(0,P.jsx)(Z,{form:"support-modal-form",htmlType:"submit",type:"primary","data-attr":"submit",fullWidth:!0,center:!0,className:"mt-4",children:"Submit"}),(0,P.jsx)(Z,{form:"support-modal-form",type:"secondary",onClick:e,fullWidth:!0,center:!0,className:"mt-2 mb-4",children:"Cancel"}),(0,P.jsx)("br",{}),n[et.SUPPORT_MESSAGE_OVERRIDE]?(0,P.jsxs)("div",{className:"border bg-surface-primary p-2 rounded gap-2",children:[(0,P.jsx)("strong",{children:Sb}),(0,P.jsx)("p",{className:"mt-2 mb-0",children:xb})]}):(0,P.jsxs)("div",{className:"grid grid-cols-2 border rounded [&_>*]:px-2 [&_>*]:py-0.5 mb-4 bg-surface-primary pt-4",children:[(0,P.jsxs)("div",{className:"col-span-full flex justify-between py-1",children:[(0,P.jsx)("strong",{children:"Avg support response times"}),(0,P.jsx)("div",{children:(0,P.jsx)(st,{to:X.organizationBilling(["platform_and_support"]),children:"Explore options"})})]}),t?.map(i=>{let a=i.current_plan&&(!r||i.plan_key?.includes("addon"));return(0,P.jsxs)(zp.default.Fragment,{children:[(0,P.jsxs)("div",{className:a?"font-bold":void 0,children:[i.name,a&&(0,P.jsxs)(P.Fragment,{children:[" ",(0,P.jsx)("span",{className:"font-normal opacity-60 text-sm",children:"(your plan)"})]})]}),(0,P.jsx)("div",{className:a?"font-bold":void 0,children:i.features.find(o=>o.key=="support_response_time")?.note})]},`support-panel-${i.plan_key}`)})]})]})},qp=()=>{let{openSidePanel:e,closeSidePanel:t}=(0,vt.useActions)(Se),{preflight:r,isCloud:n}=(0,vt.useValues)(Vr),{currentOrganization:i}=(0,vt.useValues)(Nc),{currentTeam:a}=(0,vt.useValues)(yn),{status:o}=(0,vt.useValues)(Vi),s=gr({onClose:()=>t("support")}),{openEmailForm:l,closeEmailForm:c,openMaxChatInterface:u,closeMaxChatInterface:d}=(0,vt.useActions)(s),{isEmailFormOpen:h,isMaxChatInterfaceOpen:g}=(0,vt.useValues)(s),v=r?.region;return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{className:"overflow-y-auto","data-attr":"side-panel-support-container",children:(0,P.jsx)("div",{className:"p-3 max-w-160 w-full mx-auto",children:h?(0,P.jsx)(Rb,{onCancel:()=>c()}):g?(0,P.jsxs)("div",{className:"space-y-4",children:[(0,P.jsx)(Yp,{}),(0,P.jsx)(Z,{type:"secondary",onClick:()=>d(),fullWidth:!0,center:!0,className:"mt-2",children:"End Chat"})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(dr,{title:"Search docs & community questions",children:(0,P.jsx)(ns,{})}),(0,P.jsx)(dr,{title:"Explore the docs",children:(0,P.jsx)("ul",{className:"border rounded divide-y bg-surface-primary dark:bg-transparent font-title font-medium",children:bb.map((y,I)=>(0,P.jsx)("li",{children:(0,P.jsxs)(st,{to:`https://posthog.com/docs/${y.slug}`,className:"group flex items-center justify-between px-2 py-1.5",children:[(0,P.jsxs)("div",{className:"flex items-center gap-1.5",children:[y.icon,(0,P.jsx)("span",{className:"text-text-3000 opacity-75 group-hover:opacity-100",children:y.name})]}),(0,P.jsx)("div",{children:(0,P.jsx)(Ps,{className:"text-text-3000 h-6 w-6 opacity-60 -rotate-90 group-hover:opacity-90"})})]})},I))})}),o!=="operational"?(0,P.jsx)(dr,{title:"",children:(0,P.jsx)(Zr,{type:o.includes("outage")?"error":"warning",children:(0,P.jsxs)("div",{children:[(0,P.jsxs)("span",{children:["We are experiencing ",o.includes("outage")?"major":""," issues."]}),(0,P.jsx)(Z,{type:"secondary",fullWidth:!0,center:!0,targetBlank:!0,onClick:()=>e("status"),className:"mt-2 bg-[white]",children:"View system status"})]})})}):null,n?(0,P.jsx)(ki,{flag:et.SUPPORT_SIDEBAR_MAX,match:!0,children:(0,P.jsx)(dr,{title:"Ask Max the Hedgehog",children:(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("p",{children:"Max is PostHog's support AI who can answer support questions, help you with troubleshooting, find info in our documentation, write HogQL queries, regex expressions, etc."}),(0,P.jsx)(Z,{type:"primary",fullWidth:!0,center:!0,onClick:()=>{u()},targetBlank:!1,className:"mt-2",children:"\u2728 Chat with Max"})]})})}):null,n?(0,P.jsxs)(dr,{title:"Contact us",children:[(0,P.jsx)("p",{children:"Can't find what you need in the docs?"}),(0,P.jsx)(Z,{type:"primary",fullWidth:!0,center:!0,onClick:()=>l(),targetBlank:!0,className:"mt-2",children:"Email our support engineers"})]}):null,(0,P.jsx)(dr,{title:"Ask the community",children:(0,P.jsxs)("p",{children:["Questions about features, how-tos, or use cases? There are thousands of discussions in our community forums."," ",(0,P.jsx)(st,{to:"https://posthog.com/questions",children:"Ask a question"})]})}),(0,P.jsx)(dr,{title:"Share feedback",children:(0,P.jsxs)("ul",{children:[(0,P.jsx)("li",{children:(0,P.jsx)(Z,{type:"secondary",status:"alt",to:"https://posthog.com/wip",icon:(0,P.jsx)(Bs,{}),targetBlank:!0,children:"See what we're building"})}),(0,P.jsx)("li",{children:(0,P.jsx)(Z,{type:"secondary",status:"alt",to:"https://posthog.com/roadmap",icon:(0,P.jsx)(qs,{}),targetBlank:!0,children:"Vote on our roadmap"})}),(0,P.jsx)("li",{children:(0,P.jsx)(Z,{type:"secondary",status:"alt",to:`https://github.com/PostHog/posthog/issues/new?&labels=enhancement&template=feature_request.yml&debug-info=${encodeURIComponent(Vc(v,i,a))}`,icon:(0,P.jsx)(vi,{}),targetBlank:!0,children:"Request a feature"})})]})})]})})})})};var Te=S(j()),an={max:{label:"Max",Icon:function(){let{user:t}=(0,fr.useValues)(lt);return(0,Te.jsx)(jr,{user:{hedgehog_config:{...t?.hedgehog_config,use_as_profile:!0}},size:"md",className:"border bg-bg-light -scale-x-100"})},Content:au,noModalSupport:!0},notebook:{label:"Notebooks",Icon:xi,Content:bl,noModalSupport:!0},support:{label:"Help",Icon:fc,Content:qp},docs:{label:"Docs",Icon:Ms,Content:ql,noModalSupport:!0},activation:{label:"Quick start",Icon:El,Content:Nl},settings:{label:"Settings",Icon:vn,Content:su},"feature-previews":{label:"Feature previews",Icon:vi,Content:nu},activity:{label:"Team activity",Icon:Ul,Content:Zl},discussion:{label:"Discussion",Icon:Ml,Content:Hl},exports:{label:"Exports",Icon:Sl,Content:xl},status:{label:"System status",Icon:uu,Content:du,noModalSupport:!0},"access-control":{label:"Access control",Icon:Si,Content:wl}},wb=512;function wU(){let{theme:e}=(0,fr.useValues)(Wi),{visibleTabs:t,extraTabs:r}=(0,fr.useValues)(_r),{selectedTab:n,sidePanelOpen:i,modalMode:a}=(0,fr.useValues)(Se),{openSidePanel:o,closeSidePanel:s,setSidePanelAvailable:l}=(0,fr.useActions)(Se),c=i&&n,u=c?an[c]?.Content:null,d=(0,Ca.useRef)(null),h={containerRef:d,logicKey:"side-panel",persistent:!0,closeThreshold:200,placement:"left",onToggleClosed:w=>{w?s():n&&o(n)}},{desiredSize:g,isResizeInProgress:v}=(0,fr.useValues)(Jc(h));if((0,Ca.useEffect)(()=>(l(!0),()=>{l(!1)}),[]),!t.length)return null;let y=n&&i&&t.includes(n),I=r?[{title:"Open in side panel",items:r.map(w=>{let{Icon:W,label:O}=an[w];return{label:O,icon:(0,Te.jsx)(W,{}),onClick:()=>o(w)}})}]:void 0;if(a){let w=c?!an[c]?.noModalSupport:!0;return(0,Te.jsx)(xc,{simple:!0,isOpen:!!u&&w,onClose:s,hideCloseButton:!0,width:"40rem",children:u?(0,Te.jsx)(u,{}):null})}return(0,Te.jsxs)("div",{className:(0,$p.default)("SidePanel3000",y&&"SidePanel3000--open",v&&"SidePanel3000--resizing"),ref:d,style:{width:y?g??wb:void 0,...e?.sidebarStyle??{}},children:[(0,Te.jsx)(Xc,{...h}),(0,Te.jsxs)("div",{className:"SidePanel3000__bar",children:[(0,Te.jsx)("div",{className:"SidePanel3000__tabs",children:(0,Te.jsx)("div",{className:"SidePanel3000__tabs-content",children:t.map(w=>{let{Icon:W,label:O}=an[w];return(0,Te.jsx)(Z,{icon:(0,Te.jsx)(W,{}),onClick:()=>c===w?s():o(w),"data-attr":`sidepanel-tab-${w}`,"data-ph-capture-attribute-state-before-click":c===w?"open":"closed",active:c===w,type:"secondary",status:"alt",children:O},w)})})}),I?(0,Te.jsx)("div",{className:"shrink-0 flex items-center m-2",children:(0,Te.jsx)(Ai,{items:I,children:(0,Te.jsx)(Z,{size:"small",icon:(0,Te.jsx)(gi,{})})})}):null]}),u?(0,Te.jsx)("div",{className:"SidePanel3000__content",children:(0,Te.jsx)(Rs.Provider,{value:!0,children:(0,Te.jsx)(u,{})})}):null]})}f();m();p();f();m();p();var ft="INUMBER",un="IOP1",dn="IOP2",fn="IOP3",Jt="IVAR",Ar="IVARNAME",sn="IFUNCALL",Fa="IFUNDEF",qe="IEXPR",us="IEXPREVAL",Pr="IMEMBER",Na="IENDSTATEMENT",cn="IARRAY";function te(e,t){this.type=e,this.value=t??0}te.prototype.toString=function(){switch(this.type){case ft:case un:case dn:case fn:case Jt:case Ar:case Na:return this.value;case sn:return"CALL "+this.value;case Fa:return"DEF "+this.value;case cn:return"ARRAY "+this.value;case Pr:return"."+this.value;default:return"Invalid Instruction"}};function Ea(e){return new te(un,e)}function Yt(e){return new te(dn,e)}function om(e){return new te(fn,e)}function ls(e,t,r,n,i){for(var a=[],o=[],s,l,c,u,d=0;d<e.length;d++){var h=e[d],g=h.type;if(g===ft||g===Ar)Array.isArray(h.value)?a.push.apply(a,ls(h.value.map(function(v){return new te(ft,v)}).concat(new te(cn,h.value.length)),t,r,n,i)):a.push(h);else if(g===Jt&&i.hasOwnProperty(h.value))h=new te(ft,i[h.value]),a.push(h);else if(g===dn&&a.length>1)l=a.pop(),s=a.pop(),u=r[h.value],h=new te(ft,u(s.value,l.value)),a.push(h);else if(g===fn&&a.length>2)c=a.pop(),l=a.pop(),s=a.pop(),h.value==="?"?a.push(s.value?l.value:c.value):(u=n[h.value],h=new te(ft,u(s.value,l.value,c.value)),a.push(h));else if(g===un&&a.length>0)s=a.pop(),u=t[h.value],h=new te(ft,u(s.value)),a.push(h);else if(g===qe){for(;a.length>0;)o.push(a.shift());o.push(new te(qe,ls(h.value,t,r,n,i)))}else if(g===Pr&&a.length>0)s=a.pop(),a.push(new te(ft,s.value[h.value]));else{for(;a.length>0;)o.push(a.shift());o.push(h)}}for(;a.length>0;)o.push(a.shift());return o}function sm(e,t,r){for(var n=[],i=0;i<e.length;i++){var a=e[i],o=a.type;if(o===Jt&&a.value===t)for(var s=0;s<r.tokens.length;s++){var l=r.tokens[s],c;l.type===un?c=Ea(l.value):l.type===dn?c=Yt(l.value):l.type===fn?c=om(l.value):c=new te(l.type,l.value),n.push(c)}else o===qe?n.push(new te(qe,sm(a.value,t,r))):n.push(a)}return n}function Er(e,t,r){var n=[],i,a,o,s,l,c;if(ds(e))return Ht(e,r);for(var u=e.length,d=0;d<u;d++){var h=e[d],g=h.type;if(g===ft||g===Ar)n.push(h.value);else if(g===dn)a=n.pop(),i=n.pop(),h.value==="and"?n.push(i?!!Er(a,t,r):!1):h.value==="or"?n.push(i?!0:!!Er(a,t,r)):h.value==="="?(s=t.binaryOps[h.value],n.push(s(i,Er(a,t,r),r))):(s=t.binaryOps[h.value],n.push(s(Ht(i,r),Ht(a,r))));else if(g===fn)o=n.pop(),a=n.pop(),i=n.pop(),h.value==="?"?n.push(Er(i?a:o,t,r)):(s=t.ternaryOps[h.value],n.push(s(Ht(i,r),Ht(a,r),Ht(o,r))));else if(g===Jt)if(h.value in t.functions)n.push(t.functions[h.value]);else if(h.value in t.unaryOps&&t.parser.isOperatorEnabled(h.value))n.push(t.unaryOps[h.value]);else{var v=r[h.value];if(v!==void 0)n.push(v);else throw new Error("undefined variable: "+h.value)}else if(g===un)i=n.pop(),s=t.unaryOps[h.value],n.push(s(Ht(i,r)));else if(g===sn){for(c=h.value,l=[];c-- >0;)l.unshift(Ht(n.pop(),r));if(s=n.pop(),s.apply&&s.call)n.push(s.apply(void 0,l));else throw new Error(s+" is not a function")}else if(g===Fa)n.push(function(){for(var y=n.pop(),I=[],w=h.value;w-- >0;)I.unshift(n.pop());var W=n.pop(),O=function(){for(var B=Object.assign({},r),J=0,$=I.length;J<$;J++)B[I[J]]=arguments[J];return Er(y,t,B)};return Object.defineProperty(O,"name",{value:W,writable:!1}),r[W]=O,O}());else if(g===qe)n.push(Ib(h,t));else if(g===us)n.push(h);else if(g===Pr)i=n.pop(),n.push(i[h.value]);else if(g===Na)n.pop();else if(g===cn){for(c=h.value,l=[];c-- >0;)l.unshift(n.pop());n.push(l)}else throw new Error("invalid Expression")}if(n.length>1)throw new Error("invalid Expression (parity)");return n[0]===0?0:Ht(n[0],r)}function Ib(e,t,r){return ds(e)?e:{type:us,value:function(n){return Er(e.value,t,n)}}}function ds(e){return e&&e.type===us}function Ht(e,t){return ds(e)?e.value(t):e}function fs(e,t){for(var r=[],n,i,a,o,s,l,c=0;c<e.length;c++){var u=e[c],d=u.type;if(d===ft)typeof u.value=="number"&&u.value<0?r.push("("+u.value+")"):Array.isArray(u.value)?r.push("["+u.value.map(Kp).join(", ")+"]"):r.push(Kp(u.value));else if(d===dn)i=r.pop(),n=r.pop(),o=u.value,t?o==="^"?r.push("Math.pow("+n+", "+i+")"):o==="and"?r.push("(!!"+n+" && !!"+i+")"):o==="or"?r.push("(!!"+n+" || !!"+i+")"):o==="||"?r.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+i+")))"):o==="=="?r.push("("+n+" === "+i+")"):o==="!="?r.push("("+n+" !== "+i+")"):o==="["?r.push(n+"[("+i+") | 0]"):r.push("("+n+" "+o+" "+i+")"):o==="["?r.push(n+"["+i+"]"):r.push("("+n+" "+o+" "+i+")");else if(d===fn)if(a=r.pop(),i=r.pop(),n=r.pop(),o=u.value,o==="?")r.push("("+n+" ? "+i+" : "+a+")");else throw new Error("invalid Expression");else if(d===Jt||d===Ar)r.push(u.value);else if(d===un)n=r.pop(),o=u.value,o==="-"||o==="+"?r.push("("+o+n+")"):t?o==="not"?r.push("(!"+n+")"):o==="!"?r.push("fac("+n+")"):r.push(o+"("+n+")"):o==="!"?r.push("("+n+"!)"):r.push("("+o+" "+n+")");else if(d===sn){for(l=u.value,s=[];l-- >0;)s.unshift(r.pop());o=r.pop(),r.push(o+"("+s.join(", ")+")")}else if(d===Fa){for(i=r.pop(),l=u.value,s=[];l-- >0;)s.unshift(r.pop());n=r.pop(),t?r.push("("+n+" = function("+s.join(", ")+") { return "+i+" })"):r.push("("+n+"("+s.join(", ")+") = "+i+")")}else if(d===Pr)n=r.pop(),r.push(n+"."+u.value);else if(d===cn){for(l=u.value,s=[];l-- >0;)s.unshift(r.pop());r.push("["+s.join(", ")+"]")}else if(d===qe)r.push("("+fs(u.value,t)+")");else if(d!==Na)throw new Error("invalid Expression")}return r.length>1&&(t?r=[r.join(",")]:r=[r.join(";")]),String(r[0])}function Kp(e){return typeof e=="string"?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function on(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}function ps(e,t,r){r=r||{};for(var n=!!r.withMembers,i=null,a=0;a<e.length;a++){var o=e[a];o.type===Jt||o.type===Ar?!n&&!on(t,o.value)?t.push(o.value):(i!==null&&(on(t,i)||t.push(i)),i=o.value):o.type===Pr&&n&&i!==null?i+="."+o.value:o.type===qe?ps(o.value,t,r):i!==null&&(on(t,i)||t.push(i),i=null)}i!==null&&!on(t,i)&&t.push(i)}function yt(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}yt.prototype.simplify=function(e){return e=e||{},new yt(ls(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)};yt.prototype.substitute=function(e,t){return t instanceof yt||(t=this.parser.parse(String(t))),new yt(sm(this.tokens,e,t),this.parser)};yt.prototype.evaluate=function(e){return e=e||{},Er(this.tokens,this,e)};yt.prototype.toString=function(){return fs(this.tokens,!1)};yt.prototype.symbols=function(e){e=e||{};var t=[];return ps(this.tokens,t,e),t};yt.prototype.variables=function(e){e=e||{};var t=[];ps(this.tokens,t,e);var r=this.functions;return t.filter(function(n){return!(n in r)})};yt.prototype.toJSFunction=function(e,t){var r=this,n=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+fs(this.simplify(t).tokens,!0)+"; }");return function(){return n.apply(r,arguments)}};var ii="TEOF",he="TOP",Aa="TNUMBER",cm="TSTRING",Xt="TPAREN",ln="TBRACKET",Pa="TCOMMA",ms="TNAME",hs="TSEMICOLON";function lm(e,t,r){this.type=e,this.value=t,this.index=r}lm.prototype.toString=function(){return this.type+": "+this.value};function Ne(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}Ne.prototype.newToken=function(e,t,r){return new lm(e,t,r??this.pos)};Ne.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current};Ne.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent};Ne.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken(ii,"EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};Ne.prototype.isString=function(){var e=!1,t=this.pos,r=this.expression.charAt(t);if(r==="'"||r==='"')for(var n=this.expression.indexOf(r,t+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,this.expression.charAt(n-1)!=="\\"){var i=this.expression.substring(t+1,n);this.current=this.newToken(cm,this.unescape(i),t),e=!0;break}n=this.expression.indexOf(r,n+1)}return e};Ne.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return e==="("||e===")"?(this.current=this.newToken(Xt,e),this.pos++,!0):!1};Ne.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return(e==="["||e==="]")&&this.isOperatorEnabled("[")?(this.current=this.newToken(ln,e),this.pos++,!0):!1};Ne.prototype.isComma=function(){var e=this.expression.charAt(this.pos);return e===","?(this.current=this.newToken(Pa,","),this.pos++,!0):!1};Ne.prototype.isSemicolon=function(){var e=this.expression.charAt(this.pos);return e===";"?(this.current=this.newToken(hs,";"),this.pos++,!0):!1};Ne.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||r!=="_"&&r!=="."&&(r<"0"||r>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(n in this.consts)return this.current=this.newToken(Aa,this.consts[n]),this.pos+=n.length,!0}return!1};Ne.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||r!=="_"&&(r<"0"||r>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(he,n),this.pos+=n.length,!0}return!1};Ne.prototype.isName=function(){for(var e=this.pos,t=e,r=!1;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()){if(t===this.pos&&(n==="$"||n==="_")){n==="_"&&(r=!0);continue}else if(t===this.pos||!r||n!=="_"&&(n<"0"||n>"9"))break}else r=!0}if(r){var i=this.expression.substring(e,t);return this.current=this.newToken(ms,i),this.pos+=i.length,!0}return!1};Ne.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);(t===" "||t==="	"||t===`
`||t==="\r")&&(e=!0,this.pos++,!(this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var Cb=/^[0-9a-f]{4}$/i;Ne.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var r=e.substring(0,t);t>=0;){var n=e.charAt(++t);switch(n){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+=`
`;break;case"r":r+="\r";break;case"t":r+="	";break;case"u":var i=e.substring(t+1,t+5);Cb.test(i)||this.parseError("Illegal escape sequence: \\u"+i),r+=String.fromCharCode(parseInt(i,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++t;var a=e.indexOf("\\",t);r+=e.substring(t,a<0?e.length:a),t=a}return r};Ne.prototype.isComment=function(){var e=this.expression.charAt(this.pos);return e==="/"&&this.expression.charAt(this.pos+1)==="*"?(this.pos=this.expression.indexOf("*/",this.pos)+2,this.pos===1&&(this.pos=this.expression.length),!0):!1};Ne.prototype.isRadixInteger=function(){var e=this.pos;if(e>=this.expression.length-2||this.expression.charAt(e)!=="0")return!1;++e;var t,r;if(this.expression.charAt(e)==="x")t=16,r=/^[0-9a-f]$/i,++e;else if(this.expression.charAt(e)==="b")t=2,r=/^[01]$/i,++e;else return!1;for(var n=!1,i=e;e<this.expression.length;){var a=this.expression.charAt(e);if(r.test(a))e++,n=!0;else break}return n&&(this.current=this.newToken(Aa,parseInt(this.expression.substring(i,e),t)),this.pos=e),n};Ne.prototype.isNumber=function(){for(var e=!1,t=this.pos,r=t,n=t,i=!1,a=!1,o;t<this.expression.length&&(o=this.expression.charAt(t),o>="0"&&o<="9"||!i&&o===".");)o==="."?i=!0:a=!0,t++,e=a;if(e&&(n=t),o==="e"||o==="E"){t++;for(var s=!0,l=!1;t<this.expression.length;){if(o=this.expression.charAt(t),s&&(o==="+"||o==="-"))s=!1;else if(o>="0"&&o<="9")l=!0,s=!1;else break;t++}l||(t=n)}return e?(this.current=this.newToken(Aa,parseFloat(this.expression.substring(r,t))),this.pos=t):this.pos=n,e};Ne.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if(t==="+"||t==="-"||t==="*"||t==="/"||t==="%"||t==="^"||t==="?"||t===":"||t===".")this.current=this.newToken(he,t);else if(t==="\u2219"||t==="\u2022")this.current=this.newToken(he,"*");else if(t===">")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(he,">="),this.pos++):this.current=this.newToken(he,">");else if(t==="<")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(he,"<="),this.pos++):this.current=this.newToken(he,"<");else if(t==="|")if(this.expression.charAt(this.pos+1)==="|")this.current=this.newToken(he,"||"),this.pos++;else return!1;else if(t==="=")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(he,"=="),this.pos++):this.current=this.newToken(he,t);else if(t==="!")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(he,"!="),this.pos++):this.current=this.newToken(he,t);else return!1;return this.pos++,this.isOperatorEnabled(this.current.value)?!0:(this.pos=e,!1)};Ne.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)};Ne.prototype.getCoordinates=function(){var e=0,t,r=-1;do e++,t=this.pos-r,r=this.expression.indexOf(`
`,r+1);while(r>=0&&r<this.pos);return{line:e,column:t}};Ne.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)};function ye(e,t,r){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=r.allowMemberAccess!==!1}ye.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()};ye.prototype.tokenMatches=function(e,t){return typeof t>"u"?!0:Array.isArray(t)?on(t,e.value):typeof t=="function"?t(e):e.value===t};ye.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()};ye.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken};ye.prototype.accept=function(e,t){return this.nextToken.type===e&&this.tokenMatches(this.nextToken,t)?(this.next(),!0):!1};ye.prototype.expect=function(e,t){if(!this.accept(e,t)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(t||e))}};ye.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;function r(i){return i.value in t}if(this.accept(ms)||this.accept(he,r))e.push(new te(Jt,this.current.value));else if(this.accept(Aa))e.push(new te(ft,this.current.value));else if(this.accept(cm))e.push(new te(ft,this.current.value));else if(this.accept(Xt,"("))this.parseExpression(e),this.expect(Xt,")");else if(this.accept(ln,"["))if(this.accept(ln,"]"))e.push(new te(cn,0));else{var n=this.parseArrayList(e);e.push(new te(cn,n))}else throw new Error("unexpected "+this.nextToken)};ye.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),!this.parseUntilEndStatement(e,t)&&this.pushExpression(e,t))};ye.prototype.pushExpression=function(e,t){for(var r=0,n=t.length;r<n;r++)e.push(t[r])};ye.prototype.parseUntilEndStatement=function(e,t){return this.accept(hs)?(this.nextToken&&this.nextToken.type!==ii&&!(this.nextToken.type===Xt&&this.nextToken.value===")")&&t.push(new te(Na)),this.nextToken.type!==ii&&this.parseExpression(t),e.push(new te(qe,t)),!0):!1};ye.prototype.parseArrayList=function(e){for(var t=0;!this.accept(ln,"]");)for(this.parseExpression(e),++t;this.accept(Pa);)this.parseExpression(e),++t;return t};ye.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(he,"=");){var t=e.pop(),r=[],n=e.length-1;if(t.type===sn){if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var i=0,a=t.value+1;i<a;i++){var o=n-i;e[o].type===Jt&&(e[o]=new te(Ar,e[o].value))}this.parseVariableAssignmentExpression(r),e.push(new te(qe,r)),e.push(new te(Fa,t.value));continue}if(t.type!==Jt&&t.type!==Pr)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),e.push(new te(Ar,t.value)),e.push(new te(qe,r)),e.push(Yt("="))}};ye.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(he,"?");){var t=[],r=[];this.parseConditionalExpression(t),this.expect(he,":"),this.parseConditionalExpression(r),e.push(new te(qe,t)),e.push(new te(qe,r)),e.push(om("?"))}};ye.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(he,"or");){var t=[];this.parseAndExpression(t),e.push(new te(qe,t)),e.push(Yt("or"))}};ye.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(he,"and");){var t=[];this.parseComparison(t),e.push(new te(qe,t)),e.push(Yt("and"))}};var Fb=["==","!=","<","<=",">=",">","in"];ye.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(he,Fb);){var t=this.current;this.parseAddSub(e),e.push(Yt(t.value))}};var Nb=["+","-","||"];ye.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(he,Nb);){var t=this.current;this.parseTerm(e),e.push(Yt(t.value))}};var Eb=["*","/","%"];ye.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(he,Eb);){var t=this.current;this.parseFactor(e),e.push(Yt(t.value))}};ye.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;function r(i){return i.value in t}if(this.save(),this.accept(he,r)){if(this.current.value!=="-"&&this.current.value!=="+"){if(this.nextToken.type===Xt&&this.nextToken.value==="("){this.restore(),this.parseExponential(e);return}else if(this.nextToken.type===hs||this.nextToken.type===Pa||this.nextToken.type===ii||this.nextToken.type===Xt&&this.nextToken.value===")"){this.restore(),this.parseAtom(e);return}}var n=this.current;this.parseFactor(e),e.push(Ea(n.value))}else this.parseExponential(e)};ye.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(he,"^");)this.parseFactor(e),e.push(Yt("^"))};ye.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(he,"!");)e.push(Ea("!"))};ye.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;function r(a){return a.value in t}if(this.accept(he,r)){var n=this.current;this.parseAtom(e),e.push(Ea(n.value))}else for(this.parseMemberExpression(e);this.accept(Xt,"(");)if(this.accept(Xt,")"))e.push(new te(sn,0));else{var i=this.parseArgumentList(e);e.push(new te(sn,i))}};ye.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(Xt,")");)for(this.parseExpression(e),++t;this.accept(Pa);)this.parseExpression(e),++t;return t};ye.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(he,".")||this.accept(ln,"[");){var t=this.current;if(t.value==="."){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(ms),e.push(new te(Pr,this.current.value))}else if(t.value==="["){if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(ln,"]"),e.push(Yt("["))}else throw new Error("unexpected symbol: "+t.value)}};function Ab(e,t){return Number(e)+Number(t)}function Pb(e,t){return e-t}function Ob(e,t){return e*t}function Wb(e,t){return e/t}function Tb(e,t){return e%t}function kb(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function Ub(e,t){return e===t}function Zb(e,t){return e!==t}function Vb(e,t){return e>t}function jb(e,t){return e<t}function Lb(e,t){return e>=t}function _b(e,t){return e<=t}function Gb(e,t){return!!(e&&t)}function Db(e,t){return!!(e||t)}function Bb(e,t){return on(t,e)}function Qb(e){return(Math.exp(e)-Math.exp(-e))/2}function Mb(e){return(Math.exp(e)+Math.exp(-e))/2}function Hb(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function Jb(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function Xb(e){return Math.log(e+Math.sqrt(e*e-1))}function Yb(e){return Math.log((1+e)/(1-e))/2}function em(e){return Math.log(e)*Math.LOG10E}function zb(e){return-e}function qb(e){return!e}function $b(e){return e<0?Math.ceil(e):Math.floor(e)}function Kb(e){return Math.random()*(e||1)}function tm(e){return gs(e+1)}function eS(e){return isFinite(e)&&e===Math.round(e)}var tS=4.7421875,cs=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function gs(e){var t,r;if(eS(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var n=e-2,i=e-1;n>1;)i*=n,n--;return i===0&&(i=1),i}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*gs(1-e));if(e>=171.35)return 1/0;if(e>85){var a=e*e,o=a*e,s=o*e,l=s*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*a)-139/(51840*o)-571/(2488320*s)+163879/(209018880*l)+5246819/(75246796800*l*e))}--e,r=cs[0];for(var c=1;c<cs.length;++c)r+=cs[c]/(e+c);return t=e+tS+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*r}function rS(e){return Array.isArray(e)?e.length:String(e).length}function rm(){for(var e=0,t=0,r=0;r<arguments.length;r++){var n=Math.abs(arguments[r]),i;t<n?(i=t/n,e=e*i*i+1,t=n):n>0?(i=n/t,e+=i*i):e+=n}return t===1/0?1/0:t*Math.sqrt(e)}function nm(e,t,r){return e?t:r}function nS(e,t){return typeof t>"u"||+t==0?Math.round(e):(e=+e,t=-+t,isNaN(e)||!(typeof t=="number"&&t%1===0)?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}function iS(e,t,r){return r&&(r[e]=t),t}function aS(e,t){return e[t|0]}function oS(e){return arguments.length===1&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function sS(e){return arguments.length===1&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function cS(e,t){if(typeof e!="function")throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map(function(r,n){return e(r,n)})}function lS(e,t,r){if(typeof e!="function")throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce(function(n,i,a){return e(n,i,a)},t)}function uS(e,t){if(typeof e!="function")throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter(function(r,n){return e(r,n)})}function dS(e,t){if(!(Array.isArray(t)||typeof t=="string"))throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function fS(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function pS(e){return(e>0)-(e<0)||+e}var im=1/3;function mS(e){return e<0?-Math.pow(-e,im):Math.pow(e,im)}function hS(e){return Math.exp(e)-1}function gS(e){return Math.log(1+e)}function vS(e){return Math.log(e)/Math.LN2}function pr(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||Qb,cosh:Math.cosh||Mb,tanh:Math.tanh||Hb,asinh:Math.asinh||Jb,acosh:Math.acosh||Xb,atanh:Math.atanh||Yb,sqrt:Math.sqrt,cbrt:Math.cbrt||mS,log:Math.log,log2:Math.log2||vS,ln:Math.log,lg:Math.log10||em,log10:Math.log10||em,expm1:Math.expm1||hS,log1p:Math.log1p||gS,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||$b,"-":zb,"+":Number,exp:Math.exp,not:qb,length:rS,"!":tm,sign:Math.sign||pS},this.binaryOps={"+":Ab,"-":Pb,"*":Ob,"/":Wb,"%":Tb,"^":Math.pow,"||":kb,"==":Ub,"!=":Zb,">":Vb,"<":jb,">=":Lb,"<=":_b,and:Gb,or:Db,in:Bb,"=":iS,"[":aS},this.ternaryOps={"?":nm},this.functions={random:Kb,fac:tm,min:sS,max:oS,hypot:Math.hypot||rm,pyt:Math.hypot||rm,pow:Math.pow,atan2:Math.atan2,if:nm,gamma:gs,roundTo:nS,map:cS,fold:lS,filter:uS,indexOf:dS,join:fS},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}pr.prototype.parse=function(e){var t=[],r=new ye(this,new Ne(this,e),{allowMemberAccess:this.options.allowMemberAccess});return r.parseExpression(t),r.expect(ii,"EOF"),new yt(t,this)};pr.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var um=new pr;pr.parse=function(e){return um.parse(e)};pr.evaluate=function(e,t){return um.parse(e).evaluate(t)};var am={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function yS(e){return am.hasOwnProperty(e)?am[e]:e}pr.prototype.isOperatorEnabled=function(e){var t=yS(e),r=this.options.operators||{};return!(t in r)||!!r[t]};var Be=S(ie()),bs=S(Wa());f();m();p();function bS(e){return e.length===36&&!!e.toLowerCase().match(/^[0-9a-f-]+$/)?.length}var vs="watch-recordings-of",dm=e=>({key:vs,scope:$e,resolver:t=>{if(t===void 0)return null;let r=(o,s)=>({date_from:"-3d",filter_group:{type:"AND",values:[{type:"AND",values:[{key:o,value:[s],operator:"exact",type:"recording"}]}]},duration:[{type:"recording",key:"duration",value:1,operator:"gt"}]}),n=t.split(" ");if(n.includes("web")||n.includes("mobile"))return{icon:Vt,display:`Watch ${t} recordings`,executor:()=>{e(X.replay("home",r("snapshot_source",t)))}};let i=n.find(o=>li(o));if(i)return{icon:Vt,display:`Watch recordings of visits to ${i}`,executor:()=>{e(X.replay("home",r("visited_page",i)))}};let a=n.find(o=>bS(o));return a?{icon:Vt,display:`Watch recording of session: ${a}`,executor:()=>{e(X.replaySingle(a))}}:null}});var ai=S(j()),fm=5,$e="global";function ys(e,t,r){let n=e.resolver instanceof Function?e.resolver(t,r):e.resolver;return n?(Array.isArray(n)||(n=[n]),n.map(a=>({...a,source:e}))):[]}var RZ=(0,Be.kea)([(0,Be.path)(["lib","components","CommandPalette","commandPaletteLogic"]),(0,Be.connect)({actions:[bs.router,["push"],lt,["updateUser"],_a,["setHedgehogModeEnabled"],Kc,["setCommandBar"],Se,["openSidePanel","closeSidePanel"]],values:[yn,["currentTeam"],lt,["user"],xt,["featureFlags"],_a,["hedgehogModeEnabled"],_r,["enabledTabs"],Se,["sidePanelOpen"]],logic:[Vr]}),(0,Be.actions)({hidePalette:!0,showPalette:!0,togglePalette:!0,setInput:e=>({input:e}),onArrowUp:!0,onArrowDown:e=>({maxIndex:e}),executeResult:e=>({result:e}),activateFlow:e=>({flow:e}),backFlow:!0,registerCommand:e=>({command:e}),deregisterCommand:e=>({commandKey:e}),setCustomCommand:e=>({commandKey:e}),deregisterScope:e=>({scope:e})}),(0,Be.reducers)({isPaletteShown:[!1,{hidePalette:()=>!1,showPalette:()=>!0,togglePalette:e=>!e}],activeResultIndex:[0,{setInput:()=>0,executeResult:()=>0,activateFlow:()=>0,backFlow:()=>0,onArrowUp:e=>e>0?e-1:0,onArrowDown:(e,{maxIndex:t})=>e<t?e+1:t}],input:["",{setInput:(e,{input:t})=>t,activateFlow:()=>"",backFlow:()=>"",executeResult:()=>""}],activeFlow:[null,{activateFlow:(e,{flow:t})=>t?{...t,scope:t.scope??e?.scope,previousFlow:e}:null,backFlow:e=>e?.previousFlow??null}],commandRegistrations:[{},{registerCommand:(e,{command:t})=>({...e,[t.key]:t}),deregisterCommand:(e,{commandKey:t})=>{let{[t]:r,...n}=e;return n}}]}),(0,Be.selectors)({isSqueak:[e=>[e.input],e=>e.trim().toLowerCase()==="squeak"],regexpCommandPairs:[e=>[e.commandRegistrations],e=>{let t=[];for(let r of Object.values(e))r.prefixes?t.push([new RegExp(`^\\s*(${r.prefixes.join("|")})(?:\\s+(.*)|$)`,"i"),r]):t.push([null,r]);return t}],commandSearchResults:[e=>[e.isPaletteShown,e.regexpCommandPairs,e.input,e.activeFlow,e.isSqueak],(e,t,r,n,i)=>{if(!e||i)return[];if(n)return ys(n,r);let a=[],o=[];for(let[d,h]of t){if(d){let g=r.match(d);g&&g[1]&&(o=[...o,...ys(h,g[2],g[1])])}a=[...a,...ys(h,r)]}let s=a.concat(o),l=[],c=[];for(let d of s)d.guarantee?c.push(d):l.push(d);l=Ta(l,d=>d.display),c=Ta(c,d=>d.display);let u=r?new Ic(l,{keys:["display","synonyms"]}).search(r).slice(0,fm).map(d=>d.item):l.slice(0,fm);return c.concat(u)}],commandSearchResultsGrouped:[e=>[e.commandSearchResults,e.activeFlow],(e,t)=>{let r={};t&&(r[t.scope??"?"]=[]);for(let o of e){let s=o.source.scope??"?";s in r||(r[s]=[]),r[s].push({...o})}let n=0,i=0,a=[];for(let[o,s]of Object.entries(r)){a.push([o,[]]);for(let l of s)a[n][1].push({...l,index:i++});n++}return a}]}),(0,Be.listeners)(({actions:e,values:t})=>({showPalette:()=>{Ut.capture("palette shown",{isMobile:ui()})},togglePalette:()=>{t.isPaletteShown&&Ut.capture("palette shown",{isMobile:ui()})},executeResult:({result:r})=>{if(r.executor===!0)e.activateFlow(null),e.hidePalette();else{let l=r.executor?.()||null;e.activateFlow(l),l||e.hidePalette()}let{icon:n,index:i,...a}=r,{resolver:o,...s}=a.source;a.source=s,a.isMobile=ui(),Ut.capture("palette command executed",a)},deregisterScope:({scope:r})=>{for(let n of Object.values(t.commandRegistrations))n.scope===r&&e.deregisterCommand(n.key)},setInput:async({input:r},n)=>{if(await n(300),r.length>8){let a=(await ut.persons.list({search:r})).results[0];a&&e.registerCommand({key:`person-${a.distinct_ids[0]}`,resolver:[{icon:nc,display:`View person ${r}`,executor:()=>{let{push:o}=bs.router.actions;o(X.personByDistinctId(a.distinct_ids[0]))}}],scope:$e})}}})),(0,Be.events)(({actions:e,values:t})=>({afterMount:()=>{let{push:r}=e,n={key:"go-to",scope:$e,prefixes:["open","visit"],resolver:[{icon:hi,display:"Go to Dashboards",executor:()=>{r(X.dashboards())}},{icon:bi,display:"Go to Project homepage",executor:()=>{r(X.projectHomepage())}},{icon:yi,display:"Go to Insights",executor:()=>{r(X.savedInsights())}},{icon:mc,display:"Create a new Trend insight",executor:()=>{r($t.TRENDS)}},{icon:Gs,display:"Create a new Funnel insight",executor:()=>{r($t.FUNNELS)}},{icon:oc,display:"Create a new Retention insight",executor:()=>{r($t.RETENTION)}},{icon:gc,display:"Create a new Paths insight",executor:()=>{r($t.PATHS)}},{icon:dc,display:"Create a new Stickiness insight",executor:()=>{r($t.STICKINESS)}},{icon:Xs,display:"Create a new Lifecycle insight",executor:()=>{r($t.LIFECYCLE)}},{icon:Qs,display:"Create a new HogQL insight",synonyms:["hogql","sql"],executor:()=>{r($t.SQL)}},{icon:xi,display:"Go to Notebooks",executor:()=>{r(X.notebooks())}},{icon:zs,display:"Go to Activity",executor:()=>{r(X.activity())}},{icon:gn,display:"Go to Data management",synonyms:["events"],executor:()=>{r(X.eventDefinitions())}},{icon:Zs,display:"Go to Actions",executor:()=>{r(X.actions())}},{icon:Ys,display:"Go to Properties",executor:()=>{r(X.propertyDefinitions())}},{icon:Ur,display:"Go to Annotations",executor:()=>{r(X.annotations())}},{icon:Za,display:"Go to Persons",synonyms:["people"],executor:()=>{r(X.persons())}},{icon:Za,display:"Go to Cohorts",executor:()=>{r(X.cohorts())}},{icon:Ri,display:"Go to Web analytics",executor:()=>{r(X.webAnalytics())}},{icon:cc,display:"Go to Data warehouse",executor:()=>{r(X.dataWarehouse())}},...t.featureFlags[et.ERROR_TRACKING]?[{icon:vc,display:"Go to Error tracking",executor:()=>{r(X.errorTracking())}}]:[],{display:"Go to Session replay",icon:Vt,executor:()=>{r(X.replay())}},{display:"Go to Surveys",icon:fi,executor:()=>{r(X.surveys())}},{icon:Ii,display:"Go to Feature flags",executor:()=>{r(X.featureFlags())}},{icon:wi,display:"Go to Experiments",executor:()=>{r(X.experiments())}},{icon:sc,display:"Go to Early access features",executor:()=>{r(X.earlyAccessFeatures())}},{icon:js,display:"Go to Data pipelines",synonyms:["integrations"],executor:()=>{r(X.pipeline())}},{icon:pc,display:"Go to Toolbar",executor:()=>{r(X.toolbarLaunch())}},{icon:vn,display:"Go to Project settings",executor:()=>{r(X.settings("project"))}},{icon:vn,display:"Go to Organization settings",executor:()=>{r(X.settings("organization"))}},{icon:()=>(0,ai.jsx)(jr,{user:t.user,size:"xs"}),display:"Go to User settings",synonyms:["account","profile"],executor:()=>{r(X.settings("user"))}},{icon:Js,display:"Log out",executor:()=>{lt.actions.logout()}},{icon:hc,display:"Go to Personal API Keys",executor:()=>{r(X.settings("user-api-keys"))}}]},i={key:"debug-clickhouse-queries",scope:$e,resolver:lt.values.user?.is_staff||lt.values.user?.is_impersonated||Vr.values.preflight?.is_debug||Vr.values.preflight?.instance_preferences?.debug_queries?{icon:gn,display:"Debug ClickHouse queries",executor:()=>fl()}:[]},a={key:"debug-copy-session-recording-url",scope:$e,resolver:{icon:Vt,display:"Debug: Copy the session recording link to clipboard",executor:()=>{let v=Ut.get_session_replay_url({withTimestamp:!0,timestampLookBack:30});mr(v,"Current session recording link to clipboard")}}},o={key:"calculator",scope:$e,resolver:v=>{if(!v||!isNaN(+v))return null;try{let y=+pr.evaluate(v);return isNaN(y)?null:{icon:As,display:`= ${y}`,guarantee:!0,executor:()=>{mr(y.toString(),"calculation result")}}}catch{return null}}},s={key:"open-urls",scope:$e,prefixes:["open","visit"],resolver:v=>{let y=v?.split(" "),I=y?.find(w=>li(w));if(I)return{icon:He,display:`Open ${I}`,synonyms:[`Visit ${I}`],executor:()=>{open(I)}};if(y&&y.length>0&&["open","visit"].includes(y[0].toLowerCase())){let w=(yn.values.currentTeam?.app_urls??[]).map(W=>({icon:He,display:`Open ${W}`,synonyms:[`Visit ${W}`],executor:()=>{open(W)}}));return w.push({icon:He,display:"Open PostHog Docs",synonyms:["technical documentation"],executor:()=>{open("https://posthog.com/docs")}}),w}return null}},l={key:"create-dashboard",scope:$e,resolver:{icon:hi,display:"Create Dashboard",executor:()=>({instruction:"Name your new dashboard",icon:Ua,scope:"Creating Dashboard",resolver:v=>v?.length?{icon:hi,display:`Create Dashboard "${v}"`,executor:()=>{Yc.actions.addDashboard({name:v})}}:null})}},c={key:"share-feedback",scope:$e,resolver:{icon:Ur,display:"Share Feedback",synonyms:["send opinion","ask question","message posthog","github issue"],executor:()=>({scope:"Sharing Feedback",resolver:[{display:"Send Message Directly to PostHog",icon:Ur,executor:()=>({instruction:"What's on your mind?",icon:Ur,resolver:v=>({icon:Ur,display:"Send",executor:v?.length?()=>(Ut.capture("palette feedback",{message:v}),{resolver:{icon:pi,display:"Message Sent!",executor:!0}}):void 0})})},{icon:Ds,display:"Create GitHub Issue",executor:()=>{open("https://github.com/PostHog/posthog/issues/new/choose")}}]})}},u={key:"toggle-theme",scope:$e,resolver:{icon:_s,display:"Change theme",synonyms:["toggle theme","dark mode","light mode"],executor:()=>({scope:"Change theme",resolver:[{icon:Vs,display:"Light mode",executor:()=>{e.updateUser({theme_mode:"light"})}},{icon:ec,display:"Dark mode",executor:()=>{e.updateUser({theme_mode:"dark"})}},{icon:Hs,display:"Sync with system preferences",executor:()=>{e.updateUser({theme_mode:"system"})}},{icon:tc,display:"Add custom CSS",executor:()=>r(X.customCss())}]})}},d={key:"toggle-hedgehog-mode",scope:$e,resolver:{icon:Is,display:`${t.hedgehogModeEnabled?"Disable":"Enable"} hedgehog mode`,synonyms:["buddy","toggle","max"],executor:()=>{e.setHedgehogModeEnabled(!t.hedgehogModeEnabled)}}},h={key:"shortcuts",scope:$e,resolver:{icon:Ua,display:"Open keyboard shortcut overview",executor:()=>(e.setCommandBar("show_shortcuts"),{resolver:()=>({icon:(0,ai.jsx)(ai.Fragment,{}),display:"",executor:!0})})}},g={key:"sidepanel",scope:$e,resolver:[...t.enabledTabs.map(v=>{let{Icon:y,label:I}=an[v];return{icon:y,display:`Open ${I} side panel`,executor:()=>{e.openSidePanel(v)}}}),...t.sidePanelOpen?[{icon:Ci,display:"Close side panel",executor:()=>{e.closeSidePanel()}}]:[]]};e.registerCommand(n),e.registerCommand(s),e.registerCommand(i),e.registerCommand(o),e.registerCommand(l),e.registerCommand(c),e.registerCommand(a),e.registerCommand(u),e.registerCommand(d),e.registerCommand(h),e.registerCommand(g),e.registerCommand(dm(r))},beforeUnmount:()=>{e.deregisterCommand("go-to"),e.deregisterCommand("open-urls"),e.deregisterCommand("debug-clickhouse-queries"),e.deregisterCommand("calculator"),e.deregisterCommand("create-personal-api-key"),e.deregisterCommand("create-dashboard"),e.deregisterCommand("share-feedback"),e.deregisterCommand("debug-copy-session-recording-url"),e.deregisterCommand("toggle-theme"),e.deregisterCommand("toggle-hedgehog-mode"),e.deregisterCommand("shortcuts"),e.deregisterCommand("sidepanel"),e.deregisterCommand(vs)}}))]);export{ym as a,El as b,Ol as c,wU as d,RZ as e};
/*! Bundled license information:

algoliasearch/dist/algoliasearch-lite.umd.js:
  (*! algoliasearch-lite.umd.js | 4.22.1 |  Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript *)

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

expr-eval/dist/index.mjs:
  (*!
   Based on ndef.parser, by Raphael Graf(r@undefined.ch)
   http://www.undefined.ch/mparser/index.html
  
   Ported to JavaScript and modified by Matthew Crumley (email@matthewcrumley.com, http://silentmatt.com/)
  
   You are free to use and modify this code in anyway you find useful. Please leave this comment in the code
   to acknowledge its original source. If you feel like it, I enjoy hearing about projects that use my code,
   but don't feel like you have to let me know or ask permission.
  *)
*/
//# sourceMappingURL=/static/chunk-U2E536M4.js.map
