@import '~/vars';

$label_position_offset: 8px;
$series_container_width: 3rem;
$glyph_margin_top: 10px;
$glyph_height: 22px;

.funnel-step {
    position: relative;
    padding-left: $series_container_width;

    .funnel-series-container {
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: $series_container_width;
        display: flex;
        flex-direction: column;
        align-items: center;

        .graph-series-glyph {
            margin-top: $glyph_margin_top;
            user-select: none;
        }

        .funnel-series-linebox {
            position: absolute;
            left: 0;
            width: calc(#{$series_container_width} / 2 + 1px);
            box-sizing: border-box;
            border-right: 2px solid #c5c9d7;

            &.before {
                top: 0;
                height: calc(#{$glyph_margin_top} + #{$glyph_height} / 2);
            }

            &.after {
                bottom: 0;
                top: calc(#{$glyph_margin_top} + #{$glyph_height} / 2);
                height: calc(100% - #{$glyph_margin_top} + #{$glyph_height} / 2);
            }
        }
    }

    .funnel-step-metadata {
        display: flex;
        flex-grow: 1;

        .ant-btn.funnel-inspect-button {
            color: $primary;

            .anticon {
                color: $primary_alt;
            }

            .funnel-inspect-label {
                color: inherit;
                text-decoration: underline;
                text-underline-position: under;
            }

            &:hover .funnel-inspect-label {
                color: inherit;
                text-decoration: none;
            }

            &:disabled {
                color: $text_default;
                cursor: initial;

                .anticon {
                    color: $text_muted_alt;
                }

                .funnel-inspect-label {
                    color: inherit;
                    text-decoration: none;
                }
            }

            &:last-child {
                padding-right: 0;
            }
        }
    }

    header,
    footer {
        min-height: 32px;
        display: flex;
        align-items: center;
    }

    header {
        padding-top: 4px;

        .funnel-step-title {
            font-weight: 700;
        }

        .funnel-step-metadata {
            justify-content: flex-end;
        }
    }

    footer {
        .funnel-step-metadata {
            justify-content: flex-start;

            .ant-btn.funnel-inspect-button {
                padding-left: 0;
                padding-right: 0.5em;
            }

            & > span {
                line-height: 32px;
            }
        }
    }
}

.funnel-bar-wrapper {
    height: 32px;
    margin: 4px 0 8px 0;
    background-color: #e7e8ee;
    border-radius: 4px;

    .funnel-bar {
        position: relative;
        height: 100%;
        background: #3b4b87;
        border-radius: 4px;

        .funnel-bar-percentage {
            position: absolute;
            top: 8px;
            line-height: 16px;
            font-weight: 500;
            color: #fff;

            &.inside {
                right: $label_position_offset;
            }

            &.outside {
                left: calc(100% + #{$label_position_offset});
                color: #3b4b87;
            }
        }
    }
}
