<validation_update_task>
You need to update a session summary based on visual observations from screen recordings that validate or contradict the initially identified issues.
</validation_update_task>

<input_data_format>
You will receive:
1. Original session summary with segments, key actions, and outcomes
2. Visual validation results from screen recordings of specific events
3. List of fields (descriptions, labels) that could be changed based on the visual confirmation.
</input_data_format>

<original_summary_input>
```
{"segments": [{"index": 0, "name": "Rapid tour of analytics areas", "start_event_id": "d66f4f4c", "end_event_id": "cd40302e", "meta": {"duration": 11, "duration_percentage": 0.6471, "events_count": 111, "events_percentage": 0.8605, "key_action_count": 5, "failure_count": 0, "abandonment_count": 0, "confusion_count": 0, "exception_count": 0}}, {"index": 1, "name": "Error-tracking failure and fallback to replay", "start_event_id": "edb7bf17", "end_event_id": "d76f5d70", "meta": {"duration": 6, "duration_percentage": 0.3529, "events_count": 19, "events_percentage": 0.1473, "key_action_count": 5, "failure_count": 1, "abandonment_count": 1, "confusion_count": 0, "exception_count": 1}}], "key_actions": [{"segment_index": 0, "events": [{"description": "Loaded main project dashboard", "abandonment": false, "confusion": false, "exception": null, "event_id": "a57dc7d1", "timestamp": "2025-09-18T07:14:25.827000+00:00", "milliseconds_since_start": 1118, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2", "event": "viewed dashboard", "event_type": null, "event_index": 22, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-a78d-7380-bf77-e208f754325b"}, {"description": "Opened LLM analytics section", "abandonment": false, "confusion": false, "exception": null, "event_id": "1147e01a", "timestamp": "2025-09-18T07:14:27.140000+00:00", "milliseconds_since_start": 2431, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2", "event": "$autocapture", "event_type": "click", "event_index": 41, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-acbb-7030-a21d-390f6ee3f0ac"}, {"description": "Switched to Product analytics insights", "abandonment": false, "confusion": false, "exception": null, "event_id": "6178fac3", "timestamp": "2025-09-18T07:14:28.601000+00:00", "milliseconds_since_start": 3892, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/llm-analytics", "event": "$autocapture", "event_type": "click", "event_index": 54, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-b270-7dd1-9fc5-9d4ca7f4c4ff"}, {"description": "Visited SQL editor for deeper analysis", "abandonment": false, "confusion": false, "exception": null, "event_id": "d9c78aa0", "timestamp": "2025-09-18T07:14:33.139000+00:00", "milliseconds_since_start": 8430, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/llm-analytics", "event": "$autocapture", "event_type": "click", "event_index": 88, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-c425-72f0-9e85-64cd4060bfb9"}, {"description": "Arrived at Session replay home", "abandonment": false, "confusion": false, "exception": null, "event_id": "a9f18137", "timestamp": "2025-09-18T07:14:35.333000+00:00", "milliseconds_since_start": 10624, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/web", "event": "$autocapture", "event_type": "click", "event_index": 105, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-ccba-7c47-9af8-661a3e35e272"}]}, {"segment_index": 1, "events": [{"description": "Clicked into Error tracking feature", "abandonment": false, "confusion": false, "exception": null, "event_id": "edb7bf17", "timestamp": "2025-09-18T07:14:35.908000+00:00", "milliseconds_since_start": 11199, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/replay/home", "event": "$autocapture", "event_type": "click", "event_index": 111, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-cef9-7aa9-818c-c7e887c68c32"}, {"description": "Blocking store path exception rendered Error tracking unusable", "abandonment": true, "confusion": false, "exception": "blocking", "event_id": "5e7fc9d4", "timestamp": "2025-09-18T07:14:37.095000+00:00", "milliseconds_since_start": 12386, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/error_tracking", "event": "$exception", "event_type": null, "event_index": 113, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-cf44-7127-8c6b-60dfa839ee2d"}, {"description": "Moved on to Surveys section", "abandonment": false, "confusion": false, "exception": null, "event_id": "739c2808", "timestamp": "2025-09-18T07:14:37.158000+00:00", "milliseconds_since_start": 12449, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/error_tracking", "event": "$autocapture", "event_type": "click", "event_index": 114, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-d3e0-74ba-a35f-f964102c64d0"}, {"description": "Returned to Session replay home", "abandonment": false, "confusion": false, "exception": null, "event_id": "33b6f4fc", "timestamp": "2025-09-18T07:14:39.690000+00:00", "milliseconds_since_start": 14981, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/surveys", "event": "$autocapture", "event_type": "click", "event_index": 117, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-ddc4-720e-8fd7-9b0a21c452dd"}, {"description": "Applied 30-day filter to recording list", "abandonment": false, "confusion": false, "exception": null, "event_id": "29f5ebfa", "timestamp": "2025-09-18T07:14:41.929000+00:00", "milliseconds_since_start": 17220, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/replay/home", "event": "$autocapture", "event_type": "click", "event_index": 123, "session_id": "01995bac-a002-7ba2-bc68-baa043d8e46c", "event_uuid": "01995bac-e683-77d3-857d-3c03486e088c"}]}], "segment_outcomes": [{"segment_index": 0, "summary": "User swiftly browsed multiple analytics areas without errors", "success": true}, {"segment_index": 1, "summary": "Error tracking page threw blocking exception, user abandoned and focused on replay instead", "success": false}], "session_outcome": {"description": "Session showcased broad feature exploration but a blocking Error-tracking bug prevented intended usage of that key tool", "success": false}}
```
</original_summary_input>

<visual_validation_input>
Visual observations from actual screen recordings for the following events:

```
{"5e7fc9d4": "The user begins by navigating the Safaristico dashboard, opening the 'Default project'. They first click on \"Web analytics\" under the \"Analytics\" section. The \"Web analytics\" page loads, displaying visitor, page view, session, session duration, and bounce rate metrics, all showing \"0\" with a message stating \"This project has no events yet.\" A section for \"Unique visitors\" shows a loading spinner with \"Crunching through hogloads of data...\" and a message about recordings being outside the retention period.\n\nNext, the user clicks on \"Session replay\" under \"Behavior\". The \"Recordings\" page loads, showing a welcome message and empty recording lists. The user interacts with the \"Relative\" dropdown menu, which displays options like \"Last 7 days\" and \"All time\", and selects \"Last 7 days.\" A message appears indicating \"No matching recordings\" and \"Recordings might be outside the retention period\" and \"An ad blocker might be preventing recordings.\"\n\nThe user then clicks on \"Error tracking,\" which loads a page stating, \"You haven't captured any exceptions.\" Finally, the user clicks on \"Surveys.\" This page loads with a message \"Create your first survey\" and also notes, \"Surveys are currently disabled for this project\" and requires configuration. The user then clicks on \"Session replay\" again, where the filter dropdown shows \"Last 7 days\" and the message about no matching recordings is still present."}
```
</visual_validation_input>

<fields_to_update>
Decide if the event/segment/session descriptions or labels should be changed based on the new data coming from visual observations. Fill `new_value` field for the fields that require update and return them. Don't return fields that don't require any updates.

```
- path: key_actions.1.events.1.abandonment
  current_value: true
  new_value: null
- path: key_actions.1.events.1.confusion
  current_value: false
  new_value: null
- path: key_actions.1.events.1.description
  current_value: Blocking store path exception rendered Error tracking unusable
  new_value: null
- path: key_actions.1.events.1.exception
  current_value: blocking
  new_value: null
- path: segment_outcomes.1.success
  current_value: false
  new_value: null
- path: segment_outcomes.1.summary
  current_value: Error tracking page threw blocking exception, user abandoned and
    focused on replay instead
  new_value: null
- path: segments.1.name
  current_value: Error-tracking failure and fallback to replay
  new_value: null
- path: session_outcome.description
  current_value: Session showcased broad feature exploration but a blocking Error-tracking
    bug prevented intended usage of that key tool
  new_value: null
- path: session_outcome.success
  current_value: false
  new_value: null

```
</fields_to_update>

<update_instructions>
# Step 1: Analyze Visual Evidence

For each validated event (those with moment_ids in validation results):

1.1. Compare the visual observation against the original event description
1.2. Identify clear contradictions:
   - ✓ "Exception occurred" vs. video shows normal page load
   - ✓ "Blocking error" vs. video shows user continuing successfully  
   - ✓ "Failed to load" vs. video shows content appearing
   - ✗ User found workaround (still an issue, just non-blocking)
   - ✗ Slow loading (not an exception unless it failed completely)

1.3. Determine the actual event type:
   - If video shows normal interaction → exception: null
   - If video shows error but user continued → exception: "non-blocking"  
   - If video confirms blocking error → exception: "blocking" (no change)

# Step 2: Update Event Descriptions

For events requiring updates based on Step 1:

2.1. Update exception flags:
   - Set to null if no error occurred
   - Change from "blocking" to "non-blocking" if user could continue
   - Keep as "blocking" only if video confirms complete blockage

2.2. Revise event descriptions:
   - Remove error language if no error occurred
   - Focus on the actual user action observed
   - Keep descriptions concise (4-8 words)
   
   Examples:
   - "Blocking store path exception rendered Error tracking unusable" → "Clicked into Error tracking feature"
   - "Failed API call prevented dashboard load" → "Viewed analytics dashboard"
   - "Error loading recommendations" → "Browsed product recommendations"

2.3. Update confusion/abandonment flags:
   - Remove confusion: true if video shows intentional navigation
   - Remove abandonment: true if user completed their goal
   - Keep flags only if video confirms the behavior

# Step 3: Cascade Updates to Segment Outcomes

After updating individual events, reconsider each affected segment:

3.1. Re-evaluate segment success:
   - If all "blocking" exceptions were false positives → success: true
   - If user completed meaningful actions despite non-blocking issues → success: true
   - Keep success: false only if video confirms actual failure

3.2. Update segment summaries:
   - Remove references to errors that didn't occur
   - Focus on what user actually accomplished
   - Keep summaries concise (1-2 sentences, up to 15 words)
   
   Examples:
   - "Error tracking page threw blocking exception, user abandoned" → "User explored error tracking and surveys features"
   - "Dashboard failed to load properly" → "User successfully reviewed analytics dashboard"

# Step 4: Update Overall Session Outcome

Based on all event and segment updates:

4.1. Re-determine session success:
   - If primary user goals were achieved → success: true
   - If video shows user left after completing tasks → success: true
   - Keep success: false only if video confirms critical failures

4.2. Revise session description:
   - Emphasize actual accomplishments over false-positive errors
   - Mention only confirmed issues that impacted the journey
   - Keep focused (1-2 sentences, up to 30 words)

   Examples:
   - "Session failed due to blocking Error-tracking bug" → "User successfully explored multiple analytics features"
   - "Multiple errors prevented feature usage" → "User completed analytics review despite minor issues"

# Step 5: Generate Update List

5.1. Include ONLY fields that need changes
5.2. Provide current value (from) and new value (to) for each update
5.3. Use exact field paths from the eligible_update_fields list
5.4. Do not include fields where the value remains unchanged

</update_instructions>

<critical_guidelines>
- ONLY update based on clear visual evidence - when in doubt, keep original assessment
- User finding a workaround does NOT eliminate the issue (change to non-blocking, not null)
- Slow performance is not an exception unless it completely failed
- If video is ambiguous or unclear, do not update that field
- Focus updates on validated events only - do not speculate about unvalidated events
- Cascade updates logically: fixed events → improved segments → successful session
</critical_guidelines>

<output_format>
Return a YAML object containing only the fields that require updates.

IMPORTANT:
- Use exact field paths from eligible_update_fields
- Include field `path` and `new_value`, if it should be changed based on visual observations.
- Only include fields that are actually changing
- Ensure all string values are properly escaped
</output_format>