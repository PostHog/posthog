<validation_update_task>
You need to update a session summary based on visual observations from screen recordings that validate or contradict the initially identified issues.
</validation_update_task>

<input_data_format>
You will receive:
1. Original session summary with segments, key actions, and outcomes
2. Visual validation results from screen recordings of specific events
3. List of fields (descriptions, labels) that could be changed based on the visual confirmation.
</input_data_format>

<original_summary_input>
```
{"segments": [{"index": 0, "name": "Explored analytics features and session replay, encountered error in error tracking", "start_event_id": "d66f4f4c", "end_event_id": "d76f5d70", "meta": {"duration": 18, "duration_percentage": 1.0, "events_count": 130, "events_percentage": 1.0, "key_action_count": 8, "failure_count": 1, "abandonment_count": 0, "confusion_count": 0, "exception_count": 1}}], "key_actions": [{"segment_index": 0, "events": [{"description": "User opted in and entered the application", "abandonment": false, "confusion": false, "exception": null, "event_id": "d66f4f4c", "timestamp": "2025-09-18T07:14:23.889000+00:00", "milliseconds_since_start": 0, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/", "event": "$opt_in", "event_type": null, "event_index": 0}, {"description": "Viewed main project dashboard and triggered multiple dashboard queries", "abandonment": false, "confusion": false, "exception": null, "event_id": "add68946", "timestamp": "2025-09-18T07:14:25.035000+00:00", "milliseconds_since_start": 326, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2", "event": "$pageview", "event_type": null, "event_index": 8}, {"description": "Navigated to LLM analytics and product analytics sections", "abandonment": false, "confusion": false, "exception": null, "event_id": "1147e01a", "timestamp": "2025-09-18T07:14:27.140000+00:00", "milliseconds_since_start": 2431, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2", "event": "$autocapture", "event_type": "click", "event_index": 41}, {"description": "Explored dashboards, LLM analytics, product analytics, SQL editor, and web analytics", "abandonment": false, "confusion": false, "exception": null, "event_id": "2c97d09c", "timestamp": "2025-09-18T07:14:30.804000+00:00", "milliseconds_since_start": 6095, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2", "event": "$autocapture", "event_type": "click", "event_index": 75}, {"description": "Accessed session replay and error tracking features", "abandonment": false, "confusion": false, "exception": null, "event_id": "a9f18137", "timestamp": "2025-09-18T07:14:35.333000+00:00", "milliseconds_since_start": 10624, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/web", "event": "$autocapture", "event_type": "click", "event_index": 105}, {"description": "Encountered blocking error in error tracking: missing path in store", "abandonment": false, "confusion": false, "exception": "blocking", "event_id": "5e7fc9d4", "timestamp": "2025-09-18T07:14:37.095000+00:00", "milliseconds_since_start": 12386, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/error_tracking", "event": "$exception", "event_type": null, "event_index": 113}, {"description": "Navigated to surveys and showed product intent", "abandonment": false, "confusion": false, "exception": null, "event_id": "739c2808", "timestamp": "2025-09-18T07:14:37.158000+00:00", "milliseconds_since_start": 12449, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/error_tracking", "event": "$autocapture", "event_type": "click", "event_index": 114}, {"description": "Returned to session replay, filtered recordings, and fetched updated list", "abandonment": false, "confusion": false, "exception": null, "event_id": "33b6f4fc", "timestamp": "2025-09-18T07:14:39.690000+00:00", "milliseconds_since_start": 14981, "window_id": "01995bac-a002-7ba2-bc68-baa1a21f6b9a", "current_url": "http://localhost:8010/project/2/surveys", "event": "$autocapture", "event_type": "click", "event_index": 117}]}], "segment_outcomes": [{"segment_index": 0, "summary": "User explored multiple analytics features but was blocked by a technical error in error tracking.", "success": false}], "session_outcome": {"description": "User actively explored analytics, session replay, and error tracking, but a blocking error in error tracking prevented full feature use and likely disrupted their workflow.", "success": false}}
```
</original_summary_input>

<visual_validation_input>
Visual observations from actual screen recordings for the following events:

```
{"5e7fc9d4": "The user navigated through various analytics sections of the application by clicking items in the left sidebar menu.\n\nInitially, \"LLM analytics\" was selected, displaying a message indicating \"No LLM generation events have been detected\" and advising to instrument LLM calls with the PostHog SDK. Dashboards for \"Traces\", \"Generative AI users\", and \"Total cost (USD)\" were shown with no matching data.\n\nNext, the user clicked \"Web analytics\". The main panel updated to show web analytics data, including \"Visitors\", \"Page views\", \"Sessions\", \"Session duration\", and \"Bounce rate\", all displaying \"0\". A warning banner appeared stating, \"We couldn't find any authorized domains,\" and mentioned that some filters might not work correctly. The \"Unique visitors\" section indicated \"Crunching through hoards of data...\" and \"There are no matching events for this query.\"\n\nSubsequently, the user clicked \"Error tracking\". The panel showed \"You haven't captured any exceptions\" and provided instructions to \"Enable exception autocapture\" for the JS SDK.\n\nThe user then clicked \"Surveys\". The main panel indicated that \"Surveys are currently disabled for this project\" and prompted to re-enable them in settings. The \"Active\" tab displayed an option to \"Create your first survey.\"\n\nFinally, the user clicked \"Session replay\". The main panel updated with a \"Welcome to session replay!\" message and an empty list of recordings, stating \"No recording selected.\" A filter section on the left indicated \"No matching recordings\" and warned that \"Recordings might be outside the retention window\" and that \"An ad blocker might be preventing recordings.\" No blocking errors or specific messages about \"missing path in store\" were observed during these navigation steps."}
```
</visual_validation_input>

<fields_to_update>
Decide if the event/segment/session descriptions or labels should be changed based on the new data coming from visual observations. Fill `new_value` field for the fields that require update and return them. Don't return fields that don't require any updates.

```
- path: key_actions.0.events.5.abandonment
  current_value: false
  new_value: null
- path: key_actions.0.events.5.confusion
  current_value: false
  new_value: null
- path: key_actions.0.events.5.description
  current_value: 'Encountered blocking error in error tracking: missing path in store'
  new_value: null
- path: key_actions.0.events.5.exception
  current_value: blocking
  new_value: null
- path: segment_outcomes.0.success
  current_value: false
  new_value: null
- path: segment_outcomes.0.summary
  current_value: User explored multiple analytics features but was blocked by a technical
    error in error tracking.
  new_value: null
- path: segments.0.name
  current_value: Explored analytics features and session replay, encountered error
    in error tracking
  new_value: null
- path: session_outcome.description
  current_value: User actively explored analytics, session replay, and error tracking,
    but a blocking error in error tracking prevented full feature use and likely disrupted
    their workflow.
  new_value: null
- path: session_outcome.success
  current_value: false
  new_value: null

```
</fields_to_update>

<update_instructions>
# Step 1: Analyze Visual Evidence

For each validated event (those with moment_ids in validation results):

1.1. Compare the visual observation against the original event description
1.2. Identify clear contradictions:
   - ✓ "Exception occurred" vs. video shows normal page load
   - ✓ "Blocking error" vs. video shows user continuing successfully  
   - ✓ "Failed to load" vs. video shows content appearing
   - ✗ User found workaround (still an issue, just non-blocking)
   - ✗ Slow loading (not an exception unless it failed completely)

1.3. Determine the actual event type:
   - If video shows normal interaction → exception: null
   - If video shows error but user continued → exception: "non-blocking"  
   - If video confirms blocking error → exception: "blocking" (no change)

# Step 2: Update Event Descriptions

For events requiring updates based on Step 1:

2.1. Update exception flags:
   - Set to null if no error occurred
   - Change from "blocking" to "non-blocking" if user could continue
   - Keep as "blocking" only if video confirms complete blockage

2.2. Revise event descriptions:
   - Remove error language if no error occurred
   - Focus on the actual user action observed
   - Keep descriptions concise (4-8 words)
   
   Examples:
   - "Blocking store path exception rendered Error tracking unusable" → "Clicked into Error tracking feature"
   - "Failed API call prevented dashboard load" → "Viewed analytics dashboard"
   - "Error loading recommendations" → "Browsed product recommendations"

2.3. Update confusion/abandonment flags:
   - Remove confusion: true if video shows intentional navigation
   - Remove abandonment: true if user completed their goal
   - Keep flags only if video confirms the behavior

# Step 3: Cascade Updates to Segment Outcomes

After updating individual events, reconsider each affected segment:

3.1. Re-evaluate segment success:
   - If all "blocking" exceptions were false positives → success: true
   - If user completed meaningful actions despite non-blocking issues → success: true
   - Keep success: false only if video confirms actual failure

3.2. Update segment summaries:
   - Remove references to errors that didn't occur
   - Focus on what user actually accomplished
   - Keep summaries concise (1-2 sentences, up to 15 words)
   
   Examples:
   - "Error tracking page threw blocking exception, user abandoned" → "User explored error tracking and surveys features"
   - "Dashboard failed to load properly" → "User successfully reviewed analytics dashboard"

# Step 4: Update Overall Session Outcome

Based on all event and segment updates:

4.1. Re-determine session success:
   - If primary user goals were achieved → success: true
   - If video shows user left after completing tasks → success: true
   - Keep success: false only if video confirms critical failures

4.2. Revise session description:
   - Emphasize actual accomplishments over false-positive errors
   - Mention only confirmed issues that impacted the journey
   - Keep focused (1-2 sentences, up to 30 words)

   Examples:
   - "Session failed due to blocking Error-tracking bug" → "User successfully explored multiple analytics features"
   - "Multiple errors prevented feature usage" → "User completed analytics review despite minor issues"

# Step 5: Generate Update List

5.1. Include ONLY fields that need changes
5.2. Provide current value (from) and new value (to) for each update
5.3. Use exact field paths from the eligible_update_fields list
5.4. Do not include fields where the value remains unchanged

</update_instructions>

<critical_guidelines>
- ONLY update based on clear visual evidence - when in doubt, keep original assessment
- User finding a workaround does NOT eliminate the issue (change to non-blocking, not null)
- Slow performance is not an exception unless it completely failed
- If video is ambiguous or unclear, do not update that field
- Focus updates on validated events only - do not speculate about unvalidated events
- Cascade updates logically: fixed events → improved segments → successful session
</critical_guidelines>

<output_format>
Return a YAML object containing only the fields that require updates.

IMPORTANT:
- Use exact field paths from eligible_update_fields
- Include field `path` and `new_value`, if it should be changed based on visual observations.
- Only include fields that are actually changing
- Ensure all string values are properly escaped
</output_format>