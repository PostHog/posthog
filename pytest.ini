[pytest]
pythonpath = . common
env =
    DEBUG=1
    TEST=1
DJANGO_SETTINGS_MODULE = posthog.settings
# bin/ has its own pyproject.toml and is tested separately via `uv run --project bin pytest`
addopts = -p no:warnings --reuse-db --ignore=bin --ignore=posthog/user_scripts --ignore=services/llm-gateway --ignore=common/ingestion/acceptance_tests

markers =
    ee
    clickhouse_only
    skip_on_multitenancy
    async_migrations
    requires_secrets: test needs internal secrets or infra and is skipped on external PRs

asyncio_mode = auto
asyncio_default_fixture_loop_scope = module
asyncio_default_test_loop_scope = module
