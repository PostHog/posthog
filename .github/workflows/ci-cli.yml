name: CI CLI
on:
    pull_request:
        paths:
            - cli/Cargo.toml

jobs:
    check-lockfile:
        name: Check lockfile is up to date
        runs-on: ubuntu-latest
        defaults:
            run:
                working-directory: cli
        steps:
            - uses: actions/checkout@f43a0e5ff2bd294095638e18286ca9a3d1956744 # v3

            - name: Install rust
              uses: dtolnay/rust-toolchain@6691ebadcb18182cc1391d07c9f295f657c593cd # 1.88

            - name: Install sccache
              run: cargo generate-lockfile --locked
