/* eslint-disable */
/**
 * Generated by orval v7.16.1 üç∫
 * Do not edit manually.
 * PostHog API - tasks
 * OpenAPI spec version: 1.0.0
 */
import { apiMutator } from '../../../../frontend/src/lib/api-orval-mutator'

// https://stackoverflow.com/questions/49579094/typescript-conditional-types-filter-out-readonly-properties-pick-only-requir/49579497#49579497
type IfEquals<X, Y, A = X, B = never> = (<T>() => T extends X ? 1 : 2) extends <T>() => T extends Y ? 1 : 2 ? A : B

type WritableKeys<T> = {
    [P in keyof T]-?: IfEquals<{ [Q in P]: T[P] }, { -readonly [Q in P]: T[P] }, P>
}[keyof T]

type UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void ? I : never
type DistributeReadOnlyOverUnions<T> = T extends any ? NonReadonly<T> : never

type Writable<T> = Pick<T, WritableKeys<T>>
type NonReadonly<T> = [T] extends [UnionToIntersection<T>]
    ? {
          [P in keyof Writable<T>]: T[P] extends object ? NonReadonly<NonNullable<T[P]>> : T[P]
      }
    : DistributeReadOnlyOverUnions<T>

export interface PaginatedTaskList {
    count: number
    /** @nullable */
    next?: string | null
    /** @nullable */
    previous?: string | null
    results: Task[]
}

/**
 * Serializer for extracted tasks
 */
export interface Task {
    title: string
    description?: string
    /** @nullable */
    assignee?: string | null
}

export interface PatchedTask {
    readonly id?: string
    /** @nullable */
    readonly task_number?: number | null
    readonly slug?: string
    /** @maxLength 255 */
    title?: string
    description?: string
    origin_product?: OriginProductEnum
    /**
     * @minimum -2147483648
     * @maximum 2147483647
     */
    position?: number
    /**
     * GitHub integration for this task
     * @nullable
     */
    github_integration?: number | null
    /** Repository configuration with organization and repository fields */
    repository_config?: unknown
    readonly repository_list?: string
    readonly primary_repository?: string
    readonly latest_run?: string
    readonly created_at?: string
    readonly updated_at?: string
    readonly created_by?: UserBasic
}

export interface PatchedTaskUpdatePositionRequest {
    /** New position for the task */
    position?: number
}

export type ErrorResponseError = { [key: string]: unknown }

export interface ErrorResponse {
    error: ErrorResponseError
}

/**
 * * `error_tracking` - Error Tracking
 * `eval_clusters` - Eval Clusters
 * `user_created` - User Created
 * `support_queue` - Support Queue
 * `session_summaries` - Session Summaries
 */
export type OriginProductEnum = (typeof OriginProductEnum)[keyof typeof OriginProductEnum]

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const OriginProductEnum = {
    error_tracking: 'error_tracking',
    eval_clusters: 'eval_clusters',
    user_created: 'user_created',
    support_queue: 'support_queue',
    session_summaries: 'session_summaries',
} as const

/**
 * @nullable
 */
export type UserBasicHedgehogConfig = { [key: string]: unknown } | null

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const UserBasicRoleAtOrganization = { ...RoleAtOrganizationEnum, ...BlankEnum, ...NullEnum } as const
/**
 * @nullable
 */
export type UserBasicRoleAtOrganization =
    | (typeof UserBasicRoleAtOrganization)[keyof typeof UserBasicRoleAtOrganization]
    | null

export interface UserBasic {
    readonly id: number
    readonly uuid: string
    /**
     * @maxLength 200
     * @nullable
     */
    distinct_id?: string | null
    /** @maxLength 150 */
    first_name?: string
    /** @maxLength 150 */
    last_name?: string
    /** @maxLength 254 */
    email: string
    /** @nullable */
    is_email_verified?: boolean | null
    /** @nullable */
    readonly hedgehog_config: UserBasicHedgehogConfig
    /** @nullable */
    role_at_organization?: UserBasicRoleAtOrganization
}

/**
 * * `engineering` - Engineering
 * `data` - Data
 * `product` - Product Management
 * `founder` - Founder
 * `leadership` - Leadership
 * `marketing` - Marketing
 * `sales` - Sales / Success
 * `other` - Other
 */
export type RoleAtOrganizationEnum = (typeof RoleAtOrganizationEnum)[keyof typeof RoleAtOrganizationEnum]

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const RoleAtOrganizationEnum = {
    engineering: 'engineering',
    data: 'data',
    product: 'product',
    founder: 'founder',
    leadership: 'leadership',
    marketing: 'marketing',
    sales: 'sales',
    other: 'other',
} as const

export type BlankEnum = (typeof BlankEnum)[keyof typeof BlankEnum]

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const BlankEnum = {
    '': '',
} as const

export type NullEnum = (typeof NullEnum)[keyof typeof NullEnum]

// eslint-disable-next-line @typescript-eslint/no-redeclare
export const NullEnum = {} as const

export type TasksListParams = {
    /**
     * Number of results to return per page.
     */
    limit?: number
    /**
     * The initial index from which to return the results.
     */
    offset?: number
    /**
     * Filter by repository organization
     * @minLength 1
     */
    organization?: string
    /**
     * Filter by origin product
     * @minLength 1
     */
    origin_product?: string
    /**
     * Filter by repository name (can include org/repo format)
     * @minLength 1
     */
    repository?: string
    /**
     * Filter by task run stage
     * @minLength 1
     */
    stage?: string
}

/**
 * Get a list of tasks for the current project, with optional filtering by origin product, stage, organization, and repository.
 * @summary List tasks
 */
export type tasksListResponse200 = {
    data: PaginatedTaskList
    status: 200
}

export type tasksListResponseSuccess = tasksListResponse200 & {
    headers: Headers
}
export type tasksListResponse = tasksListResponseSuccess

export const getTasksListUrl = (projectId: string, params?: TasksListParams) => {
    const normalizedParams = new URLSearchParams()

    Object.entries(params || {}).forEach(([key, value]) => {
        if (value !== undefined) {
            normalizedParams.append(key, value === null ? 'null' : value.toString())
        }
    })

    const stringifiedParams = normalizedParams.toString()

    return stringifiedParams.length > 0
        ? `/api/projects/${projectId}/tasks/?${stringifiedParams}`
        : `/api/projects/${projectId}/tasks/`
}

export const tasksList = async (
    projectId: string,
    params?: TasksListParams,
    options?: RequestInit
): Promise<tasksListResponse> => {
    return apiMutator<tasksListResponse>(getTasksListUrl(projectId, params), {
        ...options,
        method: 'GET',
    })
}

/**
 * API for managing tasks within a project. Tasks represent units of work to be performed by an agent.
 */
export type tasksCreateResponse201 = {
    data: Task
    status: 201
}

export type tasksCreateResponseSuccess = tasksCreateResponse201 & {
    headers: Headers
}
export type tasksCreateResponse = tasksCreateResponseSuccess

export const getTasksCreateUrl = (projectId: string) => {
    return `/api/projects/${projectId}/tasks/`
}

export const tasksCreate = async (
    projectId: string,
    task: Task,
    options?: RequestInit
): Promise<tasksCreateResponse> => {
    return apiMutator<tasksCreateResponse>(getTasksCreateUrl(projectId), {
        ...options,
        method: 'POST',
        headers: { 'Content-Type': 'application/json', ...options?.headers },
        body: JSON.stringify(task),
    })
}

/**
 * API for managing tasks within a project. Tasks represent units of work to be performed by an agent.
 */
export type tasksRetrieveResponse200 = {
    data: Task
    status: 200
}

export type tasksRetrieveResponseSuccess = tasksRetrieveResponse200 & {
    headers: Headers
}
export type tasksRetrieveResponse = tasksRetrieveResponseSuccess

export const getTasksRetrieveUrl = (projectId: string, id: string) => {
    return `/api/projects/${projectId}/tasks/${id}/`
}

export const tasksRetrieve = async (
    projectId: string,
    id: string,
    options?: RequestInit
): Promise<tasksRetrieveResponse> => {
    return apiMutator<tasksRetrieveResponse>(getTasksRetrieveUrl(projectId, id), {
        ...options,
        method: 'GET',
    })
}

/**
 * API for managing tasks within a project. Tasks represent units of work to be performed by an agent.
 */
export type tasksUpdateResponse200 = {
    data: Task
    status: 200
}

export type tasksUpdateResponseSuccess = tasksUpdateResponse200 & {
    headers: Headers
}
export type tasksUpdateResponse = tasksUpdateResponseSuccess

export const getTasksUpdateUrl = (projectId: string, id: string) => {
    return `/api/projects/${projectId}/tasks/${id}/`
}

export const tasksUpdate = async (
    projectId: string,
    id: string,
    task: Task,
    options?: RequestInit
): Promise<tasksUpdateResponse> => {
    return apiMutator<tasksUpdateResponse>(getTasksUpdateUrl(projectId, id), {
        ...options,
        method: 'PUT',
        headers: { 'Content-Type': 'application/json', ...options?.headers },
        body: JSON.stringify(task),
    })
}

/**
 * API for managing tasks within a project. Tasks represent units of work to be performed by an agent.
 */
export type tasksPartialUpdateResponse200 = {
    data: Task
    status: 200
}

export type tasksPartialUpdateResponseSuccess = tasksPartialUpdateResponse200 & {
    headers: Headers
}
export type tasksPartialUpdateResponse = tasksPartialUpdateResponseSuccess

export const getTasksPartialUpdateUrl = (projectId: string, id: string) => {
    return `/api/projects/${projectId}/tasks/${id}/`
}

export const tasksPartialUpdate = async (
    projectId: string,
    id: string,
    patchedTask: NonReadonly<PatchedTask>,
    options?: RequestInit
): Promise<tasksPartialUpdateResponse> => {
    return apiMutator<tasksPartialUpdateResponse>(getTasksPartialUpdateUrl(projectId, id), {
        ...options,
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json', ...options?.headers },
        body: JSON.stringify(patchedTask),
    })
}

/**
 * API for managing tasks within a project. Tasks represent units of work to be performed by an agent.
 */
export type tasksDestroyResponse204 = {
    data: void
    status: 204
}

export type tasksDestroyResponseSuccess = tasksDestroyResponse204 & {
    headers: Headers
}
export type tasksDestroyResponse = tasksDestroyResponseSuccess

export const getTasksDestroyUrl = (projectId: string, id: string) => {
    return `/api/projects/${projectId}/tasks/${id}/`
}

export const tasksDestroy = async (
    projectId: string,
    id: string,
    options?: RequestInit
): Promise<tasksDestroyResponse> => {
    return apiMutator<tasksDestroyResponse>(getTasksDestroyUrl(projectId, id), {
        ...options,
        method: 'DELETE',
    })
}

/**
 * Kick off the workflow for the task in its current stage.
 * @summary Run task
 */
export type tasksRunCreateResponse200 = {
    data: Task
    status: 200
}

export type tasksRunCreateResponse404 = {
    data: void
    status: 404
}

export type tasksRunCreateResponseSuccess = tasksRunCreateResponse200 & {
    headers: Headers
}
export type tasksRunCreateResponseError = tasksRunCreateResponse404 & {
    headers: Headers
}

export type tasksRunCreateResponse = tasksRunCreateResponseSuccess | tasksRunCreateResponseError

export const getTasksRunCreateUrl = (projectId: string, id: string) => {
    return `/api/projects/${projectId}/tasks/${id}/run/`
}

export const tasksRunCreate = async (
    projectId: string,
    id: string,
    options?: RequestInit
): Promise<tasksRunCreateResponse> => {
    return apiMutator<tasksRunCreateResponse>(getTasksRunCreateUrl(projectId, id), {
        ...options,
        method: 'POST',
    })
}

/**
 * Update the position of a task within its current stage
 * @summary Update task position
 */
export type tasksUpdatePositionPartialUpdateResponse200 = {
    data: Task
    status: 200
}

export type tasksUpdatePositionPartialUpdateResponse400 = {
    data: ErrorResponse
    status: 400
}

export type tasksUpdatePositionPartialUpdateResponse404 = {
    data: void
    status: 404
}

export type tasksUpdatePositionPartialUpdateResponseSuccess = tasksUpdatePositionPartialUpdateResponse200 & {
    headers: Headers
}
export type tasksUpdatePositionPartialUpdateResponseError = (
    | tasksUpdatePositionPartialUpdateResponse400
    | tasksUpdatePositionPartialUpdateResponse404
) & {
    headers: Headers
}

export type tasksUpdatePositionPartialUpdateResponse =
    | tasksUpdatePositionPartialUpdateResponseSuccess
    | tasksUpdatePositionPartialUpdateResponseError

export const getTasksUpdatePositionPartialUpdateUrl = (projectId: string, id: string) => {
    return `/api/projects/${projectId}/tasks/${id}/update_position/`
}

export const tasksUpdatePositionPartialUpdate = async (
    projectId: string,
    id: string,
    patchedTaskUpdatePositionRequest: PatchedTaskUpdatePositionRequest,
    options?: RequestInit
): Promise<tasksUpdatePositionPartialUpdateResponse> => {
    return apiMutator<tasksUpdatePositionPartialUpdateResponse>(getTasksUpdatePositionPartialUpdateUrl(projectId, id), {
        ...options,
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json', ...options?.headers },
        body: JSON.stringify(patchedTaskUpdatePositionRequest),
    })
}
