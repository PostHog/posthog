// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`EventPipelineRunner runEventPipeline() runs steps 1`] = `
[
  [
    "dropOldEventsStep",
    [
      {
        "distinct_id": "my_id",
        "event": "default event",
        "ip": "127.0.0.1",
        "now": "2020-02-23T02:15:00.000Z",
        "properties": {},
        "site_url": "http://localhost",
        "team_id": 2,
        "timestamp": "2020-02-23T02:15:00.000Z",
        "uuid": "uuid1",
      },
      {
        "anonymize_ips": true,
        "api_token": "token1",
        "available_features": [],
        "cookieless_server_hash_mode": null,
        "drop_events_older_than_seconds": null,
        "heatmaps_opt_in": null,
        "id": 2,
        "ingested_event": true,
        "name": "2",
        "organization_id": "2",
        "person_display_name_properties": null,
        "person_processing_opt_out": false,
        "project_id": 2,
        "session_recording_opt_in": true,
        "slack_incoming_webhook": "slack_incoming_webhook",
        "test_account_filters": null,
        "timezone": "UTC",
        "uuid": "<REPLACED-UUID-0>",
      },
    ],
  ],
  [
    "transformEventStep",
    [
      null,
    ],
  ],
  [
    "normalizeEventStep",
    [
      true,
    ],
  ],
  [
    "processPersonsStep",
    [
      {
        "distinct_id": "my_id",
        "event": "default event",
        "ip": null,
        "now": "2020-02-23T02:15:00.000Z",
        "properties": {
          "$ip": "127.0.0.1",
        },
        "site_url": "http://localhost",
        "team_id": 2,
        "timestamp": "2020-02-23T02:15:00.000Z",
        "uuid": "uuid1",
      },
      {
        "anonymize_ips": true,
        "api_token": "token1",
        "available_features": [],
        "cookieless_server_hash_mode": null,
        "drop_events_older_than_seconds": null,
        "heatmaps_opt_in": null,
        "id": 2,
        "ingested_event": true,
        "name": "2",
        "organization_id": "2",
        "person_display_name_properties": null,
        "person_processing_opt_out": false,
        "project_id": 2,
        "session_recording_opt_in": true,
        "slack_incoming_webhook": "slack_incoming_webhook",
        "test_account_filters": null,
        "timezone": "UTC",
        "uuid": "<REPLACED-UUID-0>",
      },
      "2020-02-23T02:15:00.000Z",
      true,
      {
        "cacheMetrics": {
          "checkCacheHits": 0,
          "checkCacheMisses": 0,
          "updateCacheHits": 0,
          "updateCacheMisses": 0,
        },
        "databaseOperationCountsPerDistinctId": {},
        "distinctIdToPersonId": {},
        "fetchPromisesForChecking": {},
        "fetchPromisesForUpdate": {},
        "kafkaProducer": {},
        "methodCountsPerDistinctId": {},
        "options": {
          "dbWriteMode": "NO_ASSERT",
          "maxConcurrentUpdates": 10,
          "maxOptimisticUpdateRetries": 5,
          "optimisticUpdateRetryInterval": 50,
        },
        "personCheckCache": {},
        "personRepository": {
          "options": {
            "calculatePropertiesSize": 0,
            "personPropertiesSizeLimit": 524288,
          },
          "protectedPropertyKeys": [
            "email",
            "name",
            "$app_build",
            "$app_name",
            "$app_namespace",
            "$app_version",
            "$browser",
            "$browser_version",
            "$device_type",
            "$current_url",
            "$pathname",
            "$os",
            "$os_version",
            "$referring_domain",
            "$referrer",
            "$screen_height",
            "$screen_width",
            "$viewport_height",
            "$viewport_width",
            "$raw_user_agent",
            "utm_source",
            "utm_medium",
            "utm_campaign",
            "utm_content",
            "utm_term",
            "gclid",
            "gad_source",
            "gclsrc",
            "dclid",
            "gbraid",
            "wbraid",
            "fbclid",
            "msclkid",
            "twclid",
            "li_fat_id",
            "mc_cid",
            "igshid",
            "ttclid",
            "rdt_cid",
            "epik",
            "qclid",
            "sccid",
            "irclid",
            "_kx",
            "$session_id",
            "$window_id",
            "$pageview_id",
            "$host",
            "$user_id",
            "$device_id",
            "$anon_distinct_id",
            "$initial_referrer",
            "$initial_referring_domain",
            "$initial_utm_source",
            "$initial_utm_medium",
            "$initial_utm_campaign",
            "$initial_utm_content",
            "$initial_utm_term",
          ],
        },
        "personUpdateCache": {},
        "updateLatencyPerDistinctIdSeconds": {},
      },
    ],
  ],
  [
    "prepareEventStep",
    [
      {
        "distinct_id": "my_id",
        "event": "default event",
        "ip": "127.0.0.1",
        "now": "2020-02-23T02:15:00.000Z",
        "properties": {
          "$ip": "127.0.0.1",
        },
        "site_url": "http://localhost",
        "team_id": 2,
        "timestamp": "2020-02-23T02:15:00.000Z",
        "uuid": "uuid1",
      },
      true,
    ],
  ],
  [
    "extractHeatmapDataStep",
    [
      {
        "distinctId": "my_id",
        "elementsList": [],
        "event": "$pageview",
        "eventUuid": "uuid1",
        "ip": "127.0.0.1",
        "projectId": 1,
        "properties": {},
        "teamId": 2,
        "timestamp": "2020-02-23T02:15:00.000Z",
      },
    ],
  ],
  [
    "createEventStep",
    [
      {
        "distinctId": "my_id",
        "elementsList": [],
        "event": "$pageview",
        "eventUuid": "uuid1",
        "ip": "127.0.0.1",
        "projectId": 1,
        "properties": {},
        "teamId": 2,
        "timestamp": "2020-02-23T02:15:00.000Z",
      },
      {
        "person": {
          "created_at": "2020-02-23T02:15:00.000Z",
          "id": 123,
          "is_identified": true,
          "is_user_id": 0,
          "properties": {},
          "properties_last_operation": {},
          "properties_last_updated_at": {},
          "team_id": 2,
          "uuid": "uuid",
          "version": 0,
        },
        "personUpdateProperties": {},
      },
      true,
    ],
  ],
  [
    "emitEventStep",
    [
      {
        "created_at": "2024-11-18 14:54:33.606",
        "distinct_id": "my_id",
        "elements_chain": "",
        "event": "$pageview",
        "person_created_at": "2024-11-18 14:54:33",
        "person_mode": "full",
        "person_properties": "{}",
        "project_id": 1,
        "properties": "{}",
        "team_id": 2,
        "timestamp": "2020-02-23 02:15:00.000",
        "uuid": "uuid1",
      },
    ],
  ],
]
`;
